import{a as h,b as e,_ as Oe,__tla as xr}from"./federation-shared-c16daac1.js";import{g as br,__tla as Er}from"./getItemById-61799689.js";import{E as kr,b as Cr,C as Nr,e as Ir,d as Mr}from"./constants-278efb7a.js";import{u as L,c as X,g as z,f as Te,j as dt,h as Sr,a as ct,k as Br,p as jn,r as Lr,__tla as _r}from"./useState-137b4c1b.js";import{s as Dr,a as Un,g as Hn,__tla as zr}from"./_virtual___federation_host-55e6f8a8.js";import{e as Rr,c as pt,f as Vr,s as Z,o as mt,u as ft,g as $n,d as Or,h as Tr,__tla as Pr}from"./useDesginer-c7d0f44e.js";import{E as le,__tla as jr}from"./ExpressionInput-ac495609.js";let ht,An,Ur=Promise.all([(()=>{try{return xr}catch{}})(),(()=>{try{return Er}catch{}})(),(()=>{try{return _r}catch{}})(),(()=>{try{return zr}catch{}})(),(()=>{try{return Pr}catch{}})(),(()=>{try{return jr}catch{}})()]).then(async()=>{const gt=await h("vue"),Fn="createVNode",Wn="defineComponent",Kn=e(gt,Wn)({setup(){const t=L();return()=>{const n=t.boundingRect,s=t.dragPosition;return n?n.map((o,u)=>e(gt,Fn)("div",{key:u,style:{left:`${o.left}px`,top:`${o.top}px`,width:`${o.width}px`,height:`${o.height}px`,borderTop:s&&t.isBefore?"2px solid var(--primary-color)":void 0,borderBottom:s&&!t.isBefore?"2px solid var(--primary-color)":void 0},class:"un-absolute un-b-1px un-b-dashed un-border-var(--primary-color) un-pointer-events-none"},null)):null}}}),vt=await h("vue"),Jn="createVNode",qn="defineComponent",Xn=e(vt,qn)({setup(){const t=L(),n=Rr();return()=>{var o,u;const s=t.dragPosition;return t.isDragging&&s?e(vt,Jn)("div",{class:["un-text-12px un-b-1px un-b-solid un-border-var(--primary-color) un-pointer-events-none un-whitespace-nowrap un-h-28px un-flex un-items-center un-justify-center un-rounded-normal un-bg-var(--card-color) un-opacity-75 un-z-9",t.curDragId?"un-px-16px":"un-w-80px "],style:{position:s.isInner?"absolute":"fixed",left:`${s.x+8}px`,top:`${s.y+8}px`}},[t.curDragId?(o=X(t,t.curDragId))==null?void 0:o.name:(u=n.value[t.curDragCode])==null?void 0:u.name]):null}}}),Yn=await h("@rdx/shared"),Gn=await h("vue"),Zn="computed",Qn="resolveUnref";function ea(t){const n=pt();return e(Gn,Zn)(()=>{var s,o;return(o=n[(s=e(Yn,Qn)(t))==null?void 0:s.metaCode])==null?void 0:o.configuration})}const ta=await h("vue"),na="watch";function aa(){const t=L(),n=["dynamicClass","dynamicStyle","isRender","isShow"];let s=!1;n.forEach(o=>{e(ta,na)(()=>z(t)[o],(u,a)=>{const l=z(t);t.postMessage({type:"updateElement",data:{uid:l.uid,[o]:u}}),s?s=!1:(Te(t,()=>{s=!0,l[o]=a,t.postMessage({type:"updateElement",data:{uid:l.uid,[o]:a}})}),t.postMessage({type:"pushRollback"}))})})}const Pe=await h("vue"),oa="ref",wt="watch";function la(){const t=L(),n=e(Pe,oa)(JSON.parse(JSON.stringify(z(t).meta??{})));let s=!1;return e(Pe,wt)(()=>z(t).meta??{},o=>{s=!0,n.value=JSON.parse(JSON.stringify(o))}),e(Pe,wt)(n,o=>{if(s)return s=!1;const u=z(t),a=JSON.parse(JSON.stringify(o)),l=JSON.stringify(u.meta);Te(t,()=>{u.meta=JSON.parse(l),n.value=JSON.parse(l),t.postMessage({type:"updateElement",data:{uid:u.uid,meta:JSON.parse(l)}})}),t.postMessage({type:"pushRollback"}),u.meta=a,t.postMessage({type:"updateElement",data:{uid:u.uid,meta:a}})},{deep:!0}),n}const I=await h("vue"),Y=await h("naive-ui"),ra="NEmpty",sa="NScrollbar",ia="NTabPane",ua="NScrollbar",da="NTabPane",ca="NTabs",pa="NForm",V="createVNode",ma="Fragment",fa="defineAsyncComponent",yt="defineComponent",ha="provide",ga="h",va=e(I,fa)(()=>Oe(()=>import("./Index-3c95314f.js").then(async t=>(await t.__tla,t)),["./Index-3c95314f.js","./federation-shared-c16daac1.js","./useState-137b4c1b.js","./constants-278efb7a.js","./Close-caa3d1b3.js","./getItemById-61799689.js","./_virtual___federation_host-55e6f8a8.js","./useDesginer-c7d0f44e.js","./ExpressionInput-ac495609.js","./ExpressionInput-d0266da8.css","./Index-da9e05ef.css"],import.meta.url)),wa=e(I,yt)({setup(){const t=L();return e(I,ha)(kr,new Proxy({},{get:(n,s)=>{var o;return(o=z(t))==null?void 0:o[s]}})),aa(),()=>e(I,V)(e(Y,pa),{size:"small"},{default:()=>[e(I,V)(e(Y,ca),{defaultValue:1,tabsPadding:12,type:"line",themeOverrides:{tabGapMediumLine:"20px",panePaddingMedium:"0px"}},{default:()=>[e(I,V)(e(Y,da),{tab:"\u914D\u7F6E",name:1},{default:()=>[e(I,V)(e(Y,ua),{style:"height: calc(100vh - 87px);"},{default:()=>[e(I,V)(ya,{key:t.curElementId},null)]})]}),e(I,V)(e(Y,ia),{tab:"\u6837\u5F0F",name:2,displayDirective:"if"},{default:()=>[e(I,V)(e(Y,sa),{style:"height: calc(100vh - 87px);"},{default:()=>[e(I,V)(va,{key:t.curElementId},null),e(I,V)("div",{class:"un-p-12px un-b-t-1px un-b-t-solid un-border-var(--divider-color) un-grid un-grid-cols-2 un-gap-8px"},[e(I,V)(le,{label:"\u52A8\u6001\u6837\u5F0F",value:z(t).dynamicStyle,"onUpdate:value":n=>z(t).dynamicStyle=n,key:t.curElementId},null),e(I,V)(le,{label:"\u52A8\u6001\u7C7B\u540D",value:z(t).dynamicClass,"onUpdate:value":n=>z(t).dynamicClass=n,key:t.curElementId},null)])]})]})]})]})}}),ya=e(I,yt)({setup(){const t=L(),n=ea(()=>z(t)),s=la();return()=>e(I,V)(e(I,ma),null,[n.value?e(I,ga)(n.value,{meta:s.value}):e(I,V)(e(Y,ra),{description:"\u65E0\u914D\u7F6E\u9879",class:"un-my-32px"},null),e(I,V)("div",{class:"un-p-12px un-b-t-1px un-b-t-solid un-border-var(--divider-color) un-grid un-grid-cols-2 un-gap-x-8px"},[e(I,V)(le,{label:"\u662F\u5426\u6E32\u67D3",value:z(t).isRender,"onUpdate:value":o=>z(t).isRender=o},null),e(I,V)(le,{label:"\u662F\u5426\u53EF\u89C1",value:z(t).isShow,"onUpdate:value":o=>z(t).isShow=o},null)])])}});function $(t){return Number(t.replace(/[^0-9.-]/g,""))}function xt(t,n,s){let o=n.width,u=n.height,a=s.width,l=s.height;const r=getComputedStyle(t);if(r.getPropertyValue("box-sizing")==="content-box"){const d=$(r.paddingTop)+$(r.paddingBottom)+$(r.borderTopWidth)+$(r.borderBottomWidth),i=$(r.paddingLeft)+$(r.paddingRight)+$(r.borderRightWidth)+$(r.borderLeftWidth);o-=i,a-=i,u-=d,l-=d}return[o,a,u,l]}function xa(t,n,s){const[o,,u]=xt(t,n,s);let a=t.parentElement;for(;a&&(getComputedStyle(a).position==="static"||a instanceof HTMLBodyElement);)a=a.parentElement;a||(a=document.body);const l=getComputedStyle(a),r=a.getBoundingClientRect(),d=Math.round(n.top-r.top)-$(l.borderTopWidth),i=Math.round(n.left-r.left)-$(l.borderLeftWidth);return[d,i,o,u]}function ba(t,n){const s=new Map(t.map(r=>[r,!0])),o=new Map(n.map(r=>[r,!0])),u=new Set,a=[];t.forEach(r=>{o.has(r)?u.add(r):a.push(r)});const l=[];return n.forEach(r=>{s.has(r)?u.add(r):l.push(r)}),{addElements:l,removeElements:a,updateElements:Array.from(u)}}function Ea(t){const n=getComputedStyle(t).getPropertyValue("transform");if(n==="none")return;const s=n.match(/^(matrix3d)\((.+)\)$/)||n.match(/^(matrix)\((.+)\)$/);if(s)return{type:s[1],origin:n,values:s[2].split(",").map(Number)}}function ka(t,n){return new KeyframeEffect(t,[{transform:"scale(.98)",opacity:0},{transform:"scale(0.98)",opacity:0,offset:.5},{transform:"scale(1)",opacity:1}],{duration:n*1.5,easing:"ease-in"})}function Ca(t,n){return new KeyframeEffect(t,[{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0}],{duration:n,easing:"ease-out"})}function Na(t,n,s,o){const u=t.getBoundingClientRect(),a=n.left-u.left,l=n.top-u.top,[r,d,i,f]=xt(t,n,u);if(a||l){const m=Ea(t);let C,w;return m?(m.type==="matrix3d"?(m.values[12]+=a,m.values[13]+=l):(m.values[4]+=a,m.values[5]+=l),C={transform:`${m.type}(${m.values.join(",")})`},w={transform:m.origin}):(C={transform:`translate(${a}px, ${l}px)`},w={transform:"translate(0, 0)"}),r!==d&&(C.width=`${r}px`,w.width=`${d}px`),i!==f&&(C.height=`${i}px`,w.height=`${f}px`),new KeyframeEffect(t,[C,w],{duration:s,easing:o})}}const Ia=250,Ma="ease-in-out";function Sa(t,n){const s=t.appendChild;t.appendChild=a=>(n(),s.call(t,a));const o=t.insertBefore;t.insertBefore=(a,l)=>(n(),o.call(t,a,l));const u=t.removeChild;t.removeChild=a=>(n(),u.call(t,a))}function Ba(t,n){const{duration:s=Ia,easing:o=Ma,add:u=v=>ka(v,s),remove:a=v=>Ca(v,s),update:l=(v,E)=>Na(v,E,s,o)}=n||{};let r=!1,d=!1,i,f=!1;const m=()=>{if(r||d||f)return;r=!0;const v=Array.from(t.children);i=new Map(v.map(E=>[E,E.getBoundingClientRect()])),requestAnimationFrame(()=>{r=!1,d=!0;const{addElements:E,updateElements:R,removeElements:B}=ba(v,Array.from(t.children));E.forEach(x=>{const _=u(x);_&&new Animation(_).play()}),R.forEach(x=>{const _=l(x,i.get(x));_&&new Animation(_).play()}),B.forEach(x=>{t.appendChild(x);const _=i.get(x),K=a(x,_);if(!K)return;const[ae,ce,pe,oe]=xa(x,_,x.getBoundingClientRect());Object.assign(x.style,{position:"absolute",top:`${ae}px`,left:`${ce}px`,width:`${pe}px`,height:`${oe}px`,margin:0,pointerEvents:"none",transformOrigin:"center",zIndex:100});const me=new Animation(K);me.addEventListener("finish",()=>{x.remove()}),me.play()}),d=!1})},C=()=>{f=!0},w=()=>{f=!1};return Sa(t,m),{willChange:m,pauseAnimate:C,continueAnimate:w}}const je=await h("vue"),bt="ref",La="watch";function _a(t){const n=e(je,bt)(null),s=e(je,bt)(null);return e(je,La)(n,o=>{o&&(s.value=Ba(o,t))},{immediate:!0}),{rootRef:n,animatorRef:s}}const fe=await h("vue"),Da="createElementVNode",za="openBlock",Ra="createElementBlock",Va="defineComponent",Oa={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Ta=e(fe,Da)("path",{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z",fill:"currentColor"},null,-1),Pa=[Ta],ja=e(fe,Va)({name:"CaretRightFilled",render:function(t,n){return e(fe,za)(),e(fe,Ra)("svg",Oa,Pa)}}),Q=await h("vue"),Ue="createElementVNode",Ua="openBlock",Ha="createElementBlock",$a="defineComponent",Aa={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Fa=e(Q,Ue)("path",{d:"M480 150L256 48L32 150l224 104l224-104z",fill:"currentColor"},null,-1),Wa=e(Q,Ue)("path",{d:"M255.71 392.95l-144.81-66.2L32 362l224 102l224-102l-78.69-35.3l-145.6 66.25z",fill:"currentColor"},null,-1),Ka=e(Q,Ue)("path",{d:"M480 256l-75.53-33.53L256.1 290.6l-148.77-68.17L32 256l224 102l224-102z",fill:"currentColor"},null,-1),Ja=[Fa,Wa,Ka],Et=e(Q,$a)({name:"LayersSharp",render:function(t,n){return e(Q,Ua)(),e(Q,Ha)("svg",Aa,Ja)}}),he=await h("vue"),qa="createElementVNode",Xa="openBlock",Ya="createElementBlock",Ga="defineComponent",Za={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Qa=e(he,qa)("path",{d:"M64 32l35 403.22L255.77 480L413 435.15L448 32zm290.68 334.9L256.07 395l-98.46-28.24l-6.75-77.76h48.26l3.43 39.56l53.59 15.16l.13.28l53.47-14.85l5.64-64.15H203l-4-50h120.65l4.35-51H140l-4-49h240.58z",fill:"currentColor"},null,-1),eo=[Qa],to=e(he,Ga)({name:"LogoCss3",render:function(t,n){return e(he,Xa)(),e(he,Ya)("svg",Za,eo)}}),kt=t=>typeof t=="object"&&t!=null&&t.nodeType===1,Ct=(t,n)=>(!n||t!=="hidden")&&t!=="visible"&&t!=="clip",He=(t,n)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const s=getComputedStyle(t,null);return Ct(s.overflowY,n)||Ct(s.overflowX,n)||(o=>{const u=(a=>{if(!a.ownerDocument||!a.ownerDocument.defaultView)return null;try{return a.ownerDocument.defaultView.frameElement}catch{return null}})(o);return!!u&&(u.clientHeight<o.scrollHeight||u.clientWidth<o.scrollWidth)})(t)}return!1},ge=(t,n,s,o,u,a,l,r)=>a<t&&l>n||a>t&&l<n?0:a<=t&&r<=s||l>=n&&r>=s?a-t-o:l>n&&r<s||a<t&&r>s?l-n+u:0,no=t=>t.parentElement??(t.getRootNode().host||null),Nt=(t,n)=>{var s,o,u,a;if(typeof document>"u")return[];const{scrollMode:l,block:r,inline:d,boundary:i,skipOverflowHiddenElements:f}=n,m=typeof i=="function"?i:G=>G!==i;if(!kt(t))throw new TypeError("Invalid target");const C=document.scrollingElement||document.documentElement,w=[];let v=t;for(;kt(v)&&m(v);){if(v=no(v),v===C){w.push(v);break}v!=null&&v===document.body&&He(v)&&!He(document.documentElement)||v!=null&&He(v,f)&&w.push(v)}const E=(o=(s=window.visualViewport)==null?void 0:s.width)!=null?o:innerWidth,R=(a=(u=window.visualViewport)==null?void 0:u.height)!=null?a:innerHeight,{scrollX:B,scrollY:x}=window,{height:_,width:K,top:ae,right:ce,bottom:pe,left:oe}=t.getBoundingClientRect(),{top:me,right:Rn,bottom:Vn,left:On}=(G=>{const N=window.getComputedStyle(G);return{top:parseFloat(N.scrollMarginTop)||0,right:parseFloat(N.scrollMarginRight)||0,bottom:parseFloat(N.scrollMarginBottom)||0,left:parseFloat(N.scrollMarginLeft)||0}})(t);let U=r==="start"||r==="nearest"?ae-me:r==="end"?pe+Vn:ae+_/2-me+Vn,H=d==="center"?oe+K/2-On+Rn:d==="end"?ce+Rn:oe-On;const lt=[];for(let G=0;G<w.length;G++){const N=w[G],{height:Ne,width:Ie,top:Me,right:rt,bottom:st,left:Se}=N.getBoundingClientRect();if(l==="if-needed"&&ae>=0&&oe>=0&&pe<=R&&ce<=E&&ae>=Me&&pe<=st&&oe>=Se&&ce<=rt)return lt;const Be=getComputedStyle(N),Le=parseInt(Be.borderLeftWidth,10),_e=parseInt(Be.borderTopWidth,10),De=parseInt(Be.borderRightWidth,10),ze=parseInt(Be.borderBottomWidth,10);let J=0,q=0;const Re="offsetWidth"in N?N.offsetWidth-N.clientWidth-Le-De:0,Ve="offsetHeight"in N?N.offsetHeight-N.clientHeight-_e-ze:0,it="offsetWidth"in N?N.offsetWidth===0?0:Ie/N.offsetWidth:0,ut="offsetHeight"in N?N.offsetHeight===0?0:Ne/N.offsetHeight:0;if(C===N)J=r==="start"?U:r==="end"?U-R:r==="nearest"?ge(x,x+R,R,_e,ze,x+U,x+U+_,_):U-R/2,q=d==="start"?H:d==="center"?H-E/2:d==="end"?H-E:ge(B,B+E,E,Le,De,B+H,B+H+K,K),J=Math.max(0,J+x),q=Math.max(0,q+B);else{J=r==="start"?U-Me-_e:r==="end"?U-st+ze+Ve:r==="nearest"?ge(Me,st,Ne,_e,ze+Ve,U,U+_,_):U-(Me+Ne/2)+Ve/2,q=d==="start"?H-Se-Le:d==="center"?H-(Se+Ie/2)+Re/2:d==="end"?H-rt+De+Re:ge(Se,rt,Ie,Le,De+Re,H,H+K,K);const{scrollLeft:Tn,scrollTop:Pn}=N;J=ut===0?0:Math.max(0,Math.min(Pn+J/ut,N.scrollHeight-Ne/ut+Ve)),q=it===0?0:Math.max(0,Math.min(Tn+q/it,N.scrollWidth-Ie/it+Re)),U+=Pn-J,H+=Tn-q}lt.push({el:N,top:J,left:q})}return lt},ao=t=>t===!1?{block:"end",inline:"nearest"}:(n=>n===Object(n)&&Object.keys(n).length!==0)(t)?t:{block:"start",inline:"nearest"};function oo(t,n){if(!t.isConnected||!(u=>{let a=u;for(;a&&a.parentNode;){if(a.parentNode===document)return!0;a=a.parentNode instanceof ShadowRoot?a.parentNode.host:a.parentNode}return!1})(t))return;const s=(u=>{const a=window.getComputedStyle(u);return{top:parseFloat(a.scrollMarginTop)||0,right:parseFloat(a.scrollMarginRight)||0,bottom:parseFloat(a.scrollMarginBottom)||0,left:parseFloat(a.scrollMarginLeft)||0}})(t);if((u=>typeof u=="object"&&typeof u.behavior=="function")(n))return n.behavior(Nt(t,n));const o=typeof n=="boolean"||n==null?void 0:n.behavior;for(const{el:u,top:a,left:l}of Nt(t,ao(n))){const r=a-s.top+s.bottom,d=l-s.left+s.right;u.scroll({top:r,left:d,behavior:o})}}let ee,$e,It,Mt,St,Bt,Lt,_t,Dt,Ae,k,A,zt,Rt,Vt,Ot,Tt,Pt,jt,Ut,Ht,re,D,$t,At,Fe,We,Ft,Wt,Kt,Ke,Jt,qt,Je,b,F,Xt,Yt,Gt,Zt,Qt,en,tn,nn,M,ve,an,we,ye,on,ln,rn,sn,un;ee=await h("vue"),$e="createElementVNode",It="openBlock",Mt="createElementBlock",St="defineComponent",Bt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 16 16"},Lt=e(ee,$e)("g",{fill:"none"},[e(ee,$e)("path",{d:"M13.416 2.584c.778.778.778 2.039 0 2.817L6.058 12.76c-.319.32-.719.546-1.156.655l-2.283.57a.498.498 0 0 1-.604-.603l.57-2.283a2.49 2.49 0 0 1 .656-1.156l7.358-7.358a1.992 1.992 0 0 1 2.817 0zM9.894 4.697l-5.949 5.949a1.495 1.495 0 0 0-.393.694l-.369 1.477l1.477-.37c.263-.065.503-.2.694-.392l5.949-5.95l-1.409-1.408zm1.41-1.41l-.705.705l1.408 1.409l.705-.704a.996.996 0 0 0-1.409-1.41z",fill:"currentColor"})],-1),_t=[Lt],ht=e(ee,St)({name:"Edit16Regular",render:function(t,n){return e(ee,It)(),e(ee,Mt)("svg",Bt,_t)}}),Dt=await h("@rdx/admin"),Ae=await h("@rdx/shared"),k=await h("vue"),A=await h("naive-ui"),zt="NButton",Rt="NButton",Vt="NSpace",Ot="NModal",Tt="NButton",Pt="NEmpty",jt="NIcon",Ut="NButton",Ht="Fragment",re="createTextVNode",D="createVNode",$t="mergeProps",At="defineAsyncComponent",Fe="defineComponent",We="ref",Ft="createModalProps",Wt="useModalLogic",Kt="presetStyleModal",Ke=e(k,At)(()=>Oe(()=>import("./CodeEditor-d3474a9d.js").then(async t=>(await t.__tla,t)).then(t=>t.C),["./CodeEditor-d3474a9d.js","./federation-shared-c16daac1.js","./CodeEditor-f1c3ba81.css"],import.meta.url).then(t=>t.CodeEditor)),Jt=e(k,Fe)({setup(){const t=L(),n=e(k,We)(!1);return()=>e(k,D)(e(k,Ht),null,[e(k,D)("div",{class:"un-b-b-1px un-b-b-solid un-border-var(--divider-color) un-px-8px un-h-42px un-sticky un-top-0 un-bg-var(--card-color) un-z-10 un-flex un-items-center un-justify-between"},[e(k,D)("span",null,[e(k,re)("\u9875\u9762\u6837\u5F0F")]),e(k,D)(e(A,Ut),{size:"tiny",onClick:()=>n.value=!0},{default:()=>[e(k,D)(e(A,jt),null,{default:()=>[e(k,D)(ht,null,null)]})]})]),e(k,D)("div",{class:"un-grid un-gap-8px un-p-8px"},[t.globalStyle?e(k,D)(Ke,{value:t.globalStyle,language:"css",readOnly:!0,minimap:!1,style:"height: calc(100vh - 108px);"},null):e(k,D)(e(A,Pt),{class:"un-h-200px un-flex un-justify-center"},{extra:()=>e(k,D)(e(A,Tt),{ghost:!0,size:"small",type:"primary",onClick:()=>n.value=!0},{default:()=>[e(k,re)("\u7F16\u8F91\u6837\u5F0F")]})})]),e(k,D)(qt,{show:n.value,"onUpdate:show":s=>n.value=s,data:t.globalStyle,"onUpdate:data":s=>t.globalStyle=s},null)])}}),qt=e(k,Fe)({props:{...e(Ae,Ft)(),"onUpdate:data":Function},setup(t){const n=e(k,We)("");e(Ae,Wt)({props:t,onShow(){n.value=t.data}});const s=()=>{var o,u;(o=t["onUpdate:data"])==null||o.call(t,n.value),(u=t["onUpdate:show"])==null||u.call(t,!1)};return()=>e(k,D)(e(A,Ot),e(k,$t)({preset:"card",showIcon:!1,maskClosable:!1,title:"\u7F16\u8F91\u6837\u5F0F",show:t.show,"onUpdate:show":t["onUpdate:show"],style:{width:"1200px"},size:"small",autoFocus:!1},e(Dt,Kt)),{default:()=>[e(k,D)("div",{class:"un-p-12px",style:"height: calc(100vh - 160px);"},[e(k,D)(Ke,{value:n.value,"onUpdate:value":o=>n.value=o,language:"css"},null)])],footer:()=>e(k,D)(e(A,Vt),{justify:"end"},{default:()=>[e(k,D)(e(A,Rt),{onClick:()=>{var o;return(o=t["onUpdate:show"])==null?void 0:o.call(t,!1)}},{default:()=>[e(k,re)("\u53D6\u6D88")]}),e(k,D)(e(A,zt),{type:"primary",onClick:s},{default:()=>[e(k,re)("\u786E\u5B9A")]})]})})}}),Je=await h("@rdx/admin"),b=await h("vue"),F=await h("naive-ui"),Xt="NInput",Yt="NIcon",Gt="NIcon",Zt="NTabPane",Qt="NScrollbar",en="NIcon",tn="NTabPane",nn="NTabs",M="createVNode",ve="defineComponent",an="computed",we="ref",ye="watch",on="useColors",ln="createHoverColor",rn=e(b,ve)({setup(){const t=L(),n=s=>e(b,M)("div",{class:"un-cursor-pointer un-flex-1 un-flex un-items-center",onClick:()=>{t.ctrlKey||(t.curElementId=s.uid),ct(t,s)}},[e(b,M)(un,{element:s},null)]);return()=>e(b,M)(e(F,nn),{placement:"left",type:"line",class:"un-bg-var(--card-color) un-w-288px",themeOverrides:{panePaddingMedium:"0",tabPaddingVerticalMediumLine:"8px 14px",tabTextColorLine:"var(--text-color3)"},defaultValue:1},{default:()=>[e(b,M)(e(F,tn),{name:1,tab:()=>e(b,M)(e(F,en),{size:18},{default:()=>[e(b,M)(Et,null,null)]})},{default:()=>[e(b,M)(e(F,Qt),{style:"height: calc(100vh - 45px);"},{default:()=>[e(b,M)(sn,{class:"un-p-8px",renderLabel:n},null)]})]}),e(b,M)(e(F,Zt),{name:2,tab:()=>e(b,M)(e(F,Gt),{size:18},{default:()=>[e(b,M)(to,null,null)]})},{default:()=>[e(b,M)(Jt,null,null)]})]})}}),sn=e(b,ve)({props:{renderLabel:Function},setup(t){const n=L(),s=e(Je,on)(),o=pt(),u=e(b,an)(()=>{const d=[];return Vr(n.elements,(i,f,m)=>(d.push({element:i,depth:m}),n.expandedKeyMap.get(i.uid)??!1)),d});let a=0;const{rootRef:l}=_a(),r=e(b,we)(null);return e(b,ye)(r,d=>{d&&setTimeout(()=>{oo(d,{scrollMode:"if-needed",behavior:"smooth",block:"center",inline:"nearest"})},250)},{immediate:!0}),()=>e(b,M)("div",{ref:l,onMouseleave:()=>{n.isDragging&&(n.isSink=!1,n.curElementId=null)}},[u.value.map(d=>{var w,v;const{element:i,depth:f}=d,m=dt(n,i),C=i.uid===n.curElementId&&!n.isDragging;return e(b,M)("div",{key:i.uid,class:["un-flex un-items-center un-cursor-pointer un-rounded-normal un-relative",C?"":"un-hover:bg-var(--hover-color)"],ref:E=>{C&&(r.value=E)},style:{paddingLeft:`${f*8}px`,background:(n.selectElementIds.size?n.selectElementIds.has(i.uid):C)?e(Je,ln)(s.value.primaryColor,.75):void 0},onMouseover:E=>{n.isDragging&&(n.isSink=!1,a=E.clientX)},onMousemove:E=>{var R,B;!n.isDragging||!n.curDragCode&&!Sr(n,X(n,n.curDragId),i)||(n.isSink=n.curDragId!==i.uid&&(((R=o[m.metaCode])==null?void 0:R.droppable)===!1||!!i.children&&((B=o[i.metaCode])==null?void 0:B.droppable)!==!1&&a-E.clientX<-12),n.curElementId=i.uid,n.isSink?n.isBefore=!1:n.isBefore=E.offsetY<16)},onMousedown:E=>{if(i.metaCode==="slot"||n.editingId)return;const R=x=>{var _;x.preventDefault(),!(Math.pow(x.clientX-E.clientX,2)+Math.pow(x.clientY-E.clientY,2)<8*8||((_=document.getSelection())==null?void 0:_.type)==="Range")&&(n.curDragId=i.uid,n.curElementId=i.uid,n.dragPosition={x:x.clientX,y:x.clientY},n.isDragging=!0,window.removeEventListener("mousemove",R))},B=()=>{window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",B)};window.addEventListener("mousemove",R),window.addEventListener("mouseup",B)}},[(w=i.children)!=null&&w.length?e(b,M)("div",{style:["transition: transform .15s var(--cubic-bezier-ease-in-out);",n.expandedKeyMap.get(i.uid)?"transform: rotate(90deg)":""],class:"un-w-16px un-h-16px un-justify-center un-flex un-items-center",onClick:()=>{n.expandedKeyMap.set(i.uid,!n.expandedKeyMap.get(i.uid))}},[e(b,M)(e(F,Yt),null,{default:()=>[e(b,M)(ja,null,null)]})]):null,(v=t.renderLabel)==null?void 0:v.call(t,i),n.isDragging&&n.curElementId===i.uid?e(b,M)("div",{class:"un-absolute un-z-9 un-right-0px un-h-2px un-bg-primary un-pointer-events-none",style:`left: ${f*8+8+(n.isSink?0:-8)}px;${n.isBefore?"top: -1px;":"bottom: -1px;"}`},null):null])})])}}),un=e(b,ve)({props:{element:{type:Object,required:!0}},setup(t){const n=e(b,we)(""),s=e(b,we)(),o=L(),u=()=>{n.value=t.element.name||"",o.editingId=t.element.uid},a=l=>{l.key==="Enter"&&(o.editingId=null,n.value&&(t.element.name=n.value))};return e(b,ye)(s,l=>{l&&l.focus()}),e(b,ye)(()=>o.curElementId===t.element.uid,l=>{!l&&o.editingId&&(o.editingId=null,n.value&&(t.element.name=n.value))}),()=>{const l=t.element;return e(b,M)("div",{class:"un-ml-4px un-lh-32px un-flex-1",onDblclick:u,draggable:!1},[o.editingId===l.uid?e(b,M)(e(F,Xt),{value:n.value,"onUpdate:value":r=>n.value=r,size:"small",onKeydown:a,ref:s},null):l.name??"\u672A\u7ED1\u5B9A\u7EC4\u4EF6"])}}});const S=await h("vue"),W=await h("naive-ui"),lo="NCollapseItem",ro="NCollapse",so="NScrollbar",io="NTabPane",uo="NScrollbar",co="NTabPane",po="NTabs",T="createVNode",mo="isVNode",fo="defineAsyncComponent",dn="defineComponent",ho="h",cn="ref",go="watch",vo="NButton";function wo(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!e(S,mo)(t)}const yo=e(S,fo)(()=>Oe(()=>import("./Index-3c95314f.js").then(async t=>(await t.__tla,t)),["./Index-3c95314f.js","./federation-shared-c16daac1.js","./useState-137b4c1b.js","./constants-278efb7a.js","./Close-caa3d1b3.js","./getItemById-61799689.js","./_virtual___federation_host-55e6f8a8.js","./useDesginer-c7d0f44e.js","./ExpressionInput-ac495609.js","./ExpressionInput-d0266da8.css","./Index-da9e05ef.css"],import.meta.url)),xo=e(S,dn)({setup(){const t=L();return()=>e(S,T)(e(W,po),{defaultValue:1,tabsPadding:12,type:"line",themeOverrides:{tabGapMediumLine:"20px",panePaddingMedium:"0px"}},{default:()=>[e(S,T)(e(W,co),{tab:"\u7EC4\u4EF6",name:1},{default:()=>[e(S,T)(e(W,uo),{style:"height: calc(100vh - 87px);"},{default:()=>[e(S,T)(bo,null,null)]})]}),e(S,T)(e(W,io),{tab:"\u6837\u5F0F",name:2,displayDirective:"if"},{default:()=>[e(S,T)(e(W,so),{style:"height: calc(100vh - 87px);"},{default:()=>[e(S,T)(yo,{key:t.curElementId},null),e(S,T)("div",{class:"un-p-12px un-b-t-1px un-b-t-solid un-border-var(--divider-color) un-grid un-grid-cols-2 un-gap-8px"},[e(S,T)(le,{label:"\u52A8\u6001\u6837\u5F0F",value:t.dynamicStyle,"onUpdate:value":n=>t.dynamicStyle=n},null),e(S,T)(le,{label:"\u52A8\u6001\u7C7B\u540D",value:t.dynamicClass,"onUpdate:value":n=>t.dynamicClass=n},null)])]})]})]})}}),bo=e(S,dn)({setup(){const t=L(),n=Br(),s=a=>e(S,ho)(e(W,vo),{key:a.code,size:"small",style:"font-size: 12px;",focusable:!1,onMousedown(l){const r=i=>{var f;Math.pow(i.clientX-l.clientX,2)+Math.pow(i.clientY-l.clientY,2)<64||((f=document.getSelection())==null?void 0:f.type)==="Range"||(t.isDragging=!0,t.curDragCode=a.code,t.dragPosition={x:i.clientX,y:i.clientY},window.removeEventListener("mousemove",r))},d=()=>{window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",d)};window.addEventListener("mousemove",r),window.addEventListener("mouseup",d)}},{default:()=>a.name}),o=e(S,cn)([]),u=e(S,cn)([]);return e(S,go)(n,a=>{const l={},r=[];a.forEach(d=>{if(!d.hideInPanel)if(!d.group)r.push(d);else{const i=d.group;l[i]?l[i].push(d):l[i]=[d]}}),u.value=Object.keys(l),o.value=u.value.map(d=>({name:d,items:l[d]})),r.length&&(u.value.push("\u9ED8\u8BA4\u5206\u7EC4"),o.value.push({name:"\u9ED8\u8BA4\u5206\u7EC4",items:r}))},{immediate:!0}),()=>{let a;return e(S,T)(e(W,ro),{class:"un-my-16px",expandedNames:u.value,"onUpdate:expandedNames":l=>u.value=l},wo(a=o.value.map(({name:l,items:r})=>e(S,T)(e(W,lo),{title:l,name:l,key:l},{default:()=>[e(S,T)("div",{class:"un-grid un-grid-cols-3 un-gap-8px un-px-12px"},[r.map(d=>s(d))])]})))?a:{default:()=>[a]})}}}),xe=await h("vue"),Eo="createElementVNode",ko="openBlock",Co="createElementBlock",No="defineComponent",Io={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Mo=e(xe,Eo)("path",{d:"M476 399.1c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1V484h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H420v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V540h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H476v-84.9zM560.5 704h-225c-4.1 0-7.5 3.2-7.5 7v42c0 3.8 3.4 7 7.5 7h225c4.1 0 7.5-3.2 7.5-7v-42c0-3.8-3.4-7-7.5-7zm-7.1-502.6c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v704c0 17.7 14.3 32 32 32h512c17.7 0 32-14.3 32-32V397.3c0-8.5-3.4-16.6-9.4-22.6L553.4 201.4zM664 888H232V264h282.2L664 413.8V888zm190.2-581.4L611.3 72.9c-6-5.7-13.9-8.9-22.2-8.9H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h277l219 210.6V824c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V329.6c0-8.7-3.5-17-9.8-23z",fill:"currentColor"},null,-1),So=[Mo],Bo=e(xe,No)({name:"DiffOutlined",render:function(t,n){return e(xe,ko)(),e(xe,Co)("svg",Io,So)}}),be=await h("vue"),Lo="createElementVNode",_o="openBlock",Do="createElementBlock",zo="defineComponent",Ro={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Vo=e(be,Lo)("path",{d:"M484 443.1V528h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H484v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V584h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H540v-84.9c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1zm396-144.7H521L403.7 186.2a8.15 8.15 0 0 0-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z",fill:"currentColor"},null,-1),Oo=[Vo],To=e(be,zo)({name:"FolderAddOutlined",render:function(t,n){return e(be,_o)(),e(be,Do)("svg",Ro,Oo)}}),te=await h("vue"),qe="createElementVNode",Po="openBlock",jo="createElementBlock",Uo="defineComponent",Ho={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},$o=e(te,qe)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M160 368L32 256l128-112"},null,-1),Ao=e(te,qe)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M352 368l128-112l-128-112"},null,-1),Fo=e(te,qe)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M304 96l-96 320"},null,-1),Wo=[$o,Ao,Fo],Ko=e(te,Uo)({name:"CodeSlashOutline",render:function(t,n){return e(te,Po)(),e(te,jo)("svg",Ho,Wo)}}),se=await h("vue"),pn="createElementVNode",Jo="openBlock",qo="createElementBlock",Xo="defineComponent",Yo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Go=e(se,pn)("path",{d:"M320 146s24.36-12-64-12a160 160 0 1 0 160 160",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1),Zo=e(se,pn)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 58l80 80l-80 80"},null,-1),Qo=[Go,Zo],el=e(se,Xo)({name:"Refresh",render:function(t,n){return e(se,Jo)(),e(se,qo)("svg",Yo,Qo)}}),Ee=await h("vue"),tl="createElementVNode",nl="openBlock",al="createElementBlock",ol="defineComponent",ll={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},rl=e(Ee,tl)("path",{d:"M262.29 192.31a64 64 0 1 0 57.4 57.4a64.13 64.13 0 0 0-57.4-57.4zM416.39 256a154.34 154.34 0 0 1-1.53 20.79l45.21 35.46a10.81 10.81 0 0 1 2.45 13.75l-42.77 74a10.81 10.81 0 0 1-13.14 4.59l-44.9-18.08a16.11 16.11 0 0 0-15.17 1.75A164.48 164.48 0 0 1 325 400.8a15.94 15.94 0 0 0-8.82 12.14l-6.73 47.89a11.08 11.08 0 0 1-10.68 9.17h-85.54a11.11 11.11 0 0 1-10.69-8.87l-6.72-47.82a16.07 16.07 0 0 0-9-12.22a155.3 155.3 0 0 1-21.46-12.57a16 16 0 0 0-15.11-1.71l-44.89 18.07a10.81 10.81 0 0 1-13.14-4.58l-42.77-74a10.8 10.8 0 0 1 2.45-13.75l38.21-30a16.05 16.05 0 0 0 6-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 0 0-6.07-13.94l-38.19-30A10.81 10.81 0 0 1 49.48 186l42.77-74a10.81 10.81 0 0 1 13.14-4.59l44.9 18.08a16.11 16.11 0 0 0 15.17-1.75A164.48 164.48 0 0 1 187 111.2a15.94 15.94 0 0 0 8.82-12.14l6.73-47.89A11.08 11.08 0 0 1 213.23 42h85.54a11.11 11.11 0 0 1 10.69 8.87l6.72 47.82a16.07 16.07 0 0 0 9 12.22a155.3 155.3 0 0 1 21.46 12.57a16 16 0 0 0 15.11 1.71l44.89-18.07a10.81 10.81 0 0 1 13.14 4.58l42.77 74a10.8 10.8 0 0 1-2.45 13.75l-38.21 30a16.05 16.05 0 0 0-6.05 14.08c.33 4.14.55 8.3.55 12.47z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),sl=[rl],il=e(Ee,ol)({name:"SettingsOutline",render:function(t,n){return e(Ee,nl)(),e(Ee,al)("svg",ll,sl)}}),ul=await h("@rdx/shared"),dl="request";async function cl(t){return(await e(ul,dl)({url:"/api/lowcode/setting/update",method:"put",data:t})).data}const pl=await h("@rdx/admin"),ml=await h("@rdx/shared"),fl=await h("vue-router"),hl="useRoute",gl="useRequestLogic",vl="preferMessage";function Xe(){const t=L(),n=e(fl,hl)();return e(ml,gl)(async()=>{window.onbeforeunload=null,await cl({id:n.query.id,pageSchema:Z(t),version:t.version})},{manual:!0,onSuccess(){t.version+=1,e(pl,vl).success("\u4FDD\u5B58\u6210\u529F")}})}const ke=await h("@rdx/admin"),j=await h("@rdx/shared"),mn=await h("vue-router"),c=await h("vue"),g=await h("naive-ui"),wl="NButton",yl="NButton",xl="NSpace",bl="NModal",El="NButton",kl="NButton",Cl="NSpace",Nl="NModal",Il="NButton",Ml="NButton",Sl="NSpace",Bl="NInput",Ll="NFormItem",_l="NForm",Dl="NModal",zl="NButton",Rl="NButton",Vl="NButton",Ol="NIcon",Tl="NButton",Pl="NTooltip",jl="NDivider",Ul="NIcon",Hl="NButton",$l="NTooltip",Al="NIcon",Fl="NButton",Wl="NTooltip",Kl="NIcon",Jl="NButton",ql="NTooltip",Xl="NDivider",Yl="NIcon",Gl="NButton",Zl="NTooltip",Ql="isVNode",p="createVNode",fn="Fragment",P="createTextVNode",Ye="mergeProps",er="defineAsyncComponent",Ce="defineComponent",ie="ref",hn="useRoute",Ge="useBoolean",Ze="createModalProps",tr="useSubmitLogic",nr="request",gn="useModalLogic",ar="convertListToMap",or="preferMessage",Qe="presetStyleModal";function lr(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!e(c,Ql)(t)}const vn=e(c,er)(()=>Oe(()=>import("./CodeEditor-d3474a9d.js").then(async t=>(await t.__tla,t)).then(t=>t.C),["./CodeEditor-d3474a9d.js","./federation-shared-c16daac1.js","./CodeEditor-f1c3ba81.css"],import.meta.url).then(t=>t.CodeDiffEditor)),rr=e(c,Ce)({setup(){const t=L(),n=e(mn,hn)(),{run:s,loadingRef:o}=Xe(),u=(w,v,E)=>e(c,p)(e(g,Zl),null,{default:()=>[E],trigger:()=>e(c,p)(e(g,Gl),{type:t[v]?"primary":"default",ghost:!0,size:"small",onClick:()=>{t[v]=!t[v]},focusable:!1},{default:()=>[e(c,p)(e(g,Yl),null,lr(w)?w:{default:()=>[w]})]})}),a=()=>{window.open(`./#/preview?id=${n.query.id}`)},{booleanRef:l,setTrue:r}=e(j,Ge)(),{booleanRef:d,setTrue:i}=e(j,Ge)(),{booleanRef:f,setTrue:m}=e(j,Ge)(),C=()=>{t.expandedKeyMap.clear()};return()=>e(c,p)(e(c,fn),null,[e(c,p)("div",{class:"un-relative un-flex un-items-center un-justify-between un-bg-var(--card-color) un-w-full un-px-12px un-h-45px un-gap-12px un-b-b-1px un-b-b-solid un-border-var(--divider-color)"},[e(c,p)("div",{class:"un-flex un-items-center un-gap-8px"},[u(e(c,p)(Et,null,null),"showLayer","\u5927\u7EB2\u6811"),u(e(c,p)(il,null,null),"showSetting","\u914D\u7F6E"),e(c,p)(e(g,Xl),{vertical:!0},null),e(c,p)(e(g,ql),null,{default:()=>[e(c,P)("\u6298\u53E0\u5927\u7EB2\u6811")],trigger:()=>e(c,p)(e(g,Jl),{ghost:!0,size:"small",onClick:C,focusable:!1},{default:()=>[e(c,p)(e(g,Kl),{component:To},null)]})}),e(c,p)(e(g,Wl),null,{default:()=>[e(c,P)("\u5237\u65B0\u5185\u9875")],trigger:()=>e(c,p)(e(g,Fl),{ghost:!0,size:"small",onClick:()=>{t.curElementId=null,t.rollbackStack.length=0,t.postMessage({type:"refresh"})},focusable:!1},{default:()=>[e(c,p)(e(g,Al),{component:el},null)]})}),e(c,p)(e(g,$l),null,{default:()=>[e(c,P)("\u9875\u9762schema")],trigger:()=>e(c,p)(e(g,Hl),{ghost:!0,size:"small",onClick:i,focusable:!1},{default:()=>[e(c,p)(e(g,Ul),{component:Ko},null)]})}),t.prodSchema?e(c,p)(e(c,fn),null,[e(c,p)(e(g,jl),{vertical:!0},null),e(c,p)(e(g,Pl),null,{default:()=>[e(c,P)("\u5BF9\u6BD4\u7EBF\u4E0A")],trigger:()=>e(c,p)(e(g,Tl),{ghost:!0,size:"small",onClick:m,focusable:!1},{default:()=>[e(c,p)(e(g,Ol),{component:Bo},null)]})})]):null]),e(c,p)("div",{class:"un-absolute un-left-50% un-translate-x--50% un-text-18px un-font-bold"},[t.title]),e(c,p)("div",{class:"un-flex un-items-center un-gap-8px"},[e(c,p)(e(g,Vl),{size:"small",onClick:s,loading:o.value},{default:()=>[e(c,P)("\u4FDD\u5B58")]}),e(c,p)(e(g,Rl),{size:"small",onClick:a},{default:()=>[e(c,P)("\u9884\u89C8")]}),e(c,p)(e(g,zl),{size:"small",onClick:r},{default:()=>[e(c,P)("\u53D1\u5E03")]})])]),e(c,p)(sr,{show:l.value,"onUpdate:show":w=>l.value=w},null),e(c,p)(ir,{show:d.value,"onUpdate:show":w=>d.value=w},null),e(c,p)(ur,{show:f.value,"onUpdate:show":w=>f.value=w},null)])}}),sr=e(c,Ce)({props:{...e(j,Ze)()},setup(t){const n=e(c,ie)(),s={remark:{required:!0,message:"\u8BF7\u8F93\u5165\u53D1\u5E03\u5907\u6CE8",trigger:["input"]}},o=e(mn,hn)(),u=L(),{loadingRef:a,submit:{modelRef:l,handleSubmit:r}}=e(j,tr)(async d=>{await e(j,nr)({url:"/api/lowcode/setting/release",method:"post",data:{id:o.query.id,remark:d.remark,pageSchema:Z(u),version:u.version}})},{model:()=>({remark:null}),validate:()=>{var d;(d=n.value)==null||d.validate()},manual:!0,onSuccess(){var d;u.version+=1,e(ke,or).success("\u53D1\u5E03\u6210\u529F"),(d=t["onUpdate:show"])==null||d.call(t,!1)}});return()=>e(c,p)(e(g,Dl),e(c,Ye)({preset:"card",showIcon:!1,maskClosable:!1,title:"\u53D1\u5E03\u9875\u9762",show:t.show,"onUpdate:show":t["onUpdate:show"],style:{width:"600px"},size:"small",autoFocus:!1},e(ke,Qe)),{default:()=>[e(c,p)(e(g,_l),{class:"un-mx-12px un-mt-12px",labelPlacement:"left",ref:n,model:l.value,rules:s},{default:()=>[e(c,p)(e(g,Ll),{path:"remark"},{default:()=>[e(c,p)(e(g,Bl),{type:"textarea",placeholder:"\u53D1\u5E03\u5907\u6CE8",value:l.value.remark,"onUpdate:value":d=>l.value.remark=d},null)]})]})],footer:()=>e(c,p)(e(g,Sl),{justify:"end"},{default:()=>[e(c,p)(e(g,Ml),{onClick:()=>{var d;return(d=t["onUpdate:show"])==null?void 0:d.call(t,!1)}},{default:()=>[e(c,P)("\u53D6\u6D88")]}),e(c,p)(e(g,Il),{type:"primary",onClick:r,loading:a.value},{default:()=>[e(c,P)("\u786E\u5B9A")]})]})})}}),ir=e(c,Ce)({props:{...e(j,Ze)()},setup(t){const n=e(c,ie)(""),s=e(c,ie)(""),o=L();e(j,gn)({props:t,onShow:()=>{if(o.selectElementIds.size||o.curElementId){o.selectElementIds.size||o.selectElementIds.add(o.curElementId);const a=JSON.stringify(Array.from(o.selectElementIds).map(l=>X(o,l)),null,2);s.value=a,n.value=a}else{const a=o.originSchema?JSON.parse(o.originSchema):{};s.value=Z(a,!0),n.value=Z(o,!0)}}});const u=()=>{var a;if(o.selectElementIds.size){const l=JSON.parse(n.value),r=e(j,ar)(l,"uid");o.selectElementIds.forEach(d=>{const i=X(o,d),f=JSON.stringify(i);Te(o,()=>{const m=JSON.parse(f);o.postMessage({type:"updateElement",data:m}),Object.assign(i,m)}),o.postMessage({type:"updateElement",data:r[d]}),Object.assign(i,r[d])})}else mt(o,n.value);(a=t["onUpdate:show"])==null||a.call(t,!1)};return()=>e(c,p)(e(g,Nl),e(c,Ye)({preset:"card",showIcon:!1,maskClosable:!1,title:"\u9875\u9762schema",show:t.show,"onUpdate:show":t["onUpdate:show"],style:{width:"calc(100vw - 120px)"},size:"small",autoFocus:!1},e(ke,Qe)),{default:()=>[e(c,p)("div",{class:"un-p-12px",style:"height: calc(100vh - 160px);"},[e(c,p)(vn,{original:s.value,modified:n.value,"onUpdate:modified":a=>n.value=a,language:"json"},null)])],footer:()=>e(c,p)(e(g,Cl),{justify:"end"},{default:()=>[e(c,p)(e(g,kl),{onClick:()=>{var a;return(a=t["onUpdate:show"])==null?void 0:a.call(t,!1)}},{default:()=>[e(c,P)("\u53D6\u6D88")]}),e(c,p)(e(g,El),{type:"primary",onClick:u},{default:()=>[e(c,P)("\u786E\u5B9A")]})]})})}}),ur=e(c,Ce)({props:{...e(j,Ze)()},setup(t){const n=e(c,ie)(""),s=e(c,ie)(""),o=L();e(j,gn)({props:t,onShow:()=>{const a=o.prodSchema?JSON.parse(o.prodSchema):{};s.value=Z(a,!0),n.value=Z(o,!0)}});const u=()=>{var a;mt(o,n.value),(a=t["onUpdate:show"])==null||a.call(t,!1)};return()=>e(c,p)(e(g,bl),e(c,Ye)({preset:"card",showIcon:!1,maskClosable:!1,title:"\u5BF9\u6BD4\u7EBF\u4E0A",show:t.show,"onUpdate:show":t["onUpdate:show"],style:{width:"calc(100vw - 120px)"},size:"small",autoFocus:!1},e(ke,Qe)),{default:()=>[e(c,p)("div",{class:"un-p-12px",style:"height: calc(100vh - 160px);"},[e(c,p)(vn,{original:s.value,modified:n.value,"onUpdate:modified":a=>n.value=a,language:"json"},null)])],footer:()=>e(c,p)(e(g,xl),{justify:"end"},{default:()=>[e(c,p)(e(g,yl),{onClick:()=>{var a;return(a=t["onUpdate:show"])==null?void 0:a.call(t,!1)}},{default:()=>[e(c,P)("\u53D6\u6D88")]}),e(c,p)(e(g,wl),{type:"primary",onClick:u},{default:()=>[e(c,P)("\u786E\u5B9A")]})]})})}});function wn(){const t=L(),n=pt(),{createElement:s,appendChild:o,insertBefore:u,insertAfter:a}=ft();return()=>{var r,d,i,f,m,C,w,v,E,R;const l=z(t);if(l&&l.uid!==t.curDragId)if(t.curDragId){const B=X(t,t.curDragId);!((r=t.dragPosition)!=null&&r.isInner)&&!t.isSink||t.curElementId&&(!l.children||l.children.filter(x=>x.metaCode!=="slot").length||((d=n[l.metaCode])==null?void 0:d.droppable)===!1)&&((f=n[(i=dt(t,l))==null?void 0:i.metaCode])==null?void 0:f.droppable)!==!1?t.isBefore?u(B,l):a(B,l):t.isBefore&&((m=l.children)!=null&&m.length)?u(B,l.children[0]):o(B,l),t.curElementId=t.curDragId}else{const B=t.curDragCode,x=s(B);!((C=t.dragPosition)!=null&&C.isInner)&&!t.isSink||t.curElementId&&(!l.children||l.children.filter(_=>_.metaCode!=="slot").length||((w=n[l.metaCode])==null?void 0:w.droppable)===!1)&&((E=n[(v=dt(t,l))==null?void 0:v.metaCode])==null?void 0:E.droppable)!==!1?t.isBefore?u(x,l):a(x,l):t.isBefore&&((R=l.children)!=null&&R.length)?u(x,l.children[0]):o(x,l),t.curElementId=x.uid,t.boundingRect=null}t.curDragCode=null,t.curDragId=null,t.isDragging=!1,t.dragPosition=null,t.isSink=!1}}const ne=await h("vue"),et="watch",dr="watchEffect",cr="onBeforeMount",pr="onUnmounted";function mr(){const t=L(),{removeChild:n}=ft(),s=$n(),o=Or(),{run:u}=Xe();e(ne,et)(()=>t.ctrlKey,i=>{i&&t.curElementId&&ct(t,z(t))}),e(ne,et)(()=>t.curElementId,()=>{t.selectElementIds.clear()}),e(ne,et)(()=>[t.curElementId,t.isDragging],([i,f])=>{if(!i||f)return;const m=[],C=w=>{for(let v=0;v<w.length;v+=1){const E=w[v];if(E.uid===i||(m.push(E.uid),C(E.children??[])))return!0;m.pop()}};C(t.elements),m.forEach(w=>t.expandedKeyMap.set(w,!0))}),e(ne,dr)(()=>{const i=t.boundingRect,f=t.dragPosition;!i||!f||!f.isInner||(t.isBefore=f&&i.some(m=>f.y>=m.top&&f.y<=m.top+m.height&&f.y<m.top+m.height/2))});const a=()=>{if(t.selectElementIds.size)t.selectElementIds.forEach(i=>{n(X(t,i))});else{const i=z(t);if(!i||i.metaCode==="slot")return;n(i)}},l=i=>{var m;if(t.pauseKeyEvent||["input","textarea"].includes((m=document.activeElement)==null?void 0:m.tagName.toLowerCase()))return;const{ctrlKey:f}=i;f&&(t.ctrlKey=!0),f?i.key==="z"?(i.preventDefault(),jn(t)):i.key==="a"?(i.preventDefault(),t.elements.forEach(C=>ct(t,C))):i.key==="s"&&(i.preventDefault(),u()):i.key===" "?(i.preventDefault(),t.curElementId=null,t.selectElementIds.clear()):i.key==="Delete"&&a()},r=i=>{const{ctrlKey:f}=i;f||(t.ctrlKey=!1)},d=i=>{var f,m;t.pauseKeyEvent||["input","textarea"].includes((f=document.activeElement)==null?void 0:f.tagName.toLowerCase())||s((m=i.clipboardData)==null?void 0:m.getData("text/plain"))};e(ne,cr)(()=>{document.addEventListener("keydown",l),document.addEventListener("keyup",r),document.addEventListener("copy",o),document.addEventListener("paste",d)}),e(ne,pr)(()=>{document.removeEventListener("keydown",l),document.removeEventListener("keyup",r),document.removeEventListener("copy",o),document.removeEventListener("paste",d)})}const ue=await h("vue"),fr="nextTick",hr="onBeforeMount",gr="onUnmounted",vr="watch",wr="toRaw";function yr(t){const{removeChild:n}=ft(),{run:s}=Xe(),o=wn(),u=$n(),a={ready(){Tr(t)},changeState({data:r}){t[r.key]=r.value},initChildren({data:r}){const d=X(t,Number(r));d.children=[]},selectElement({data:r}){t.curElementId=r},dragstart({data:r}){t.curDragId=r,t.curElementId=r,t.isDragging=!0},dropElement(){o()},removeChild({data:r}){n(X(t,r))},popRollback(){jn(t)},spaceKey(){t.curElementId=null,t.selectElementIds.clear()},savePage(){s()},setBindingRect({data:r}){t.boundingRect=r},pasteElement({data:r}){u(r)}},l=r=>{var i,f;const d=[];(f=(i=r.data).forEach)==null||f.call(i,m=>a[m.type]({data:m.data,rollbacks:d})),d.length&&(e(ue,fr)(()=>{Te(t,()=>d.forEach(m=>m()))}),t.postMessage({type:"pushRollback"}))};e(ue,hr)(()=>{window.addEventListener("message",l)}),e(ue,gr)(()=>{window.removeEventListener("message",l)}),["dynamicClass","dynamicStyle","curElementId","curDragCode","curDragId","isDragging","globalStyle","ctrlKey","style"].forEach(r=>{e(ue,vr)(()=>t[r],d=>{var i;(i=t.postMessage)==null||i.call(t,{type:"changeState",data:{key:r,value:e(ue,wr)(d)}})},{deep:!0})})}let yn,tt,y,xn,O,nt,bn,de,En,kn,Cn,Nn,at,In,Mn,Sn,Bn,Ln,_n,Dn,zn,ot;yn=await h("vue-router"),tt=await h("@rdx/shared"),y=await h("vue"),xn="Fragment",O="createVNode",nt="defineComponent",bn="reactive",de="provide",En="shallowReactive",kn="shallowRef",Cn="computed",Nn="markRaw",at="nextTick",In="watch",Mn="ref",Sn="onBeforeMount",Bn="onBeforeUnmount",Ln="convertListToMap",_n="useRequestLogic",Dn="useRoute",zn=e(y,nt)({setup(){const t=e(y,bn)(Lr(!0));e(y,de)(Cr,t);const n=e(y,En)({});e(y,de)(Nr,n);const s=e(y,kn)([]);e(y,de)(Ir,s),e(y,de)(Mr,e(y,Cn)(()=>e(tt,Ln)(s.value,"code")));const o=e(yn,Dn)();return e(tt,_n)(async()=>(await br({id:o.query.id})).content,{ready:()=>o.query.id,onSuccess(u){const a=u.pageSchema;t.title=u.name,t.prodSchema=u.prodSchema,t.originSchema=a||Z(t),t.libs=e(y,Nn)(u.libs),t.version=u.version,mt(t,a),e(y,at)(()=>{window.onbeforeunload=null}),Promise.all(t.libs.map(async l=>(Dr?Un(l.name,{external:l.url,format:"esm"}):Un(l.name,{external:l.url.replace(".js","-legacy.js"),format:"systemjs"}),await Promise.all([Hn(l.name,"./componentMap").then(async r=>(await r.__tla,r.default)),Hn(l.name,"./components").then(async r=>(await r.__tla,r.default))])))).then(l=>{l.forEach(([r,d])=>{Object.assign(n,r),s.value=s.value.concat(d)})}),document.title=`\u9875\u9762\u8BBE\u8BA1 - ${t.title}`}}),e(y,In)(()=>t.elements,()=>{window.onbeforeunload=()=>!0},{deep:!0}),()=>e(y,O)(e(y,xn),null,[e(y,O)(rr,null,null),e(y,O)("div",{class:"un-flex"},[t.showLayer?e(y,O)(rn,{class:"un-b-r-1px un-b-r-solid un-border-var(--divider-color) un-select-none"},null):null,e(y,O)(ot,{class:"un-flex-1"},null),t.showSetting?e(y,O)("div",{class:"un-w-280px un-bg-var(--card-color) un-b-l-1px un-b-l-solid un-border-var(--divider-color)"},[t.curElementId&&!t.isDragging?e(y,O)(wa,null,null):e(y,O)(xo,null,null)]):null])])}}),ot=e(y,nt)({setup(){const t=L(),n=e(y,Mn)(),s=[];mr();const o=wn();t.postMessage=l=>{s.push(l),e(y,at)(()=>{var r,d;s.length&&((d=(r=n.value)==null?void 0:r.contentWindow)==null||d.postMessage(s),s.length=0)})},yr(t);const u=l=>{var r;t.isDragging&&(l.preventDefault(),(r=t.dragPosition)!=null&&r.isInner&&(t.curElementId=null),t.dragPosition={x:l.clientX,y:l.clientY})},a=()=>{t.isDragging&&o()};return e(y,Sn)(()=>{document.addEventListener("mousemove",u),document.addEventListener("mouseup",a)}),e(y,Bn)(()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",a)}),()=>e(y,O)("div",{class:"un-relative"},[e(y,O)("div",{class:"un-relative un-overflow-hidden"},[e(y,O)("iframe",{ref:n,src:"./#/inner",class:"un-block un-border-none un-w-full",style:"height: calc(100vh - 45px);"},null),e(y,O)(Kn,null,null)]),e(y,O)(Xn,null,null)])}}),An=Object.freeze(Object.defineProperty({__proto__:null,Content:ot,default:zn},Symbol.toStringTag,{value:"Module"}))});export{ht as E,An as I,Ur as __tla};
