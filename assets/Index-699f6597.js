import{b as e,a as h,_ as Ve,__tla as dr}from"./federation-shared-a49272f9.js";import{g as cr,__tla as pr}from"./getItemById-2baeb860.js";import{E as mr,S as fr,C as hr,e as gr,d as vr}from"./constants-3149fad0.js";import{u as _,c as X,g as R,f as Oe,j as ut,h as wr,a as dt,k as yr,p as Tn,r as xr,__tla as br}from"./useState-9a390b3c.js";import{s as Er,a as Pn,g as Un,__tla as kr}from"./_virtual___federation_host-7d538dc0.js";import{e as Cr,c as ct,f as Nr,s as Z,o as pt,u as mt,g as jn,d as Ir,h as Mr,__tla as Sr}from"./useDesginer-c36d80fe.js";import{E as le,__tla as Br}from"./ExpressionInput-2eeb7388.js";import{R as _r,__tla as Lr}from"./Refresh-39621f05.js";let ft,Hn,Dr=Promise.all([(()=>{try{return dr}catch{}})(),(()=>{try{return pr}catch{}})(),(()=>{try{return br}catch{}})(),(()=>{try{return kr}catch{}})(),(()=>{try{return Sr}catch{}})(),(()=>{try{return Br}catch{}})(),(()=>{try{return Lr}catch{}})()]).then(async()=>{const me=await h("vue"),$n="createElementVNode",An="openBlock",Fn="createElementBlock",Wn="defineComponent",Kn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Jn=e(me,$n)("path",{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z",fill:"currentColor"},null,-1),qn=[Jn],Xn=e(me,Wn)({name:"CaretRightFilled",render:function(t,n){return e(me,An)(),e(me,Fn)("svg",Kn,qn)}}),fe=await h("vue"),Yn="createElementVNode",Gn="openBlock",Zn="createElementBlock",Qn="defineComponent",ea={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},ta=e(fe,Yn)("path",{d:"M476 399.1c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1V484h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H420v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V540h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H476v-84.9zM560.5 704h-225c-4.1 0-7.5 3.2-7.5 7v42c0 3.8 3.4 7 7.5 7h225c4.1 0 7.5-3.2 7.5-7v-42c0-3.8-3.4-7-7.5-7zm-7.1-502.6c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v704c0 17.7 14.3 32 32 32h512c17.7 0 32-14.3 32-32V397.3c0-8.5-3.4-16.6-9.4-22.6L553.4 201.4zM664 888H232V264h282.2L664 413.8V888zm190.2-581.4L611.3 72.9c-6-5.7-13.9-8.9-22.2-8.9H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h277l219 210.6V824c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V329.6c0-8.7-3.5-17-9.8-23z",fill:"currentColor"},null,-1),na=[ta],aa=e(fe,Qn)({name:"DiffOutlined",render:function(t,n){return e(fe,Gn)(),e(fe,Zn)("svg",ea,na)}}),he=await h("vue"),oa="createElementVNode",la="openBlock",ra="createElementBlock",sa="defineComponent",ia={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},ua=e(he,oa)("path",{d:"M484 443.1V528h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H484v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V584h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H540v-84.9c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1zm396-144.7H521L403.7 186.2a8.15 8.15 0 0 0-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z",fill:"currentColor"},null,-1),da=[ua],ca=e(he,sa)({name:"FolderAddOutlined",render:function(t,n){return e(he,la)(),e(he,ra)("svg",ia,da)}}),ht=await h("vue"),pa="createVNode",ma="defineComponent",fa=e(ht,ma)({setup(){const t=_();return()=>{const n=t.boundingRect,s=t.dragPosition;return n?n.map((o,u)=>e(ht,pa)("div",{key:u,style:{left:`${o.left}px`,top:`${o.top}px`,width:`${o.width}px`,height:`${o.height}px`,borderTop:s&&t.isBefore?"2px solid var(--primary-color)":void 0,borderBottom:s&&!t.isBefore?"2px solid var(--primary-color)":void 0},class:"un-absolute un-b-1px un-b-dashed un-border-var(--primary-color) un-pointer-events-none"},null)):null}}}),gt=await h("vue"),ha="createVNode",ga="defineComponent",va=e(gt,ga)({setup(){const t=_(),n=Cr();return()=>{var o,u;const s=t.dragPosition;return t.isDragging&&s?e(gt,ha)("div",{class:["un-text-12px un-b-1px un-b-solid un-border-var(--primary-color) un-pointer-events-none un-whitespace-nowrap un-h-28px un-flex un-items-center un-justify-center un-rounded-normal un-bg-var(--card-color) un-opacity-75 un-z-9",t.curDragId?"un-px-16px":"un-w-80px "],style:{position:s.isInner?"absolute":"fixed",left:`${s.x+8}px`,top:`${s.y+8}px`}},[t.curDragId?(o=X(t,t.curDragId))==null?void 0:o.name:(u=n.value[t.curDragCode])==null?void 0:u.name]):null}}}),wa=await h("@rdx/shared"),ya=await h("vue"),xa="computed",ba="resolveUnref";function Ea(t){const n=ct();return e(ya,xa)(()=>{var s,o;return(o=n[(s=e(wa,ba)(t))==null?void 0:s.metaCode])==null?void 0:o.configuration})}const ka=await h("vue"),Ca="watch";function Na(){const t=_(),n=["dynamicClass","dynamicStyle","isRender","isShow"];let s=!1;n.forEach(o=>{e(ka,Ca)(()=>R(t)[o],(u,a)=>{const l=R(t);t.postMessage({type:"updateElement",data:{uid:l.uid,[o]:u}}),s?s=!1:(Oe(t,()=>{s=!0,l[o]=a,t.postMessage({type:"updateElement",data:{uid:l.uid,[o]:a}})}),t.postMessage({type:"pushRollback"}))})})}const Te=await h("vue"),Ia="ref",vt="watch";function Ma(){const t=_(),n=e(Te,Ia)(JSON.parse(JSON.stringify(R(t).meta??{})));let s=!1;return e(Te,vt)(()=>R(t).meta??{},o=>{s=!0,n.value=JSON.parse(JSON.stringify(o))}),e(Te,vt)(n,o=>{if(s)return s=!1;const u=R(t),a=JSON.parse(JSON.stringify(o)),l=JSON.stringify(u.meta);Oe(t,()=>{u.meta=JSON.parse(l),n.value=JSON.parse(l),t.postMessage({type:"updateElement",data:{uid:u.uid,meta:JSON.parse(l)}})}),t.postMessage({type:"pushRollback"}),u.meta=a,t.postMessage({type:"updateElement",data:{uid:u.uid,meta:a}})},{deep:!0}),n}const I=await h("vue"),Y=await h("naive-ui"),Sa="NEmpty",Ba="NScrollbar",_a="NTabPane",La="NScrollbar",Da="NTabPane",Ra="NTabs",za="NForm",V="createVNode",Va="Fragment",Oa="defineAsyncComponent",wt="defineComponent",Ta="provide",Pa="h",Ua=e(I,Oa)(()=>Ve(()=>import("./Index-ab3cdcb6.js").then(async t=>(await t.__tla,t)),["./Index-ab3cdcb6.js","./federation-shared-a49272f9.js","./useState-9a390b3c.js","./constants-3149fad0.js","./Close-a51d54b5.js","./TextAlignRight16Filled-c135dfb8.js","./getItemById-2baeb860.js","./_virtual___federation_host-7d538dc0.js","./useDesginer-c36d80fe.js","./ExpressionInput-2eeb7388.js","./ExpressionInput-d0266da8.css","./Refresh-39621f05.js","./Index-da9e05ef.css"],import.meta.url)),ja=e(I,wt)({setup(){const t=_();return e(I,Ta)(mr,new Proxy({},{get:(n,s)=>{var o;return(o=R(t))==null?void 0:o[s]}})),Na(),()=>e(I,V)(e(Y,za),{size:"small"},{default:()=>[e(I,V)(e(Y,Ra),{defaultValue:1,tabsPadding:12,type:"line",themeOverrides:{tabGapMediumLine:"20px",panePaddingMedium:"0px"}},{default:()=>[e(I,V)(e(Y,Da),{tab:"\u914D\u7F6E",name:1},{default:()=>[e(I,V)(e(Y,La),{style:"height: calc(100vh - 87px);"},{default:()=>[e(I,V)(Ha,{key:t.curElementId},null)]})]}),e(I,V)(e(Y,_a),{tab:"\u6837\u5F0F",name:2,displayDirective:"if"},{default:()=>[e(I,V)(e(Y,Ba),{style:"height: calc(100vh - 87px);"},{default:()=>[e(I,V)(Ua,{key:t.curElementId},null),e(I,V)("div",{class:"un-p-12px un-b-t-1px un-b-t-solid un-border-var(--divider-color) un-grid un-grid-cols-2 un-gap-8px"},[e(I,V)(le,{label:"\u52A8\u6001\u6837\u5F0F",value:R(t).dynamicStyle,"onUpdate:value":n=>R(t).dynamicStyle=n,key:t.curElementId},null),e(I,V)(le,{label:"\u52A8\u6001\u7C7B\u540D",value:R(t).dynamicClass,"onUpdate:value":n=>R(t).dynamicClass=n,key:t.curElementId},null)])]})]})]})]})}}),Ha=e(I,wt)({setup(){const t=_(),n=Ea(()=>R(t)),s=Ma();return()=>e(I,V)(e(I,Va),null,[n.value?e(I,Pa)(n.value,{meta:s.value}):e(I,V)(e(Y,Sa),{description:"\u65E0\u914D\u7F6E\u9879",class:"un-my-32px"},null),e(I,V)("div",{class:"un-p-12px un-b-t-1px un-b-t-solid un-border-var(--divider-color) un-grid un-grid-cols-2 un-gap-x-8px"},[e(I,V)(le,{label:"\u662F\u5426\u6E32\u67D3",value:R(t).isRender,"onUpdate:value":o=>R(t).isRender=o},null),e(I,V)(le,{label:"\u662F\u5426\u53EF\u89C1",value:R(t).isShow,"onUpdate:value":o=>R(t).isShow=o},null)])])}});function $(t){return Number(t.replace(/[^0-9.-]/g,""))}function yt(t,n,s){let o=n.width,u=n.height,a=s.width,l=s.height;const r=getComputedStyle(t);if(r.getPropertyValue("box-sizing")==="content-box"){const d=$(r.paddingTop)+$(r.paddingBottom)+$(r.borderTopWidth)+$(r.borderBottomWidth),i=$(r.paddingLeft)+$(r.paddingRight)+$(r.borderRightWidth)+$(r.borderLeftWidth);o-=i,a-=i,u-=d,l-=d}return[o,a,u,l]}function $a(t,n,s){const[o,,u]=yt(t,n,s);let a=t.parentElement;for(;a&&(getComputedStyle(a).position==="static"||a instanceof HTMLBodyElement);)a=a.parentElement;a||(a=document.body);const l=getComputedStyle(a),r=a.getBoundingClientRect(),d=Math.round(n.top-r.top)-$(l.borderTopWidth),i=Math.round(n.left-r.left)-$(l.borderLeftWidth);return[d,i,o,u]}function Aa(t,n){const s=new Map(t.map(r=>[r,!0])),o=new Map(n.map(r=>[r,!0])),u=new Set,a=[];t.forEach(r=>{o.has(r)?u.add(r):a.push(r)});const l=[];return n.forEach(r=>{s.has(r)?u.add(r):l.push(r)}),{addElements:l,removeElements:a,updateElements:Array.from(u)}}function Fa(t){const n=getComputedStyle(t).getPropertyValue("transform");if(n==="none")return;const s=n.match(/^(matrix3d)\((.+)\)$/)||n.match(/^(matrix)\((.+)\)$/);if(s)return{type:s[1],origin:n,values:s[2].split(",").map(Number)}}function Wa(t,n){return new KeyframeEffect(t,[{transform:"scale(.98)",opacity:0},{transform:"scale(0.98)",opacity:0,offset:.5},{transform:"scale(1)",opacity:1}],{duration:n*1.5,easing:"ease-in"})}function Ka(t,n){return new KeyframeEffect(t,[{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0}],{duration:n,easing:"ease-out"})}function Ja(t,n,s,o){const u=t.getBoundingClientRect(),a=n.left-u.left,l=n.top-u.top,[r,d,i,f]=yt(t,n,u);if(a||l){const m=Fa(t);let C,w;return m?(m.type==="matrix3d"?(m.values[12]+=a,m.values[13]+=l):(m.values[4]+=a,m.values[5]+=l),C={transform:`${m.type}(${m.values.join(",")})`},w={transform:m.origin}):(C={transform:`translate(${a}px, ${l}px)`},w={transform:"translate(0, 0)"}),r!==d&&(C.width=`${r}px`,w.width=`${d}px`),i!==f&&(C.height=`${i}px`,w.height=`${f}px`),new KeyframeEffect(t,[C,w],{duration:s,easing:o})}}const qa=250,Xa="ease-in-out";function Ya(t,n){const s=t.appendChild;t.appendChild=a=>(n(),s.call(t,a));const o=t.insertBefore;t.insertBefore=(a,l)=>(n(),o.call(t,a,l));const u=t.removeChild;t.removeChild=a=>(n(),u.call(t,a))}function Ga(t,n){const{duration:s=qa,easing:o=Xa,add:u=v=>Wa(v,s),remove:a=v=>Ka(v,s),update:l=(v,E)=>Ja(v,E,s,o)}=n||{};let r=!1,d=!1,i,f=!1;const m=()=>{if(r||d||f)return;r=!0;const v=Array.from(t.children);i=new Map(v.map(E=>[E,E.getBoundingClientRect()])),requestAnimationFrame(()=>{r=!1,d=!0;const{addElements:E,updateElements:z,removeElements:B}=Aa(v,Array.from(t.children));E.forEach(x=>{const L=u(x);L&&new Animation(L).play()}),z.forEach(x=>{const L=l(x,i.get(x));L&&new Animation(L).play()}),B.forEach(x=>{t.appendChild(x);const L=i.get(x),K=a(x,L);if(!K)return;const[ae,de,ce,oe]=$a(x,L,x.getBoundingClientRect());Object.assign(x.style,{position:"absolute",top:`${ae}px`,left:`${de}px`,width:`${ce}px`,height:`${oe}px`,margin:0,pointerEvents:"none",transformOrigin:"center",zIndex:100});const pe=new Animation(K);pe.addEventListener("finish",()=>{x.remove()}),pe.play()}),d=!1})},C=()=>{f=!0},w=()=>{f=!1};return Ya(t,m),{willChange:m,pauseAnimate:C,continueAnimate:w}}const Pe=await h("vue"),xt="ref",Za="watch";function Qa(t){const n=e(Pe,xt)(null),s=e(Pe,xt)(null);return e(Pe,Za)(n,o=>{o&&(s.value=Ga(o,t))},{immediate:!0}),{rootRef:n,animatorRef:s}}const Q=await h("vue"),Ue="createElementVNode",eo="openBlock",to="createElementBlock",no="defineComponent",ao={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},oo=e(Q,Ue)("path",{d:"M480 150L256 48L32 150l224 104l224-104z",fill:"currentColor"},null,-1),lo=e(Q,Ue)("path",{d:"M255.71 392.95l-144.81-66.2L32 362l224 102l224-102l-78.69-35.3l-145.6 66.25z",fill:"currentColor"},null,-1),ro=e(Q,Ue)("path",{d:"M480 256l-75.53-33.53L256.1 290.6l-148.77-68.17L32 256l224 102l224-102z",fill:"currentColor"},null,-1),so=[oo,lo,ro],bt=e(Q,no)({name:"LayersSharp",render:function(t,n){return e(Q,eo)(),e(Q,to)("svg",ao,so)}}),ge=await h("vue"),io="createElementVNode",uo="openBlock",co="createElementBlock",po="defineComponent",mo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},fo=e(ge,io)("path",{d:"M64 32l35 403.22L255.77 480L413 435.15L448 32zm290.68 334.9L256.07 395l-98.46-28.24l-6.75-77.76h48.26l3.43 39.56l53.59 15.16l.13.28l53.47-14.85l5.64-64.15H203l-4-50h120.65l4.35-51H140l-4-49h240.58z",fill:"currentColor"},null,-1),ho=[fo],go=e(ge,po)({name:"LogoCss3",render:function(t,n){return e(ge,uo)(),e(ge,co)("svg",mo,ho)}}),Et=t=>typeof t=="object"&&t!=null&&t.nodeType===1,kt=(t,n)=>(!n||t!=="hidden")&&t!=="visible"&&t!=="clip",je=(t,n)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const s=getComputedStyle(t,null);return kt(s.overflowY,n)||kt(s.overflowX,n)||(o=>{const u=(a=>{if(!a.ownerDocument||!a.ownerDocument.defaultView)return null;try{return a.ownerDocument.defaultView.frameElement}catch{return null}})(o);return!!u&&(u.clientHeight<o.scrollHeight||u.clientWidth<o.scrollWidth)})(t)}return!1},ve=(t,n,s,o,u,a,l,r)=>a<t&&l>n||a>t&&l<n?0:a<=t&&r<=s||l>=n&&r>=s?a-t-o:l>n&&r<s||a<t&&r>s?l-n+u:0,vo=t=>t.parentElement??(t.getRootNode().host||null),Ct=(t,n)=>{var s,o,u,a;if(typeof document>"u")return[];const{scrollMode:l,block:r,inline:d,boundary:i,skipOverflowHiddenElements:f}=n,m=typeof i=="function"?i:G=>G!==i;if(!Et(t))throw new TypeError("Invalid target");const C=document.scrollingElement||document.documentElement,w=[];let v=t;for(;Et(v)&&m(v);){if(v=vo(v),v===C){w.push(v);break}v!=null&&v===document.body&&je(v)&&!je(document.documentElement)||v!=null&&je(v,f)&&w.push(v)}const E=(o=(s=window.visualViewport)==null?void 0:s.width)!=null?o:innerWidth,z=(a=(u=window.visualViewport)==null?void 0:u.height)!=null?a:innerHeight,{scrollX:B,scrollY:x}=window,{height:L,width:K,top:ae,right:de,bottom:ce,left:oe}=t.getBoundingClientRect(),{top:pe,right:Dn,bottom:Rn,left:zn}=(G=>{const N=window.getComputedStyle(G);return{top:parseFloat(N.scrollMarginTop)||0,right:parseFloat(N.scrollMarginRight)||0,bottom:parseFloat(N.scrollMarginBottom)||0,left:parseFloat(N.scrollMarginLeft)||0}})(t);let j=r==="start"||r==="nearest"?ae-pe:r==="end"?ce+Rn:ae+L/2-pe+Rn,H=d==="center"?oe+K/2-zn+Dn:d==="end"?de+Dn:oe-zn;const ot=[];for(let G=0;G<w.length;G++){const N=w[G],{height:Ce,width:Ne,top:Ie,right:lt,bottom:rt,left:Me}=N.getBoundingClientRect();if(l==="if-needed"&&ae>=0&&oe>=0&&ce<=z&&de<=E&&ae>=Ie&&ce<=rt&&oe>=Me&&de<=lt)return ot;const Se=getComputedStyle(N),Be=parseInt(Se.borderLeftWidth,10),_e=parseInt(Se.borderTopWidth,10),Le=parseInt(Se.borderRightWidth,10),De=parseInt(Se.borderBottomWidth,10);let J=0,q=0;const Re="offsetWidth"in N?N.offsetWidth-N.clientWidth-Be-Le:0,ze="offsetHeight"in N?N.offsetHeight-N.clientHeight-_e-De:0,st="offsetWidth"in N?N.offsetWidth===0?0:Ne/N.offsetWidth:0,it="offsetHeight"in N?N.offsetHeight===0?0:Ce/N.offsetHeight:0;if(C===N)J=r==="start"?j:r==="end"?j-z:r==="nearest"?ve(x,x+z,z,_e,De,x+j,x+j+L,L):j-z/2,q=d==="start"?H:d==="center"?H-E/2:d==="end"?H-E:ve(B,B+E,E,Be,Le,B+H,B+H+K,K),J=Math.max(0,J+x),q=Math.max(0,q+B);else{J=r==="start"?j-Ie-_e:r==="end"?j-rt+De+ze:r==="nearest"?ve(Ie,rt,Ce,_e,De+ze,j,j+L,L):j-(Ie+Ce/2)+ze/2,q=d==="start"?H-Me-Be:d==="center"?H-(Me+Ne/2)+Re/2:d==="end"?H-lt+Le+Re:ve(Me,lt,Ne,Be,Le+Re,H,H+K,K);const{scrollLeft:Vn,scrollTop:On}=N;J=it===0?0:Math.max(0,Math.min(On+J/it,N.scrollHeight-Ce/it+ze)),q=st===0?0:Math.max(0,Math.min(Vn+q/st,N.scrollWidth-Ne/st+Re)),j+=On-J,H+=Vn-q}ot.push({el:N,top:J,left:q})}return ot},wo=t=>t===!1?{block:"end",inline:"nearest"}:(n=>n===Object(n)&&Object.keys(n).length!==0)(t)?t:{block:"start",inline:"nearest"};function yo(t,n){if(!t.isConnected||!(u=>{let a=u;for(;a&&a.parentNode;){if(a.parentNode===document)return!0;a=a.parentNode instanceof ShadowRoot?a.parentNode.host:a.parentNode}return!1})(t))return;const s=(u=>{const a=window.getComputedStyle(u);return{top:parseFloat(a.scrollMarginTop)||0,right:parseFloat(a.scrollMarginRight)||0,bottom:parseFloat(a.scrollMarginBottom)||0,left:parseFloat(a.scrollMarginLeft)||0}})(t);if((u=>typeof u=="object"&&typeof u.behavior=="function")(n))return n.behavior(Ct(t,n));const o=typeof n=="boolean"||n==null?void 0:n.behavior;for(const{el:u,top:a,left:l}of Ct(t,wo(n))){const r=a-s.top+s.bottom,d=l-s.left+s.right;u.scroll({top:r,left:d,behavior:o})}}let ee,He,Nt,It,Mt,St,Bt,_t,Lt,$e,k,A,Dt,Rt,zt,Vt,Ot,Tt,Pt,Ut,jt,re,D,Ht,$t,Ae,Fe,At,Ft,Wt,We,Kt,Jt,Ke,b,F,qt,Xt,Yt,Gt,Zt,Qt,en,tn,M,we,nn,ye,xe,an,on,ln,rn,sn;ee=await h("vue"),He="createElementVNode",Nt="openBlock",It="createElementBlock",Mt="defineComponent",St={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 16 16"},Bt=e(ee,He)("g",{fill:"none"},[e(ee,He)("path",{d:"M13.416 2.584c.778.778.778 2.039 0 2.817L6.058 12.76c-.319.32-.719.546-1.156.655l-2.283.57a.498.498 0 0 1-.604-.603l.57-2.283a2.49 2.49 0 0 1 .656-1.156l7.358-7.358a1.992 1.992 0 0 1 2.817 0zM9.894 4.697l-5.949 5.949a1.495 1.495 0 0 0-.393.694l-.369 1.477l1.477-.37c.263-.065.503-.2.694-.392l5.949-5.95l-1.409-1.408zm1.41-1.41l-.705.705l1.408 1.409l.705-.704a.996.996 0 0 0-1.409-1.41z",fill:"currentColor"})],-1),_t=[Bt],ft=e(ee,Mt)({name:"Edit16Regular",render:function(t,n){return e(ee,Nt)(),e(ee,It)("svg",St,_t)}}),Lt=await h("@rdx/admin"),$e=await h("@rdx/shared"),k=await h("vue"),A=await h("naive-ui"),Dt="NButton",Rt="NButton",zt="NSpace",Vt="NModal",Ot="NButton",Tt="NEmpty",Pt="NIcon",Ut="NButton",jt="Fragment",re="createTextVNode",D="createVNode",Ht="mergeProps",$t="defineAsyncComponent",Ae="defineComponent",Fe="ref",At="createModalProps",Ft="useModalLogic",Wt="presetStyleModal",We=e(k,$t)(()=>Ve(()=>import("./CodeEditor-d53c09af.js").then(async t=>(await t.__tla,t)).then(t=>t.C),["./CodeEditor-d53c09af.js","./federation-shared-a49272f9.js","./CodeEditor-f1c3ba81.css"],import.meta.url).then(t=>t.CodeEditor)),Kt=e(k,Ae)({setup(){const t=_(),n=e(k,Fe)(!1);return()=>e(k,D)(e(k,jt),null,[e(k,D)("div",{class:"un-b-b-1px un-b-b-solid un-border-var(--divider-color) un-px-8px un-h-42px un-sticky un-top-0 un-bg-var(--card-color) un-z-10 un-flex un-items-center un-justify-between"},[e(k,D)("span",null,[e(k,re)("\u9875\u9762\u6837\u5F0F")]),e(k,D)(e(A,Ut),{size:"tiny",onClick:()=>n.value=!0},{default:()=>[e(k,D)(e(A,Pt),null,{default:()=>[e(k,D)(ft,null,null)]})]})]),e(k,D)("div",{class:"un-grid un-gap-8px un-p-8px"},[t.globalStyle?e(k,D)(We,{value:t.globalStyle,language:"css",readOnly:!0,minimap:!1,style:"height: calc(100vh - 108px);"},null):e(k,D)(e(A,Tt),{class:"un-h-200px un-flex un-justify-center"},{extra:()=>e(k,D)(e(A,Ot),{ghost:!0,size:"small",type:"primary",onClick:()=>n.value=!0},{default:()=>[e(k,re)("\u7F16\u8F91\u6837\u5F0F")]})})]),e(k,D)(Jt,{show:n.value,"onUpdate:show":s=>n.value=s,data:t.globalStyle,"onUpdate:data":s=>t.globalStyle=s},null)])}}),Jt=e(k,Ae)({props:{...e($e,At)(),"onUpdate:data":Function},setup(t){const n=e(k,Fe)("");e($e,Ft)({props:t,onShow(){n.value=t.data}});const s=()=>{var o,u;(o=t["onUpdate:data"])==null||o.call(t,n.value),(u=t["onUpdate:show"])==null||u.call(t,!1)};return()=>e(k,D)(e(A,Vt),e(k,Ht)({preset:"card",showIcon:!1,maskClosable:!1,title:"\u7F16\u8F91\u6837\u5F0F",show:t.show,"onUpdate:show":t["onUpdate:show"],style:{width:"1200px"},size:"small",autoFocus:!1},e(Lt,Wt)),{default:()=>[e(k,D)("div",{class:"un-p-12px",style:"height: calc(100vh - 160px);"},[e(k,D)(We,{value:n.value,"onUpdate:value":o=>n.value=o,language:"css"},null)])],footer:()=>e(k,D)(e(A,zt),{justify:"end"},{default:()=>[e(k,D)(e(A,Rt),{onClick:()=>{var o;return(o=t["onUpdate:show"])==null?void 0:o.call(t,!1)}},{default:()=>[e(k,re)("\u53D6\u6D88")]}),e(k,D)(e(A,Dt),{type:"primary",onClick:s},{default:()=>[e(k,re)("\u786E\u5B9A")]})]})})}}),Ke=await h("@rdx/admin"),b=await h("vue"),F=await h("naive-ui"),qt="NInput",Xt="NIcon",Yt="NIcon",Gt="NTabPane",Zt="NScrollbar",Qt="NIcon",en="NTabPane",tn="NTabs",M="createVNode",we="defineComponent",nn="computed",ye="ref",xe="watch",an="useColors",on="createHoverColor",ln=e(b,we)({setup(){const t=_(),n=s=>e(b,M)("div",{class:"un-cursor-pointer un-flex-1 un-flex un-items-center",onClick:()=>{t.ctrlKey||(t.curElementId=s.uid),dt(t,s)}},[e(b,M)(sn,{element:s},null)]);return()=>e(b,M)(e(F,tn),{placement:"left",type:"line",class:"un-bg-var(--card-color) un-w-288px",themeOverrides:{panePaddingMedium:"0",tabPaddingVerticalMediumLine:"8px 14px",tabTextColorLine:"var(--text-color3)"},defaultValue:1},{default:()=>[e(b,M)(e(F,en),{name:1,tab:()=>e(b,M)(e(F,Qt),{size:18},{default:()=>[e(b,M)(bt,null,null)]})},{default:()=>[e(b,M)(e(F,Zt),{style:"height: calc(100vh - 45px);"},{default:()=>[e(b,M)(rn,{class:"un-p-8px",renderLabel:n},null)]})]}),e(b,M)(e(F,Gt),{name:2,tab:()=>e(b,M)(e(F,Yt),{size:18},{default:()=>[e(b,M)(go,null,null)]})},{default:()=>[e(b,M)(Kt,null,null)]})]})}}),rn=e(b,we)({props:{renderLabel:Function},setup(t){const n=_(),s=e(Ke,an)(),o=ct(),u=e(b,nn)(()=>{const d=[];return Nr(n.elements,(i,f,m)=>(d.push({element:i,depth:m}),n.expandedKeyMap.get(i.uid)??!1)),d});let a=0;const{rootRef:l}=Qa(),r=e(b,ye)(null);return e(b,xe)(r,d=>{d&&setTimeout(()=>{yo(d,{scrollMode:"if-needed",behavior:"smooth",block:"center",inline:"nearest"})},250)},{immediate:!0}),()=>e(b,M)("div",{ref:l,onMouseleave:()=>{n.isDragging&&(n.isSink=!1,n.curElementId=null)}},[u.value.map(d=>{var w,v;const{element:i,depth:f}=d,m=ut(n,i),C=i.uid===n.curElementId&&!n.isDragging;return e(b,M)("div",{key:i.uid,class:["un-flex un-items-center un-cursor-pointer un-rounded-normal un-relative",C?"":"un-hover:bg-var(--hover-color)"],ref:E=>{C&&(r.value=E)},style:{paddingLeft:`${f*8}px`,background:(n.selectElementIds.size?n.selectElementIds.has(i.uid):C)?e(Ke,on)(s.value.primaryColor,.75):void 0},onMouseover:E=>{n.isDragging&&(n.isSink=!1,a=E.clientX)},onMousemove:E=>{var z,B;!n.isDragging||!n.curDragCode&&!wr(n,X(n,n.curDragId),i)||(n.isSink=n.curDragId!==i.uid&&(((z=o[m.metaCode])==null?void 0:z.droppable)===!1||!!i.children&&((B=o[i.metaCode])==null?void 0:B.droppable)!==!1&&a-E.clientX<-12),n.curElementId=i.uid,n.isSink?n.isBefore=!1:n.isBefore=E.offsetY<16)},onMousedown:E=>{if(i.metaCode==="slot"||n.editingId)return;const z=x=>{var L;x.preventDefault(),!(Math.pow(x.clientX-E.clientX,2)+Math.pow(x.clientY-E.clientY,2)<8*8||((L=document.getSelection())==null?void 0:L.type)==="Range")&&(n.curDragId=i.uid,n.curElementId=i.uid,n.dragPosition={x:x.clientX,y:x.clientY},n.isDragging=!0,window.removeEventListener("mousemove",z))},B=()=>{window.removeEventListener("mousemove",z),window.removeEventListener("mouseup",B)};window.addEventListener("mousemove",z),window.addEventListener("mouseup",B)}},[(w=i.children)!=null&&w.length?e(b,M)("div",{style:["transition: transform .15s var(--cubic-bezier-ease-in-out);",n.expandedKeyMap.get(i.uid)?"transform: rotate(90deg)":""],class:"un-w-16px un-h-16px un-justify-center un-flex un-items-center",onClick:()=>{n.expandedKeyMap.set(i.uid,!n.expandedKeyMap.get(i.uid))}},[e(b,M)(e(F,Xt),null,{default:()=>[e(b,M)(Xn,null,null)]})]):null,(v=t.renderLabel)==null?void 0:v.call(t,i),n.isDragging&&n.curElementId===i.uid?e(b,M)("div",{class:"un-absolute un-z-9 un-right-0px un-h-2px un-bg-primary un-pointer-events-none",style:`left: ${f*8+8+(n.isSink?0:-8)}px;${n.isBefore?"top: -1px;":"bottom: -1px;"}`},null):null])})])}}),sn=e(b,we)({props:{element:{type:Object,required:!0}},setup(t){const n=e(b,ye)(""),s=e(b,ye)(),o=_(),u=()=>{n.value=t.element.name||"",o.editingId=t.element.uid},a=l=>{l.key==="Enter"&&(o.editingId=null,n.value&&(t.element.name=n.value))};return e(b,xe)(s,l=>{l&&l.focus()}),e(b,xe)(()=>o.curElementId===t.element.uid,l=>{!l&&o.editingId&&(o.editingId=null,n.value&&(t.element.name=n.value))}),()=>{const l=t.element;return e(b,M)("div",{class:"un-ml-4px un-lh-32px un-flex-1",onDblclick:u,draggable:!1},[o.editingId===l.uid?e(b,M)(e(F,qt),{value:n.value,"onUpdate:value":r=>n.value=r,size:"small",onKeydown:a,ref:s},null):l.name??"\u672A\u7ED1\u5B9A\u7EC4\u4EF6"])}}});const S=await h("vue"),W=await h("naive-ui"),xo="NCollapseItem",bo="NCollapse",Eo="NScrollbar",ko="NTabPane",Co="NScrollbar",No="NTabPane",Io="NTabs",T="createVNode",Mo="isVNode",So="defineAsyncComponent",un="defineComponent",Bo="h",dn="ref",_o="watch",Lo="NButton";function Do(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!e(S,Mo)(t)}const Ro=e(S,So)(()=>Ve(()=>import("./Index-ab3cdcb6.js").then(async t=>(await t.__tla,t)),["./Index-ab3cdcb6.js","./federation-shared-a49272f9.js","./useState-9a390b3c.js","./constants-3149fad0.js","./Close-a51d54b5.js","./TextAlignRight16Filled-c135dfb8.js","./getItemById-2baeb860.js","./_virtual___federation_host-7d538dc0.js","./useDesginer-c36d80fe.js","./ExpressionInput-2eeb7388.js","./ExpressionInput-d0266da8.css","./Refresh-39621f05.js","./Index-da9e05ef.css"],import.meta.url)),zo=e(S,un)({setup(){const t=_();return()=>e(S,T)(e(W,Io),{defaultValue:1,tabsPadding:12,type:"line",themeOverrides:{tabGapMediumLine:"20px",panePaddingMedium:"0px"}},{default:()=>[e(S,T)(e(W,No),{tab:"\u7EC4\u4EF6",name:1},{default:()=>[e(S,T)(e(W,Co),{style:"height: calc(100vh - 87px);"},{default:()=>[e(S,T)(Vo,null,null)]})]}),e(S,T)(e(W,ko),{tab:"\u6837\u5F0F",name:2,displayDirective:"if"},{default:()=>[e(S,T)(e(W,Eo),{style:"height: calc(100vh - 87px);"},{default:()=>[e(S,T)(Ro,{key:t.curElementId},null),e(S,T)("div",{class:"un-p-12px un-b-t-1px un-b-t-solid un-border-var(--divider-color) un-grid un-grid-cols-2 un-gap-8px"},[e(S,T)(le,{label:"\u52A8\u6001\u6837\u5F0F",value:t.dynamicStyle,"onUpdate:value":n=>t.dynamicStyle=n},null),e(S,T)(le,{label:"\u52A8\u6001\u7C7B\u540D",value:t.dynamicClass,"onUpdate:value":n=>t.dynamicClass=n},null)])]})]})]})}}),Vo=e(S,un)({setup(){const t=_(),n=yr(),s=a=>e(S,Bo)(e(W,Lo),{key:a.code,size:"small",style:"font-size: 12px;",focusable:!1,onMousedown(l){const r=i=>{var f;Math.pow(i.clientX-l.clientX,2)+Math.pow(i.clientY-l.clientY,2)<64||((f=document.getSelection())==null?void 0:f.type)==="Range"||(t.isDragging=!0,t.curDragCode=a.code,t.dragPosition={x:i.clientX,y:i.clientY},window.removeEventListener("mousemove",r))},d=()=>{window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",d)};window.addEventListener("mousemove",r),window.addEventListener("mouseup",d)}},{default:()=>a.name}),o=e(S,dn)([]),u=e(S,dn)([]);return e(S,_o)(n,a=>{const l={},r=[];a.forEach(d=>{if(!d.hideInPanel)if(!d.group)r.push(d);else{const i=d.group;l[i]?l[i].push(d):l[i]=[d]}}),u.value=Object.keys(l),o.value=u.value.map(d=>({name:d,items:l[d]})),r.length&&(u.value.push("\u9ED8\u8BA4\u5206\u7EC4"),o.value.push({name:"\u9ED8\u8BA4\u5206\u7EC4",items:r}))},{immediate:!0}),()=>{let a;return e(S,T)(e(W,bo),{class:"un-my-16px",expandedNames:u.value,"onUpdate:expandedNames":l=>u.value=l},Do(a=o.value.map(({name:l,items:r})=>e(S,T)(e(W,xo),{title:l,name:l,key:l},{default:()=>[e(S,T)("div",{class:"un-grid un-grid-cols-3 un-gap-8px un-px-12px"},[r.map(d=>s(d))])]})))?a:{default:()=>[a]})}}}),te=await h("vue"),Je="createElementVNode",Oo="openBlock",To="createElementBlock",Po="defineComponent",Uo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},jo=e(te,Je)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M160 368L32 256l128-112"},null,-1),Ho=e(te,Je)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M352 368l128-112l-128-112"},null,-1),$o=e(te,Je)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M304 96l-96 320"},null,-1),Ao=[jo,Ho,$o],Fo=e(te,Po)({name:"CodeSlashOutline",render:function(t,n){return e(te,Oo)(),e(te,To)("svg",Uo,Ao)}}),be=await h("vue"),Wo="createElementVNode",Ko="openBlock",Jo="createElementBlock",qo="defineComponent",Xo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Yo=e(be,Wo)("path",{d:"M262.29 192.31a64 64 0 1 0 57.4 57.4a64.13 64.13 0 0 0-57.4-57.4zM416.39 256a154.34 154.34 0 0 1-1.53 20.79l45.21 35.46a10.81 10.81 0 0 1 2.45 13.75l-42.77 74a10.81 10.81 0 0 1-13.14 4.59l-44.9-18.08a16.11 16.11 0 0 0-15.17 1.75A164.48 164.48 0 0 1 325 400.8a15.94 15.94 0 0 0-8.82 12.14l-6.73 47.89a11.08 11.08 0 0 1-10.68 9.17h-85.54a11.11 11.11 0 0 1-10.69-8.87l-6.72-47.82a16.07 16.07 0 0 0-9-12.22a155.3 155.3 0 0 1-21.46-12.57a16 16 0 0 0-15.11-1.71l-44.89 18.07a10.81 10.81 0 0 1-13.14-4.58l-42.77-74a10.8 10.8 0 0 1 2.45-13.75l38.21-30a16.05 16.05 0 0 0 6-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 0 0-6.07-13.94l-38.19-30A10.81 10.81 0 0 1 49.48 186l42.77-74a10.81 10.81 0 0 1 13.14-4.59l44.9 18.08a16.11 16.11 0 0 0 15.17-1.75A164.48 164.48 0 0 1 187 111.2a15.94 15.94 0 0 0 8.82-12.14l6.73-47.89A11.08 11.08 0 0 1 213.23 42h85.54a11.11 11.11 0 0 1 10.69 8.87l6.72 47.82a16.07 16.07 0 0 0 9 12.22a155.3 155.3 0 0 1 21.46 12.57a16 16 0 0 0 15.11 1.71l44.89-18.07a10.81 10.81 0 0 1 13.14 4.58l42.77 74a10.8 10.8 0 0 1-2.45 13.75l-38.21 30a16.05 16.05 0 0 0-6.05 14.08c.33 4.14.55 8.3.55 12.47z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Go=[Yo],Zo=e(be,qo)({name:"SettingsOutline",render:function(t,n){return e(be,Ko)(),e(be,Jo)("svg",Xo,Go)}}),Qo=await h("@rdx/shared"),el="request";async function tl(t){return(await e(Qo,el)({url:"/api/lowcode/setting/update",method:"put",data:t})).data}const nl=await h("@rdx/admin"),al=await h("@rdx/shared"),ol=await h("vue-router"),ll="useRoute",rl="useRequestLogic",sl="preferMessage";function qe(){const t=_(),n=e(ol,ll)();return e(al,rl)(async()=>{window.onbeforeunload=null,await tl({id:n.query.id,pageSchema:Z(t),version:t.version})},{manual:!0,onSuccess(){t.version+=1,e(nl,sl).success("\u4FDD\u5B58\u6210\u529F")}})}const Ee=await h("@rdx/admin"),U=await h("@rdx/shared"),cn=await h("vue-router"),c=await h("vue"),g=await h("naive-ui"),il="NButton",ul="NButton",dl="NSpace",cl="NModal",pl="NButton",ml="NButton",fl="NSpace",hl="NModal",gl="NButton",vl="NButton",wl="NSpace",yl="NInput",xl="NFormItem",bl="NForm",El="NModal",kl="NButton",Cl="NButton",Nl="NButton",Il="NIcon",Ml="NButton",Sl="NTooltip",Bl="NDivider",_l="NIcon",Ll="NButton",Dl="NTooltip",Rl="NIcon",zl="NButton",Vl="NTooltip",Ol="NIcon",Tl="NButton",Pl="NTooltip",Ul="NDivider",jl="NIcon",Hl="NButton",$l="NTooltip",Al="isVNode",p="createVNode",pn="Fragment",P="createTextVNode",Xe="mergeProps",Fl="defineAsyncComponent",ke="defineComponent",se="ref",mn="useRoute",Ye="useBoolean",Ge="createModalProps",Wl="useSubmitLogic",Kl="request",fn="useModalLogic",Jl="convertListToMap",ql="preferMessage",Ze="presetStyleModal";function Xl(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!e(c,Al)(t)}const hn=e(c,Fl)(()=>Ve(()=>import("./CodeEditor-d53c09af.js").then(async t=>(await t.__tla,t)).then(t=>t.C),["./CodeEditor-d53c09af.js","./federation-shared-a49272f9.js","./CodeEditor-f1c3ba81.css"],import.meta.url).then(t=>t.CodeDiffEditor)),Yl=e(c,ke)({setup(){const t=_(),n=e(cn,mn)(),{run:s,loadingRef:o}=qe(),u=(w,v,E)=>e(c,p)(e(g,$l),null,{default:()=>[E],trigger:()=>e(c,p)(e(g,Hl),{type:t[v]?"primary":"default",ghost:!0,size:"small",onClick:()=>{t[v]=!t[v]},focusable:!1},{default:()=>[e(c,p)(e(g,jl),null,Xl(w)?w:{default:()=>[w]})]})}),a=()=>{window.open(`./#/preview?id=${n.query.id}`)},{booleanRef:l,setTrue:r}=e(U,Ye)(),{booleanRef:d,setTrue:i}=e(U,Ye)(),{booleanRef:f,setTrue:m}=e(U,Ye)(),C=()=>{t.expandedKeyMap.clear()};return()=>e(c,p)(e(c,pn),null,[e(c,p)("div",{class:"un-relative un-flex un-items-center un-justify-between un-bg-var(--card-color) un-w-full un-px-12px un-h-45px un-gap-12px un-b-b-1px un-b-b-solid un-border-var(--divider-color)"},[e(c,p)("div",{class:"un-flex un-items-center un-gap-8px"},[u(e(c,p)(bt,null,null),"showLayer","\u5927\u7EB2\u6811"),u(e(c,p)(Zo,null,null),"showSetting","\u914D\u7F6E"),e(c,p)(e(g,Ul),{vertical:!0},null),e(c,p)(e(g,Pl),null,{default:()=>[e(c,P)("\u6298\u53E0\u5927\u7EB2\u6811")],trigger:()=>e(c,p)(e(g,Tl),{ghost:!0,size:"small",onClick:C,focusable:!1},{default:()=>[e(c,p)(e(g,Ol),{component:ca},null)]})}),e(c,p)(e(g,Vl),null,{default:()=>[e(c,P)("\u5237\u65B0\u5185\u9875")],trigger:()=>e(c,p)(e(g,zl),{ghost:!0,size:"small",onClick:()=>{t.curElementId=null,t.rollbackStack.length=0,t.postMessage({type:"refresh"})},focusable:!1},{default:()=>[e(c,p)(e(g,Rl),{component:_r},null)]})}),e(c,p)(e(g,Dl),null,{default:()=>[e(c,P)("\u9875\u9762schema")],trigger:()=>e(c,p)(e(g,Ll),{ghost:!0,size:"small",onClick:i,focusable:!1},{default:()=>[e(c,p)(e(g,_l),{component:Fo},null)]})}),t.prodSchema?e(c,p)(e(c,pn),null,[e(c,p)(e(g,Bl),{vertical:!0},null),e(c,p)(e(g,Sl),null,{default:()=>[e(c,P)("\u5BF9\u6BD4\u7EBF\u4E0A")],trigger:()=>e(c,p)(e(g,Ml),{ghost:!0,size:"small",onClick:m,focusable:!1},{default:()=>[e(c,p)(e(g,Il),{component:aa},null)]})})]):null]),e(c,p)("div",{class:"un-absolute un-left-50% un-translate-x--50% un-text-18px un-font-bold"},[t.title]),e(c,p)("div",{class:"un-flex un-items-center un-gap-8px"},[e(c,p)(e(g,Nl),{size:"small",onClick:s,loading:o.value},{default:()=>[e(c,P)("\u4FDD\u5B58")]}),e(c,p)(e(g,Cl),{size:"small",onClick:a},{default:()=>[e(c,P)("\u9884\u89C8")]}),e(c,p)(e(g,kl),{size:"small",onClick:r},{default:()=>[e(c,P)("\u53D1\u5E03")]})])]),e(c,p)(Gl,{show:l.value,"onUpdate:show":w=>l.value=w},null),e(c,p)(Zl,{show:d.value,"onUpdate:show":w=>d.value=w},null),e(c,p)(Ql,{show:f.value,"onUpdate:show":w=>f.value=w},null)])}}),Gl=e(c,ke)({props:{...e(U,Ge)()},setup(t){const n=e(c,se)(),s={remark:{required:!0,message:"\u8BF7\u8F93\u5165\u53D1\u5E03\u5907\u6CE8",trigger:["input"]}},o=e(cn,mn)(),u=_(),{loadingRef:a,submit:{modelRef:l,handleSubmit:r}}=e(U,Wl)(async d=>{await e(U,Kl)({url:"/api/lowcode/setting/release",method:"post",data:{id:o.query.id,remark:d.remark,pageSchema:Z(u),version:u.version}})},{model:()=>({remark:null}),validate:()=>{var d;(d=n.value)==null||d.validate()},manual:!0,onSuccess(){var d;u.version+=1,e(Ee,ql).success("\u53D1\u5E03\u6210\u529F"),(d=t["onUpdate:show"])==null||d.call(t,!1)}});return()=>e(c,p)(e(g,El),e(c,Xe)({preset:"card",showIcon:!1,maskClosable:!1,title:"\u53D1\u5E03\u9875\u9762",show:t.show,"onUpdate:show":t["onUpdate:show"],style:{width:"600px"},size:"small",autoFocus:!1},e(Ee,Ze)),{default:()=>[e(c,p)(e(g,bl),{class:"un-mx-12px un-mt-12px",labelPlacement:"left",ref:n,model:l.value,rules:s},{default:()=>[e(c,p)(e(g,xl),{path:"remark"},{default:()=>[e(c,p)(e(g,yl),{type:"textarea",placeholder:"\u53D1\u5E03\u5907\u6CE8",value:l.value.remark,"onUpdate:value":d=>l.value.remark=d},null)]})]})],footer:()=>e(c,p)(e(g,wl),{justify:"end"},{default:()=>[e(c,p)(e(g,vl),{onClick:()=>{var d;return(d=t["onUpdate:show"])==null?void 0:d.call(t,!1)}},{default:()=>[e(c,P)("\u53D6\u6D88")]}),e(c,p)(e(g,gl),{type:"primary",onClick:r,loading:a.value},{default:()=>[e(c,P)("\u786E\u5B9A")]})]})})}}),Zl=e(c,ke)({props:{...e(U,Ge)()},setup(t){const n=e(c,se)(""),s=e(c,se)(""),o=_();e(U,fn)({props:t,onShow:()=>{if(o.selectElementIds.size||o.curElementId){o.selectElementIds.size||o.selectElementIds.add(o.curElementId);const a=JSON.stringify(Array.from(o.selectElementIds).map(l=>X(o,l)),null,2);s.value=a,n.value=a}else{const a=o.originSchema?JSON.parse(o.originSchema):{};s.value=Z(a,!0),n.value=Z(o,!0)}}});const u=()=>{var a;if(o.selectElementIds.size){const l=JSON.parse(n.value),r=e(U,Jl)(l,"uid");o.selectElementIds.forEach(d=>{const i=X(o,d),f=JSON.stringify(i);Oe(o,()=>{const m=JSON.parse(f);o.postMessage({type:"updateElement",data:m}),Object.assign(i,m)}),o.postMessage({type:"updateElement",data:r[d]}),Object.assign(i,r[d])})}else pt(o,n.value);(a=t["onUpdate:show"])==null||a.call(t,!1)};return()=>e(c,p)(e(g,hl),e(c,Xe)({preset:"card",showIcon:!1,maskClosable:!1,title:"\u9875\u9762schema",show:t.show,"onUpdate:show":t["onUpdate:show"],style:{width:"calc(100vw - 120px)"},size:"small",autoFocus:!1},e(Ee,Ze)),{default:()=>[e(c,p)("div",{class:"un-p-12px",style:"height: calc(100vh - 160px);"},[e(c,p)(hn,{original:s.value,modified:n.value,"onUpdate:modified":a=>n.value=a,language:"json"},null)])],footer:()=>e(c,p)(e(g,fl),{justify:"end"},{default:()=>[e(c,p)(e(g,ml),{onClick:()=>{var a;return(a=t["onUpdate:show"])==null?void 0:a.call(t,!1)}},{default:()=>[e(c,P)("\u53D6\u6D88")]}),e(c,p)(e(g,pl),{type:"primary",onClick:u},{default:()=>[e(c,P)("\u786E\u5B9A")]})]})})}}),Ql=e(c,ke)({props:{...e(U,Ge)()},setup(t){const n=e(c,se)(""),s=e(c,se)(""),o=_();e(U,fn)({props:t,onShow:()=>{const a=o.prodSchema?JSON.parse(o.prodSchema):{};s.value=Z(a,!0),n.value=Z(o,!0)}});const u=()=>{var a;pt(o,n.value),(a=t["onUpdate:show"])==null||a.call(t,!1)};return()=>e(c,p)(e(g,cl),e(c,Xe)({preset:"card",showIcon:!1,maskClosable:!1,title:"\u5BF9\u6BD4\u7EBF\u4E0A",show:t.show,"onUpdate:show":t["onUpdate:show"],style:{width:"calc(100vw - 120px)"},size:"small",autoFocus:!1},e(Ee,Ze)),{default:()=>[e(c,p)("div",{class:"un-p-12px",style:"height: calc(100vh - 160px);"},[e(c,p)(hn,{original:s.value,modified:n.value,"onUpdate:modified":a=>n.value=a,language:"json"},null)])],footer:()=>e(c,p)(e(g,dl),{justify:"end"},{default:()=>[e(c,p)(e(g,ul),{onClick:()=>{var a;return(a=t["onUpdate:show"])==null?void 0:a.call(t,!1)}},{default:()=>[e(c,P)("\u53D6\u6D88")]}),e(c,p)(e(g,il),{type:"primary",onClick:u},{default:()=>[e(c,P)("\u786E\u5B9A")]})]})})}});function gn(){const t=_(),n=ct(),{createElement:s,appendChild:o,insertBefore:u,insertAfter:a}=mt();return()=>{var r,d,i,f,m,C,w,v,E,z;const l=R(t);if(l&&l.uid!==t.curDragId)if(t.curDragId){const B=X(t,t.curDragId);!((r=t.dragPosition)!=null&&r.isInner)&&!t.isSink||t.curElementId&&(!l.children||l.children.filter(x=>x.metaCode!=="slot").length||((d=n[l.metaCode])==null?void 0:d.droppable)===!1)&&((f=n[(i=ut(t,l))==null?void 0:i.metaCode])==null?void 0:f.droppable)!==!1?t.isBefore?u(B,l):a(B,l):t.isBefore&&((m=l.children)!=null&&m.length)?u(B,l.children[0]):o(B,l),t.curElementId=t.curDragId}else{const B=t.curDragCode,x=s(B);!((C=t.dragPosition)!=null&&C.isInner)&&!t.isSink||t.curElementId&&(!l.children||l.children.filter(L=>L.metaCode!=="slot").length||((w=n[l.metaCode])==null?void 0:w.droppable)===!1)&&((E=n[(v=ut(t,l))==null?void 0:v.metaCode])==null?void 0:E.droppable)!==!1?t.isBefore?u(x,l):a(x,l):t.isBefore&&((z=l.children)!=null&&z.length)?u(x,l.children[0]):o(x,l),t.curElementId=x.uid,t.boundingRect=null}t.curDragCode=null,t.curDragId=null,t.isDragging=!1,t.dragPosition=null,t.isSink=!1}}const ne=await h("vue"),Qe="watch",er="watchEffect",tr="onBeforeMount",nr="onUnmounted";function ar(){const t=_(),{removeChild:n}=mt(),s=jn(),o=Ir(),{run:u}=qe();e(ne,Qe)(()=>t.ctrlKey,i=>{i&&t.curElementId&&dt(t,R(t))}),e(ne,Qe)(()=>t.curElementId,()=>{t.selectElementIds.clear()}),e(ne,Qe)(()=>[t.curElementId,t.isDragging],([i,f])=>{if(!i||f)return;const m=[],C=w=>{for(let v=0;v<w.length;v+=1){const E=w[v];if(E.uid===i||(m.push(E.uid),C(E.children??[])))return!0;m.pop()}};C(t.elements),m.forEach(w=>t.expandedKeyMap.set(w,!0))}),e(ne,er)(()=>{const i=t.boundingRect,f=t.dragPosition;!i||!f||!f.isInner||(t.isBefore=f&&i.some(m=>f.y>=m.top&&f.y<=m.top+m.height&&f.y<m.top+m.height/2))});const a=()=>{if(t.selectElementIds.size)t.selectElementIds.forEach(i=>{n(X(t,i))});else{const i=R(t);if(!i||i.metaCode==="slot")return;n(i)}},l=i=>{var m;if(t.pauseKeyEvent||["input","textarea"].includes((m=document.activeElement)==null?void 0:m.tagName.toLowerCase()))return;const{ctrlKey:f}=i;f&&(t.ctrlKey=!0),f?i.key==="z"?(i.preventDefault(),Tn(t)):i.key==="a"?(i.preventDefault(),t.elements.forEach(C=>dt(t,C))):i.key==="s"&&(i.preventDefault(),u()):i.key===" "?(i.preventDefault(),t.curElementId=null,t.selectElementIds.clear()):i.key==="Delete"&&a()},r=i=>{const{ctrlKey:f}=i;f||(t.ctrlKey=!1)},d=i=>{var f,m;t.pauseKeyEvent||["input","textarea"].includes((f=document.activeElement)==null?void 0:f.tagName.toLowerCase())||s((m=i.clipboardData)==null?void 0:m.getData("text/plain"))};e(ne,tr)(()=>{document.addEventListener("keydown",l),document.addEventListener("keyup",r),document.addEventListener("copy",o),document.addEventListener("paste",d)}),e(ne,nr)(()=>{document.removeEventListener("keydown",l),document.removeEventListener("keyup",r),document.removeEventListener("copy",o),document.removeEventListener("paste",d)})}const ie=await h("vue"),or="nextTick",lr="onBeforeMount",rr="onUnmounted",sr="watch",ir="toRaw";function ur(t){const{removeChild:n}=mt(),{run:s}=qe(),o=gn(),u=jn(),a={ready(){Mr(t)},changeState({data:r}){t[r.key]=r.value},initChildren({data:r}){const d=X(t,Number(r));d.children=[]},selectElement({data:r}){t.curElementId=r},dragstart({data:r}){t.curDragId=r,t.curElementId=r,t.isDragging=!0},dropElement(){o()},removeChild({data:r}){n(X(t,r))},popRollback(){Tn(t)},spaceKey(){t.curElementId=null,t.selectElementIds.clear()},savePage(){s()},setBindingRect({data:r}){t.boundingRect=r},pasteElement({data:r}){u(r)}},l=r=>{var i,f;const d=[];(f=(i=r.data).forEach)==null||f.call(i,m=>a[m.type]({data:m.data,rollbacks:d})),d.length&&(e(ie,or)(()=>{Oe(t,()=>d.forEach(m=>m()))}),t.postMessage({type:"pushRollback"}))};e(ie,lr)(()=>{window.addEventListener("message",l)}),e(ie,rr)(()=>{window.removeEventListener("message",l)}),["dynamicClass","dynamicStyle","curElementId","curDragCode","curDragId","isDragging","globalStyle","ctrlKey","style"].forEach(r=>{e(ie,sr)(()=>t[r],d=>{var i;(i=t.postMessage)==null||i.call(t,{type:"changeState",data:{key:r,value:e(ie,ir)(d)}})},{deep:!0})})}let vn,et,y,wn,O,tt,yn,ue,xn,bn,En,kn,nt,Cn,Nn,In,Mn,Sn,Bn,_n,Ln,at;vn=await h("vue-router"),et=await h("@rdx/shared"),y=await h("vue"),wn="Fragment",O="createVNode",tt="defineComponent",yn="reactive",ue="provide",xn="shallowReactive",bn="shallowRef",En="computed",kn="markRaw",nt="nextTick",Cn="watch",Nn="ref",In="onBeforeMount",Mn="onBeforeUnmount",Sn="convertListToMap",Bn="useRequestLogic",_n="useRoute",Ln=e(y,tt)({setup(){const t=e(y,yn)(xr(!0));e(y,ue)(fr,t);const n=e(y,xn)({});e(y,ue)(hr,n);const s=e(y,bn)([]);e(y,ue)(gr,s),e(y,ue)(vr,e(y,En)(()=>e(et,Sn)(s.value,"code")));const o=e(vn,_n)();return e(et,Bn)(async()=>(await cr({id:o.query.id})).content,{ready:()=>o.query.id,onSuccess(u){const a=u.pageSchema;t.title=u.name,t.prodSchema=u.prodSchema,t.originSchema=a||Z(t),t.libs=e(y,kn)(u.libs),t.version=u.version,pt(t,a),e(y,nt)(()=>{window.onbeforeunload=null}),Promise.all(t.libs.map(async l=>(Er?Pn(l.name,{external:l.url,format:"esm"}):Pn(l.name,{external:l.url.replace(".js","-legacy.js"),format:"systemjs"}),await Promise.all([Un(l.name,"./componentMap").then(async r=>(await r.__tla,r.default)),Un(l.name,"./components").then(async r=>(await r.__tla,r.default))])))).then(l=>{l.forEach(([r,d])=>{Object.assign(n,r),s.value=s.value.concat(d)})}),document.title=`\u9875\u9762\u8BBE\u8BA1 - ${t.title}`}}),e(y,Cn)(()=>t.elements,()=>{window.onbeforeunload=()=>!0},{deep:!0}),()=>e(y,O)(e(y,wn),null,[e(y,O)(Yl,null,null),e(y,O)("div",{class:"un-flex"},[t.showLayer?e(y,O)(ln,{class:"un-b-r-1px un-b-r-solid un-border-var(--divider-color) un-select-none"},null):null,e(y,O)(at,{class:"un-flex-1"},null),t.showSetting?e(y,O)("div",{class:"un-w-280px un-bg-var(--card-color) un-b-l-1px un-b-l-solid un-border-var(--divider-color)"},[t.curElementId&&!t.isDragging?e(y,O)(ja,null,null):e(y,O)(zo,null,null)]):null])])}}),at=e(y,tt)({setup(){const t=_(),n=e(y,Nn)(),s=[];ar();const o=gn();t.postMessage=l=>{s.push(l),e(y,nt)(()=>{var r,d;s.length&&((d=(r=n.value)==null?void 0:r.contentWindow)==null||d.postMessage(s),s.length=0)})},ur(t);const u=l=>{var r;t.isDragging&&(l.preventDefault(),(r=t.dragPosition)!=null&&r.isInner&&(t.curElementId=null),t.dragPosition={x:l.clientX,y:l.clientY})},a=()=>{t.isDragging&&o()};return e(y,In)(()=>{document.addEventListener("mousemove",u),document.addEventListener("mouseup",a)}),e(y,Mn)(()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",a)}),()=>e(y,O)("div",{class:"un-relative"},[e(y,O)("div",{class:"un-relative un-overflow-hidden"},[e(y,O)("iframe",{ref:n,src:"./#/inner",class:"un-block un-border-none un-w-full",style:"height: calc(100vh - 45px);"},null),e(y,O)(fa,null,null)]),e(y,O)(va,null,null)])}}),Hn=Object.freeze(Object.defineProperty({__proto__:null,Content:at,default:Ln},Symbol.toStringTag,{value:"Module"}))});export{ft as E,Hn as I,Dr as __tla};
