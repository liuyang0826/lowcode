import{b as e,a as h,_ as Ve,__tla as ir}from"./federation-shared-a49272f9.js";import{g as ur,__tla as dr}from"./getItemById-5a51d26e.js";import{E as cr,S as pr,C as mr,e as fr,d as hr}from"./constants-3149fad0.js";import{u as B,c as q,g as z,f as Oe,j as ut,h as gr,a as dt,k as vr,p as Tn,r as wr,__tla as yr}from"./useState-9a390b3c.js";import{s as xr,a as Pn,g as Un,__tla as br}from"./_virtual___federation_host-7d538dc0.js";import{e as Er,c as ct,f as kr,s as Z,o as pt,u as mt,g as jn,d as Cr,h as Nr,__tla as Sr}from"./useDesginer-c36d80fe.js";import{E as le,__tla as Ir}from"./ExpressionInput-2eeb7388.js";import{R as Mr,__tla as _r}from"./Refresh-39621f05.js";import{d as Lr}from"./debounce-0459d24a.js";let ft,Hn,Br=Promise.all([(()=>{try{return ir}catch{}})(),(()=>{try{return dr}catch{}})(),(()=>{try{return yr}catch{}})(),(()=>{try{return br}catch{}})(),(()=>{try{return Sr}catch{}})(),(()=>{try{return Ir}catch{}})(),(()=>{try{return _r}catch{}})()]).then(async()=>{const me=await h("vue"),An="createElementVNode",$n="openBlock",Fn="createElementBlock",Wn="defineComponent",Kn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Jn=e(me,An)("path",{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z",fill:"currentColor"},null,-1),Xn=[Jn],qn=e(me,Wn)({name:"CaretRightFilled",render:function(t,n){return e(me,$n)(),e(me,Fn)("svg",Kn,Xn)}}),fe=await h("vue"),Yn="createElementVNode",Gn="openBlock",Zn="createElementBlock",Qn="defineComponent",ea={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},ta=e(fe,Yn)("path",{d:"M476 399.1c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1V484h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H420v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V540h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H476v-84.9zM560.5 704h-225c-4.1 0-7.5 3.2-7.5 7v42c0 3.8 3.4 7 7.5 7h225c4.1 0 7.5-3.2 7.5-7v-42c0-3.8-3.4-7-7.5-7zm-7.1-502.6c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v704c0 17.7 14.3 32 32 32h512c17.7 0 32-14.3 32-32V397.3c0-8.5-3.4-16.6-9.4-22.6L553.4 201.4zM664 888H232V264h282.2L664 413.8V888zm190.2-581.4L611.3 72.9c-6-5.7-13.9-8.9-22.2-8.9H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h277l219 210.6V824c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V329.6c0-8.7-3.5-17-9.8-23z",fill:"currentColor"},null,-1),na=[ta],aa=e(fe,Qn)({name:"DiffOutlined",render:function(t,n){return e(fe,Gn)(),e(fe,Zn)("svg",ea,na)}}),he=await h("vue"),oa="createElementVNode",la="openBlock",ra="createElementBlock",sa="defineComponent",ia={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},ua=e(he,oa)("path",{d:"M484 443.1V528h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H484v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V584h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H540v-84.9c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1zm396-144.7H521L403.7 186.2a8.15 8.15 0 0 0-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z",fill:"currentColor"},null,-1),da=[ua],ca=e(he,sa)({name:"FolderAddOutlined",render:function(t,n){return e(he,la)(),e(he,ra)("svg",ia,da)}}),ht=await h("vue"),pa="createVNode",ma="defineComponent",fa=e(ht,ma)({setup(){const t=B();return()=>{const n=t.boundingRect,s=t.dragPosition;return n?n.map((o,i)=>e(ht,pa)("div",{key:i,style:{left:`${o.left}px`,top:`${o.top}px`,width:`${o.width}px`,height:`${o.height}px`,borderTop:s&&t.isBefore?"2px solid var(--primary-color)":void 0,borderBottom:s&&!t.isBefore?"2px solid var(--primary-color)":void 0},class:"un-absolute un-b-1px un-b-dashed un-border-var(--primary-color) un-pointer-events-none"},null)):null}}}),gt=await h("vue"),ha="createVNode",ga="defineComponent",va=e(gt,ga)({setup(){const t=B(),n=Er();return()=>{var o,i;const s=t.dragPosition;return t.isDragging&&s?e(gt,ha)("div",{class:["un-text-12px un-b-1px un-b-solid un-border-var(--primary-color) un-pointer-events-none un-whitespace-nowrap un-h-28px un-flex un-items-center un-justify-center un-rounded-normal un-bg-var(--card-color) un-opacity-75 un-z-9",t.curDragId?"un-px-16px":"un-w-80px "],style:{position:s.isInner?"absolute":"fixed",left:`${s.x+8}px`,top:`${s.y+8}px`}},[t.curDragId?(o=q(t,t.curDragId))==null?void 0:o.name:(i=n.value[t.curDragCode])==null?void 0:i.name]):null}}}),wa=await h("@rdx/shared"),ya=await h("vue"),xa="computed",ba="resolveUnref";function Ea(t){const n=ct();return e(ya,xa)(()=>{var s,o;return(o=n[(s=e(wa,ba)(t))==null?void 0:s.metaCode])==null?void 0:o.configuration})}const ka=await h("vue"),Ca="watch";function Na(){const t=B(),n=["dynamicClass","dynamicStyle","isRender","isShow"];let s=!1;n.forEach(o=>{e(ka,Ca)(()=>z(t)[o],(i,a)=>{const l=z(t);t.postMessage({type:"updateElement",data:{uid:l.uid,[o]:i}}),s?s=!1:(Oe(t,()=>{s=!0,l[o]=a,t.postMessage({type:"updateElement",data:{uid:l.uid,[o]:a}})}),t.postMessage({type:"pushRollback"}))})})}const Te=await h("vue"),Sa="ref",vt="watch";function Ia(){const t=B(),n=e(Te,Sa)(JSON.parse(JSON.stringify(z(t).meta??{})));let s=!1;return e(Te,vt)(()=>z(t).meta??{},o=>{s=!0,n.value=JSON.parse(JSON.stringify(o))}),e(Te,vt)(n,o=>{if(s)return s=!1;const i=z(t),a=JSON.parse(JSON.stringify(o)),l=JSON.stringify(i.meta);Oe(t,()=>{i.meta=JSON.parse(l),n.value=JSON.parse(l),t.postMessage({type:"updateElement",data:{uid:i.uid,meta:JSON.parse(l)}})}),t.postMessage({type:"pushRollback"}),i.meta=a,t.postMessage({type:"updateElement",data:{uid:i.uid,meta:a}})},{deep:!0}),n}const S=await h("vue"),Y=await h("naive-ui"),Ma="NEmpty",_a="NScrollbar",La="NTabPane",Ba="NScrollbar",Da="NTabPane",Ra="NTabs",za="NForm",V="createVNode",Va="Fragment",Oa="defineAsyncComponent",wt="defineComponent",Ta="provide",Pa="h",Ua=e(S,Oa)(()=>Ve(()=>import("./Index-c59e67af.js").then(async t=>(await t.__tla,t)),["./Index-c59e67af.js","./federation-shared-a49272f9.js","./useState-9a390b3c.js","./constants-3149fad0.js","./Close-a51d54b5.js","./TextAlignRight16Filled-c135dfb8.js","./getItemById-5a51d26e.js","./_virtual___federation_host-7d538dc0.js","./useDesginer-c36d80fe.js","./ExpressionInput-2eeb7388.js","./ExpressionInput-d0266da8.css","./Refresh-39621f05.js","./debounce-0459d24a.js","./Index-da9e05ef.css"],import.meta.url)),ja=e(S,wt)({setup(){const t=B();return e(S,Ta)(cr,new Proxy({},{get:(n,s)=>{var o;return(o=z(t))==null?void 0:o[s]}})),Na(),()=>e(S,V)(e(Y,za),{size:"small"},{default:()=>[e(S,V)(e(Y,Ra),{defaultValue:1,tabsPadding:12,type:"line",themeOverrides:{tabGapMediumLine:"20px",panePaddingMedium:"0px"}},{default:()=>[e(S,V)(e(Y,Da),{tab:"\u914D\u7F6E",name:1},{default:()=>[e(S,V)(e(Y,Ba),{style:"height: calc(100vh - 87px);"},{default:()=>[e(S,V)(Ha,{key:t.curElementId},null)]})]}),e(S,V)(e(Y,La),{tab:"\u6837\u5F0F",name:2,displayDirective:"if"},{default:()=>[e(S,V)(e(Y,_a),{style:"height: calc(100vh - 87px);"},{default:()=>[e(S,V)(Ua,{key:t.curElementId},null),e(S,V)("div",{class:"un-p-12px un-b-t-1px un-b-t-solid un-border-var(--divider-color) un-grid un-grid-cols-2 un-gap-8px"},[e(S,V)(le,{label:"\u52A8\u6001\u6837\u5F0F",value:z(t).dynamicStyle,"onUpdate:value":n=>z(t).dynamicStyle=n,key:t.curElementId},null),e(S,V)(le,{label:"\u52A8\u6001\u7C7B\u540D",value:z(t).dynamicClass,"onUpdate:value":n=>z(t).dynamicClass=n,key:t.curElementId},null)])]})]})]})]})}}),Ha=e(S,wt)({setup(){const t=B(),n=Ea(()=>z(t)),s=Ia();return()=>e(S,V)(e(S,Va),null,[n.value?e(S,Pa)(n.value,{meta:s.value}):e(S,V)(e(Y,Ma),{description:"\u65E0\u914D\u7F6E\u9879",class:"un-my-32px"},null),e(S,V)("div",{class:"un-p-12px un-b-t-1px un-b-t-solid un-border-var(--divider-color) un-grid un-grid-cols-2 un-gap-x-8px"},[e(S,V)(le,{label:"\u662F\u5426\u6E32\u67D3",value:z(t).isRender,"onUpdate:value":o=>z(t).isRender=o},null),e(S,V)(le,{label:"\u662F\u5426\u53EF\u89C1",value:z(t).isShow,"onUpdate:value":o=>z(t).isShow=o},null)])])}});function A(t){return Number(t.replace(/[^0-9.-]/g,""))}function yt(t,n,s){let o=n.width,i=n.height,a=s.width,l=s.height;const r=getComputedStyle(t);if(r.getPropertyValue("box-sizing")==="content-box"){const u=A(r.paddingTop)+A(r.paddingBottom)+A(r.borderTopWidth)+A(r.borderBottomWidth),c=A(r.paddingLeft)+A(r.paddingRight)+A(r.borderRightWidth)+A(r.borderLeftWidth);o-=c,a-=c,i-=u,l-=u}return[o,a,i,l]}function Aa(t,n,s){const[o,,i]=yt(t,n,s);let a=t.parentElement;for(;a&&(getComputedStyle(a).position==="static"||a instanceof HTMLBodyElement);)a=a.parentElement;a||(a=document.body);const l=getComputedStyle(a),r=a.getBoundingClientRect(),u=Math.round(n.top-r.top)-A(l.borderTopWidth),c=Math.round(n.left-r.left)-A(l.borderLeftWidth);return[u,c,o,i]}function $a(t,n){const s=new Map(t.map(r=>[r,!0])),o=new Map(n.map(r=>[r,!0])),i=new Set,a=[];t.forEach(r=>{o.has(r)?i.add(r):a.push(r)});const l=[];return n.forEach(r=>{s.has(r)?i.add(r):l.push(r)}),{addElements:l,removeElements:a,updateElements:Array.from(i)}}function Fa(t){const n=getComputedStyle(t).getPropertyValue("transform");if(n==="none")return;const s=n.match(/^(matrix3d)\((.+)\)$/)||n.match(/^(matrix)\((.+)\)$/);if(s)return{type:s[1],origin:n,values:s[2].split(",").map(Number)}}function Wa(t,n){return new KeyframeEffect(t,[{transform:"scale(.98)",opacity:0},{transform:"scale(0.98)",opacity:0,offset:.5},{transform:"scale(1)",opacity:1}],{duration:n*1.5,easing:"ease-in"})}function Ka(t,n){return new KeyframeEffect(t,[{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0}],{duration:n,easing:"ease-out"})}function Ja(t,n,s,o){const i=t.getBoundingClientRect(),a=n.left-i.left,l=n.top-i.top,[r,u,c,p]=yt(t,n,i);if(a||l){const f=Fa(t);let w,y;return f?(f.type==="matrix3d"?(f.values[12]+=a,f.values[13]+=l):(f.values[4]+=a,f.values[5]+=l),w={transform:`${f.type}(${f.values.join(",")})`},y={transform:f.origin}):(w={transform:`translate(${a}px, ${l}px)`},y={transform:"translate(0, 0)"}),r!==u&&(w.width=`${r}px`,y.width=`${u}px`),c!==p&&(w.height=`${c}px`,y.height=`${p}px`),new KeyframeEffect(t,[w,y],{duration:s,easing:o})}}const Xa=250,qa="ease-in-out";function Ya(t,n){const s=t.appendChild;t.appendChild=a=>(n(),s.call(t,a));const o=t.insertBefore;t.insertBefore=(a,l)=>(n(),o.call(t,a,l));const i=t.removeChild;t.removeChild=a=>(n(),i.call(t,a))}function Ga(t,n){const{duration:s=Xa,easing:o=qa,add:i=g=>Wa(g,s),remove:a=g=>Ka(g,s),update:l=(g,k)=>Ja(g,k,s,o)}=n||{};let r=!1,u=!1,c,p=!1;const f=()=>{if(r||u||p)return;r=!0;const g=Array.from(t.children);c=new Map(g.map(k=>[k,k.getBoundingClientRect()])),requestAnimationFrame(()=>{r=!1,u=!0;const{addElements:k,updateElements:_,removeElements:L}=$a(g,Array.from(t.children));k.forEach(b=>{const D=i(b);D&&new Animation(D).play()}),_.forEach(b=>{const D=l(b,c.get(b));D&&new Animation(D).play()}),L.forEach(b=>{t.appendChild(b);const D=c.get(b),K=a(b,D);if(!K)return;const[ae,de,ce,oe]=Aa(b,D,b.getBoundingClientRect());Object.assign(b.style,{position:"absolute",top:`${ae}px`,left:`${de}px`,width:`${ce}px`,height:`${oe}px`,margin:0,pointerEvents:"none",transformOrigin:"center",zIndex:100});const pe=new Animation(K);pe.addEventListener("finish",()=>{b.remove()}),pe.play()}),u=!1})},w=()=>{p=!0},y=()=>{p=!1};return Ya(t,f),{willChange:f,pauseAnimate:w,continueAnimate:y}}const Pe=await h("vue"),xt="ref",Za="watch";function Qa(t){const n=e(Pe,xt)(null),s=e(Pe,xt)(null);return e(Pe,Za)(n,o=>{o&&(s.value=Ga(o,t))},{immediate:!0}),{rootRef:n,animatorRef:s}}const Q=await h("vue"),Ue="createElementVNode",eo="openBlock",to="createElementBlock",no="defineComponent",ao={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},oo=e(Q,Ue)("path",{d:"M480 150L256 48L32 150l224 104l224-104z",fill:"currentColor"},null,-1),lo=e(Q,Ue)("path",{d:"M255.71 392.95l-144.81-66.2L32 362l224 102l224-102l-78.69-35.3l-145.6 66.25z",fill:"currentColor"},null,-1),ro=e(Q,Ue)("path",{d:"M480 256l-75.53-33.53L256.1 290.6l-148.77-68.17L32 256l224 102l224-102z",fill:"currentColor"},null,-1),so=[oo,lo,ro],bt=e(Q,no)({name:"LayersSharp",render:function(t,n){return e(Q,eo)(),e(Q,to)("svg",ao,so)}}),ge=await h("vue"),io="createElementVNode",uo="openBlock",co="createElementBlock",po="defineComponent",mo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},fo=e(ge,io)("path",{d:"M64 32l35 403.22L255.77 480L413 435.15L448 32zm290.68 334.9L256.07 395l-98.46-28.24l-6.75-77.76h48.26l3.43 39.56l53.59 15.16l.13.28l53.47-14.85l5.64-64.15H203l-4-50h120.65l4.35-51H140l-4-49h240.58z",fill:"currentColor"},null,-1),ho=[fo],go=e(ge,po)({name:"LogoCss3",render:function(t,n){return e(ge,uo)(),e(ge,co)("svg",mo,ho)}}),Et=t=>typeof t=="object"&&t!=null&&t.nodeType===1,kt=(t,n)=>(!n||t!=="hidden")&&t!=="visible"&&t!=="clip",je=(t,n)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const s=getComputedStyle(t,null);return kt(s.overflowY,n)||kt(s.overflowX,n)||(o=>{const i=(a=>{if(!a.ownerDocument||!a.ownerDocument.defaultView)return null;try{return a.ownerDocument.defaultView.frameElement}catch{return null}})(o);return!!i&&(i.clientHeight<o.scrollHeight||i.clientWidth<o.scrollWidth)})(t)}return!1},ve=(t,n,s,o,i,a,l,r)=>a<t&&l>n||a>t&&l<n?0:a<=t&&r<=s||l>=n&&r>=s?a-t-o:l>n&&r<s||a<t&&r>s?l-n+i:0,vo=t=>t.parentElement??(t.getRootNode().host||null),Ct=(t,n)=>{var s,o,i,a;if(typeof document>"u")return[];const{scrollMode:l,block:r,inline:u,boundary:c,skipOverflowHiddenElements:p}=n,f=typeof c=="function"?c:G=>G!==c;if(!Et(t))throw new TypeError("Invalid target");const w=document.scrollingElement||document.documentElement,y=[];let g=t;for(;Et(g)&&f(g);){if(g=vo(g),g===w){y.push(g);break}g!=null&&g===document.body&&je(g)&&!je(document.documentElement)||g!=null&&je(g,p)&&y.push(g)}const k=(o=(s=window.visualViewport)==null?void 0:s.width)!=null?o:innerWidth,_=(a=(i=window.visualViewport)==null?void 0:i.height)!=null?a:innerHeight,{scrollX:L,scrollY:b}=window,{height:D,width:K,top:ae,right:de,bottom:ce,left:oe}=t.getBoundingClientRect(),{top:pe,right:Dn,bottom:Rn,left:zn}=(G=>{const N=window.getComputedStyle(G);return{top:parseFloat(N.scrollMarginTop)||0,right:parseFloat(N.scrollMarginRight)||0,bottom:parseFloat(N.scrollMarginBottom)||0,left:parseFloat(N.scrollMarginLeft)||0}})(t);let j=r==="start"||r==="nearest"?ae-pe:r==="end"?ce+Rn:ae+D/2-pe+Rn,H=u==="center"?oe+K/2-zn+Dn:u==="end"?de+Dn:oe-zn;const ot=[];for(let G=0;G<y.length;G++){const N=y[G],{height:Ce,width:Ne,top:Se,right:lt,bottom:rt,left:Ie}=N.getBoundingClientRect();if(l==="if-needed"&&ae>=0&&oe>=0&&ce<=_&&de<=k&&ae>=Se&&ce<=rt&&oe>=Ie&&de<=lt)return ot;const Me=getComputedStyle(N),_e=parseInt(Me.borderLeftWidth,10),Le=parseInt(Me.borderTopWidth,10),Be=parseInt(Me.borderRightWidth,10),De=parseInt(Me.borderBottomWidth,10);let J=0,X=0;const Re="offsetWidth"in N?N.offsetWidth-N.clientWidth-_e-Be:0,ze="offsetHeight"in N?N.offsetHeight-N.clientHeight-Le-De:0,st="offsetWidth"in N?N.offsetWidth===0?0:Ne/N.offsetWidth:0,it="offsetHeight"in N?N.offsetHeight===0?0:Ce/N.offsetHeight:0;if(w===N)J=r==="start"?j:r==="end"?j-_:r==="nearest"?ve(b,b+_,_,Le,De,b+j,b+j+D,D):j-_/2,X=u==="start"?H:u==="center"?H-k/2:u==="end"?H-k:ve(L,L+k,k,_e,Be,L+H,L+H+K,K),J=Math.max(0,J+b),X=Math.max(0,X+L);else{J=r==="start"?j-Se-Le:r==="end"?j-rt+De+ze:r==="nearest"?ve(Se,rt,Ce,Le,De+ze,j,j+D,D):j-(Se+Ce/2)+ze/2,X=u==="start"?H-Ie-_e:u==="center"?H-(Ie+Ne/2)+Re/2:u==="end"?H-lt+Be+Re:ve(Ie,lt,Ne,_e,Be+Re,H,H+K,K);const{scrollLeft:Vn,scrollTop:On}=N;J=it===0?0:Math.max(0,Math.min(On+J/it,N.scrollHeight-Ce/it+ze)),X=st===0?0:Math.max(0,Math.min(Vn+X/st,N.scrollWidth-Ne/st+Re)),j+=On-J,H+=Vn-X}ot.push({el:N,top:J,left:X})}return ot},wo=t=>t===!1?{block:"end",inline:"nearest"}:(n=>n===Object(n)&&Object.keys(n).length!==0)(t)?t:{block:"start",inline:"nearest"};function yo(t,n){if(!t.isConnected||!(i=>{let a=i;for(;a&&a.parentNode;){if(a.parentNode===document)return!0;a=a.parentNode instanceof ShadowRoot?a.parentNode.host:a.parentNode}return!1})(t))return;const s=(i=>{const a=window.getComputedStyle(i);return{top:parseFloat(a.scrollMarginTop)||0,right:parseFloat(a.scrollMarginRight)||0,bottom:parseFloat(a.scrollMarginBottom)||0,left:parseFloat(a.scrollMarginLeft)||0}})(t);if((i=>typeof i=="object"&&typeof i.behavior=="function")(n))return n.behavior(Ct(t,n));const o=typeof n=="boolean"||n==null?void 0:n.behavior;for(const{el:i,top:a,left:l}of Ct(t,wo(n))){const r=a-s.top+s.bottom,u=l-s.left+s.right;i.scroll({top:r,left:u,behavior:o})}}let ee,He,Nt,St,It,Mt,_t,Lt,Bt,Ae,C,$,Dt,Rt,zt,Vt,Ot,Tt,Pt,Ut,jt,re,R,Ht,At,$e,Fe,$t,Ft,Wt,We,Kt,Jt,Ke,E,F,Xt,qt,Yt,Gt,Zt,Qt,en,tn,I,we,nn,ye,xe,an,on,ln,rn,sn;ee=await h("vue"),He="createElementVNode",Nt="openBlock",St="createElementBlock",It="defineComponent",Mt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 16 16"},_t=e(ee,He)("g",{fill:"none"},[e(ee,He)("path",{d:"M13.416 2.584c.778.778.778 2.039 0 2.817L6.058 12.76c-.319.32-.719.546-1.156.655l-2.283.57a.498.498 0 0 1-.604-.603l.57-2.283a2.49 2.49 0 0 1 .656-1.156l7.358-7.358a1.992 1.992 0 0 1 2.817 0zM9.894 4.697l-5.949 5.949a1.495 1.495 0 0 0-.393.694l-.369 1.477l1.477-.37c.263-.065.503-.2.694-.392l5.949-5.95l-1.409-1.408zm1.41-1.41l-.705.705l1.408 1.409l.705-.704a.996.996 0 0 0-1.409-1.41z",fill:"currentColor"})],-1),Lt=[_t],ft=e(ee,It)({name:"Edit16Regular",render:function(t,n){return e(ee,Nt)(),e(ee,St)("svg",Mt,Lt)}}),Bt=await h("@rdx/admin"),Ae=await h("@rdx/shared"),C=await h("vue"),$=await h("naive-ui"),Dt="NButton",Rt="NButton",zt="NSpace",Vt="NModal",Ot="NButton",Tt="NEmpty",Pt="NIcon",Ut="NButton",jt="Fragment",re="createTextVNode",R="createVNode",Ht="mergeProps",At="defineAsyncComponent",$e="defineComponent",Fe="ref",$t="createModalProps",Ft="useModalLogic",Wt="presetStyleModal",We=e(C,At)(()=>Ve(()=>import("./CodeEditor-d53c09af.js").then(async t=>(await t.__tla,t)).then(t=>t.C),["./CodeEditor-d53c09af.js","./federation-shared-a49272f9.js","./CodeEditor-f1c3ba81.css"],import.meta.url).then(t=>t.CodeEditor)),Kt=e(C,$e)({setup(){const t=B(),n=e(C,Fe)(!1);return()=>e(C,R)(e(C,jt),null,[e(C,R)("div",{class:"un-b-b-1px un-b-b-solid un-border-var(--divider-color) un-px-8px un-h-42px un-sticky un-top-0 un-bg-var(--card-color) un-z-10 un-flex un-items-center un-justify-between"},[e(C,R)("span",null,[e(C,re)("\u9875\u9762\u6837\u5F0F")]),e(C,R)(e($,Ut),{size:"tiny",onClick:()=>n.value=!0},{default:()=>[e(C,R)(e($,Pt),null,{default:()=>[e(C,R)(ft,null,null)]})]})]),e(C,R)("div",{class:"un-grid un-gap-8px un-p-8px"},[t.globalStyle?e(C,R)(We,{value:t.globalStyle,language:"css",readOnly:!0,minimap:!1,style:"height: calc(100vh - 108px);"},null):e(C,R)(e($,Tt),{class:"un-h-200px un-flex un-justify-center"},{extra:()=>e(C,R)(e($,Ot),{ghost:!0,size:"small",type:"primary",onClick:()=>n.value=!0},{default:()=>[e(C,re)("\u7F16\u8F91\u6837\u5F0F")]})})]),e(C,R)(Jt,{show:n.value,"onUpdate:show":s=>n.value=s,data:t.globalStyle,"onUpdate:data":s=>t.globalStyle=s},null)])}}),Jt=e(C,$e)({props:{...e(Ae,$t)(),"onUpdate:data":Function},setup(t){const n=e(C,Fe)("");e(Ae,Ft)({props:t,onShow(){n.value=t.data}});const s=()=>{var o,i;(o=t["onUpdate:data"])==null||o.call(t,n.value),(i=t["onUpdate:show"])==null||i.call(t,!1)};return()=>e(C,R)(e($,Vt),e(C,Ht)({preset:"card",showIcon:!1,maskClosable:!1,title:"\u7F16\u8F91\u6837\u5F0F",show:t.show,"onUpdate:show":t["onUpdate:show"],style:{width:"1200px"},size:"small",autoFocus:!1},e(Bt,Wt)),{default:()=>[e(C,R)("div",{class:"un-p-12px",style:"height: calc(100vh - 160px);"},[e(C,R)(We,{value:n.value,"onUpdate:value":o=>n.value=o,language:"css"},null)])],footer:()=>e(C,R)(e($,zt),{justify:"end"},{default:()=>[e(C,R)(e($,Rt),{onClick:()=>{var o;return(o=t["onUpdate:show"])==null?void 0:o.call(t,!1)}},{default:()=>[e(C,re)("\u53D6\u6D88")]}),e(C,R)(e($,Dt),{type:"primary",onClick:s},{default:()=>[e(C,re)("\u786E\u5B9A")]})]})})}}),Ke=await h("@rdx/admin"),E=await h("vue"),F=await h("naive-ui"),Xt="NInput",qt="NIcon",Yt="NIcon",Gt="NTabPane",Zt="NScrollbar",Qt="NIcon",en="NTabPane",tn="NTabs",I="createVNode",we="defineComponent",nn="computed",ye="ref",xe="watch",an="useColors",on="createHoverColor",ln=e(E,we)({setup(){const t=B(),n=s=>e(E,I)("div",{class:"un-cursor-pointer un-flex-1 un-flex un-items-center",onClick:()=>{t.ctrlKey||(t.curElementId=s.uid),dt(t,s)}},[e(E,I)(sn,{element:s},null)]);return()=>e(E,I)(e(F,tn),{placement:"left",type:"line",class:"un-bg-var(--card-color) un-w-288px",themeOverrides:{panePaddingMedium:"0",tabPaddingVerticalMediumLine:"8px 14px",tabTextColorLine:"var(--text-color3)"},defaultValue:1},{default:()=>[e(E,I)(e(F,en),{name:1,tab:()=>e(E,I)(e(F,Qt),{size:18},{default:()=>[e(E,I)(bt,null,null)]})},{default:()=>[e(E,I)(e(F,Zt),{style:"height: calc(100vh - 45px);"},{default:()=>[e(E,I)(rn,{class:"un-p-8px",renderLabel:n},null)]})]}),e(E,I)(e(F,Gt),{name:2,tab:()=>e(E,I)(e(F,Yt),{size:18},{default:()=>[e(E,I)(go,null,null)]})},{default:()=>[e(E,I)(Kt,null,null)]})]})}}),rn=e(E,we)({props:{renderLabel:Function},setup(t){const n=B(),s=e(Ke,an)(),o=ct(),i=e(E,nn)(()=>{const u=[];return kr(n.elements,(c,p,f)=>(u.push({element:c,depth:f}),n.expandedKeyMap.get(c.uid)??!1)),u});let a=0;const{rootRef:l}=Qa(),r=e(E,ye)(null);return e(E,xe)(r,u=>{u&&setTimeout(()=>{yo(u,{scrollMode:"if-needed",behavior:"smooth",block:"center",inline:"nearest"})},250)},{immediate:!0}),()=>e(E,I)("div",{ref:l,onMouseleave:()=>{n.isDragging&&(n.isSink=!1,n.curElementId=null)}},[i.value.map(u=>{var y,g;const{element:c,depth:p}=u,f=ut(n,c),w=c.uid===n.curElementId&&!n.isDragging;return e(E,I)("div",{key:c.uid,class:["un-flex un-items-center un-cursor-pointer un-rounded-normal un-relative",w?"":"un-hover:bg-var(--hover-color)"],ref:k=>{w&&(r.value=k)},style:{paddingLeft:`${p*8}px`,background:(n.selectElementIds.size?n.selectElementIds.has(c.uid):w)?e(Ke,on)(s.value.primaryColor,.75):void 0},onMouseover:k=>{n.isDragging&&(n.isSink=!1,a=k.clientX)},onMousemove:k=>{var _,L;!n.isDragging||!n.curDragCode&&!gr(n,q(n,n.curDragId),c)||(n.isSink=n.curDragId!==c.uid&&(((_=o[f.metaCode])==null?void 0:_.droppable)===!1||!!c.children&&((L=o[c.metaCode])==null?void 0:L.droppable)!==!1&&a-k.clientX<-12),n.curElementId=c.uid,n.isSink?n.isBefore=!1:n.isBefore=k.offsetY<16)},onMousedown:k=>{if(c.metaCode==="slot"||n.editingId)return;const _=b=>{var D;b.preventDefault(),!(Math.pow(b.clientX-k.clientX,2)+Math.pow(b.clientY-k.clientY,2)<8*8||((D=document.getSelection())==null?void 0:D.type)==="Range")&&(n.curDragId=c.uid,n.curElementId=c.uid,n.dragPosition={x:b.clientX,y:b.clientY},n.isDragging=!0,window.removeEventListener("mousemove",_))},L=()=>{window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",L)};window.addEventListener("mousemove",_),window.addEventListener("mouseup",L)}},[(y=c.children)!=null&&y.length?e(E,I)("div",{style:["transition: transform .15s var(--cubic-bezier-ease-in-out);",n.expandedKeyMap.get(c.uid)?"transform: rotate(90deg)":""],class:"un-w-16px un-h-16px un-justify-center un-flex un-items-center",onClick:()=>{n.expandedKeyMap.set(c.uid,!n.expandedKeyMap.get(c.uid))}},[e(E,I)(e(F,qt),null,{default:()=>[e(E,I)(qn,null,null)]})]):null,(g=t.renderLabel)==null?void 0:g.call(t,c),n.isDragging&&n.curElementId===c.uid?e(E,I)("div",{class:"un-absolute un-z-9 un-right-0px un-h-2px un-bg-primary un-pointer-events-none",style:`left: ${p*8+8+(n.isSink?0:-8)}px;${n.isBefore?"top: -1px;":"bottom: -1px;"}`},null):null])})])}}),sn=e(E,we)({props:{element:{type:Object,required:!0}},setup(t){const n=e(E,ye)(""),s=e(E,ye)(),o=B(),i=()=>{n.value=t.element.name||"",o.editingId=t.element.uid},a=l=>{l.key==="Enter"&&(o.editingId=null,n.value&&(t.element.name=n.value))};return e(E,xe)(s,l=>{l&&l.focus()}),e(E,xe)(()=>o.curElementId===t.element.uid,l=>{!l&&o.editingId&&(o.editingId=null,n.value&&(t.element.name=n.value))}),()=>{const l=t.element;return e(E,I)("div",{class:"un-ml-4px un-lh-32px un-flex-1",onDblclick:i,draggable:!1},[o.editingId===l.uid?e(E,I)(e(F,Xt),{value:n.value,"onUpdate:value":r=>n.value=r,size:"small",onKeydown:a,ref:s},null):l.name??"\u672A\u7ED1\u5B9A\u7EC4\u4EF6"])}}});const M=await h("vue"),W=await h("naive-ui"),xo="NCollapseItem",bo="NCollapse",Eo="NScrollbar",ko="NTabPane",Co="NScrollbar",No="NTabPane",So="NTabs",T="createVNode",Io="isVNode",Mo="defineAsyncComponent",un="defineComponent",_o="h",dn="ref",Lo="watch",Bo="NButton";function Do(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!e(M,Io)(t)}const Ro=e(M,Mo)(()=>Ve(()=>import("./Index-c59e67af.js").then(async t=>(await t.__tla,t)),["./Index-c59e67af.js","./federation-shared-a49272f9.js","./useState-9a390b3c.js","./constants-3149fad0.js","./Close-a51d54b5.js","./TextAlignRight16Filled-c135dfb8.js","./getItemById-5a51d26e.js","./_virtual___federation_host-7d538dc0.js","./useDesginer-c36d80fe.js","./ExpressionInput-2eeb7388.js","./ExpressionInput-d0266da8.css","./Refresh-39621f05.js","./debounce-0459d24a.js","./Index-da9e05ef.css"],import.meta.url)),zo=e(M,un)({setup(){const t=B();return()=>e(M,T)(e(W,So),{defaultValue:1,tabsPadding:12,type:"line",themeOverrides:{tabGapMediumLine:"20px",panePaddingMedium:"0px"}},{default:()=>[e(M,T)(e(W,No),{tab:"\u7EC4\u4EF6",name:1},{default:()=>[e(M,T)(e(W,Co),{style:"height: calc(100vh - 87px);"},{default:()=>[e(M,T)(Vo,null,null)]})]}),e(M,T)(e(W,ko),{tab:"\u6837\u5F0F",name:2,displayDirective:"if"},{default:()=>[e(M,T)(e(W,Eo),{style:"height: calc(100vh - 87px);"},{default:()=>[e(M,T)(Ro,{key:t.curElementId},null),e(M,T)("div",{class:"un-p-12px un-b-t-1px un-b-t-solid un-border-var(--divider-color) un-grid un-grid-cols-2 un-gap-8px"},[e(M,T)(le,{label:"\u52A8\u6001\u6837\u5F0F",value:t.dynamicStyle,"onUpdate:value":n=>t.dynamicStyle=n},null),e(M,T)(le,{label:"\u52A8\u6001\u7C7B\u540D",value:t.dynamicClass,"onUpdate:value":n=>t.dynamicClass=n},null)])]})]})]})}}),Vo=e(M,un)({setup(){const t=B(),n=vr(),s=a=>e(M,_o)(e(W,Bo),{key:a.code,size:"small",style:"font-size: 12px;",focusable:!1,onMousedown(l){const r=c=>{var p;Math.pow(c.clientX-l.clientX,2)+Math.pow(c.clientY-l.clientY,2)<64||((p=document.getSelection())==null?void 0:p.type)==="Range"||(t.isDragging=!0,t.curDragCode=a.code,t.dragPosition={x:c.clientX,y:c.clientY},window.removeEventListener("mousemove",r))},u=()=>{window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",u)};window.addEventListener("mousemove",r),window.addEventListener("mouseup",u)}},{default:()=>a.name}),o=e(M,dn)([]),i=e(M,dn)([]);return e(M,Lo)(n,a=>{const l={},r=[];a.forEach(u=>{if(!u.hideInPanel)if(!u.group)r.push(u);else{const c=u.group;l[c]?l[c].push(u):l[c]=[u]}}),i.value=Object.keys(l),o.value=i.value.map(u=>({name:u,items:l[u]})),r.length&&(i.value.push("\u9ED8\u8BA4\u5206\u7EC4"),o.value.push({name:"\u9ED8\u8BA4\u5206\u7EC4",items:r}))},{immediate:!0}),()=>{let a;return e(M,T)(e(W,bo),{class:"un-my-16px",expandedNames:i.value,"onUpdate:expandedNames":l=>i.value=l},Do(a=o.value.map(({name:l,items:r})=>e(M,T)(e(W,xo),{title:l,name:l,key:l},{default:()=>[e(M,T)("div",{class:"un-grid un-grid-cols-3 un-gap-8px un-px-12px"},[r.map(u=>s(u))])]})))?a:{default:()=>[a]})}}}),te=await h("vue"),Je="createElementVNode",Oo="openBlock",To="createElementBlock",Po="defineComponent",Uo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},jo=e(te,Je)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M160 368L32 256l128-112"},null,-1),Ho=e(te,Je)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M352 368l128-112l-128-112"},null,-1),Ao=e(te,Je)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M304 96l-96 320"},null,-1),$o=[jo,Ho,Ao],Fo=e(te,Po)({name:"CodeSlashOutline",render:function(t,n){return e(te,Oo)(),e(te,To)("svg",Uo,$o)}}),be=await h("vue"),Wo="createElementVNode",Ko="openBlock",Jo="createElementBlock",Xo="defineComponent",qo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Yo=e(be,Wo)("path",{d:"M262.29 192.31a64 64 0 1 0 57.4 57.4a64.13 64.13 0 0 0-57.4-57.4zM416.39 256a154.34 154.34 0 0 1-1.53 20.79l45.21 35.46a10.81 10.81 0 0 1 2.45 13.75l-42.77 74a10.81 10.81 0 0 1-13.14 4.59l-44.9-18.08a16.11 16.11 0 0 0-15.17 1.75A164.48 164.48 0 0 1 325 400.8a15.94 15.94 0 0 0-8.82 12.14l-6.73 47.89a11.08 11.08 0 0 1-10.68 9.17h-85.54a11.11 11.11 0 0 1-10.69-8.87l-6.72-47.82a16.07 16.07 0 0 0-9-12.22a155.3 155.3 0 0 1-21.46-12.57a16 16 0 0 0-15.11-1.71l-44.89 18.07a10.81 10.81 0 0 1-13.14-4.58l-42.77-74a10.8 10.8 0 0 1 2.45-13.75l38.21-30a16.05 16.05 0 0 0 6-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 0 0-6.07-13.94l-38.19-30A10.81 10.81 0 0 1 49.48 186l42.77-74a10.81 10.81 0 0 1 13.14-4.59l44.9 18.08a16.11 16.11 0 0 0 15.17-1.75A164.48 164.48 0 0 1 187 111.2a15.94 15.94 0 0 0 8.82-12.14l6.73-47.89A11.08 11.08 0 0 1 213.23 42h85.54a11.11 11.11 0 0 1 10.69 8.87l6.72 47.82a16.07 16.07 0 0 0 9 12.22a155.3 155.3 0 0 1 21.46 12.57a16 16 0 0 0 15.11 1.71l44.89-18.07a10.81 10.81 0 0 1 13.14 4.58l42.77 74a10.8 10.8 0 0 1-2.45 13.75l-38.21 30a16.05 16.05 0 0 0-6.05 14.08c.33 4.14.55 8.3.55 12.47z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Go=[Yo],Zo=e(be,Xo)({name:"SettingsOutline",render:function(t,n){return e(be,Ko)(),e(be,Jo)("svg",qo,Go)}});await h("@rdx/shared");async function Qo(t){return localStorage.setItem("pageSchema",t.pageSchema),{code:0}}const el=await h("@rdx/admin"),tl=await h("@rdx/shared"),nl=await h("vue-router"),al="useRoute",ol="useRequestLogic",ll="preferMessage";function Xe(){const t=B(),n=e(nl,al)();return e(tl,ol)(async()=>{window.onbeforeunload=null,await Qo({id:n.query.id,pageSchema:Z(t),version:t.version})},{manual:!0,onSuccess(){t.version+=1,e(el,ll).success("\u4FDD\u5B58\u6210\u529F")}})}const Ee=await h("@rdx/admin"),U=await h("@rdx/shared"),cn=await h("vue-router"),d=await h("vue"),v=await h("naive-ui"),rl="NButton",sl="NButton",il="NSpace",ul="NModal",dl="NButton",cl="NButton",pl="NSpace",ml="NModal",fl="NButton",hl="NButton",gl="NSpace",vl="NInput",wl="NFormItem",yl="NForm",xl="NModal",bl="NButton",El="NButton",kl="NButton",Cl="NIcon",Nl="NButton",Sl="NTooltip",Il="NDivider",Ml="NIcon",_l="NButton",Ll="NTooltip",Bl="NIcon",Dl="NButton",Rl="NTooltip",zl="NIcon",Vl="NButton",Ol="NTooltip",Tl="NDivider",Pl="NIcon",Ul="NButton",jl="NTooltip",Hl="isVNode",m="createVNode",pn="Fragment",P="createTextVNode",qe="mergeProps",Al="defineAsyncComponent",ke="defineComponent",se="ref",mn="useRoute",Ye="useBoolean",Ge="createModalProps",$l="useSubmitLogic",Fl="request",fn="useModalLogic",Wl="convertListToMap",Kl="preferMessage",Ze="presetStyleModal";function Jl(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!e(d,Hl)(t)}const hn=e(d,Al)(()=>Ve(()=>import("./CodeEditor-d53c09af.js").then(async t=>(await t.__tla,t)).then(t=>t.C),["./CodeEditor-d53c09af.js","./federation-shared-a49272f9.js","./CodeEditor-f1c3ba81.css"],import.meta.url).then(t=>t.CodeDiffEditor)),Xl=e(d,ke)({setup(){const t=B(),n=e(cn,mn)(),{run:s,loadingRef:o}=Xe(),i=(y,g,k)=>e(d,m)(e(v,jl),null,{default:()=>[k],trigger:()=>e(d,m)(e(v,Ul),{type:t[g]?"primary":"default",ghost:!0,size:"small",onClick:()=>{t[g]=!t[g]},focusable:!1},{default:()=>[e(d,m)(e(v,Pl),null,Jl(y)?y:{default:()=>[y]})]})}),a=()=>{window.open(`./#/preview?id=${n.query.id}`)},{booleanRef:l,setTrue:r}=e(U,Ye)(),{booleanRef:u,setTrue:c}=e(U,Ye)(),{booleanRef:p,setTrue:f}=e(U,Ye)(),w=()=>{t.expandedKeyMap.clear()};return()=>e(d,m)(e(d,pn),null,[e(d,m)("div",{class:"un-relative un-flex un-items-center un-justify-between un-bg-var(--card-color) un-w-full un-px-12px un-h-45px un-gap-12px un-b-b-1px un-b-b-solid un-border-var(--divider-color)"},[e(d,m)("div",{class:"un-flex un-items-center un-gap-8px"},[i(e(d,m)(bt,null,null),"showLayer","\u5927\u7EB2\u6811"),i(e(d,m)(Zo,null,null),"showSetting","\u914D\u7F6E"),e(d,m)(e(v,Tl),{vertical:!0},null),e(d,m)(e(v,Ol),null,{default:()=>[e(d,P)("\u6298\u53E0\u5927\u7EB2\u6811")],trigger:()=>e(d,m)(e(v,Vl),{ghost:!0,size:"small",onClick:w,focusable:!1},{default:()=>[e(d,m)(e(v,zl),{component:ca},null)]})}),e(d,m)(e(v,Rl),null,{default:()=>[e(d,P)("\u5237\u65B0\u5185\u9875")],trigger:()=>e(d,m)(e(v,Dl),{ghost:!0,size:"small",onClick:()=>{t.curElementId=null,t.rollbackStack.length=0,t.postMessage({type:"refresh"})},focusable:!1},{default:()=>[e(d,m)(e(v,Bl),{component:Mr},null)]})}),e(d,m)(e(v,Ll),null,{default:()=>[e(d,P)("\u9875\u9762schema")],trigger:()=>e(d,m)(e(v,_l),{ghost:!0,size:"small",onClick:c,focusable:!1},{default:()=>[e(d,m)(e(v,Ml),{component:Fo},null)]})}),t.prodSchema?e(d,m)(e(d,pn),null,[e(d,m)(e(v,Il),{vertical:!0},null),e(d,m)(e(v,Sl),null,{default:()=>[e(d,P)("\u5BF9\u6BD4\u7EBF\u4E0A")],trigger:()=>e(d,m)(e(v,Nl),{ghost:!0,size:"small",onClick:f,focusable:!1},{default:()=>[e(d,m)(e(v,Cl),{component:aa},null)]})})]):null]),e(d,m)("div",{class:"un-absolute un-left-50% un-translate-x--50% un-text-18px un-font-bold"},[t.title]),e(d,m)("div",{class:"un-flex un-items-center un-gap-8px"},[e(d,m)(e(v,kl),{size:"small",onClick:s,loading:o.value},{default:()=>[e(d,P)("\u4FDD\u5B58")]}),e(d,m)(e(v,El),{size:"small",onClick:a},{default:()=>[e(d,P)("\u9884\u89C8")]}),e(d,m)(e(v,bl),{size:"small",onClick:r},{default:()=>[e(d,P)("\u53D1\u5E03")]})])]),e(d,m)(ql,{show:l.value,"onUpdate:show":y=>l.value=y},null),e(d,m)(Yl,{show:u.value,"onUpdate:show":y=>u.value=y},null),e(d,m)(Gl,{show:p.value,"onUpdate:show":y=>p.value=y},null)])}}),ql=e(d,ke)({props:{...e(U,Ge)()},setup(t){const n=e(d,se)(),s={remark:{required:!0,message:"\u8BF7\u8F93\u5165\u53D1\u5E03\u5907\u6CE8",trigger:["input"]}},o=e(cn,mn)(),i=B(),{loadingRef:a,submit:{modelRef:l,handleSubmit:r}}=e(U,$l)(async u=>{await e(U,Fl)({url:"/api/lowcode/setting/release",method:"post",data:{id:o.query.id,remark:u.remark,pageSchema:Z(i),version:i.version}})},{model:()=>({remark:null}),validate:()=>{var u;(u=n.value)==null||u.validate()},manual:!0,onSuccess(){var u;i.version+=1,e(Ee,Kl).success("\u53D1\u5E03\u6210\u529F"),(u=t["onUpdate:show"])==null||u.call(t,!1)}});return()=>e(d,m)(e(v,xl),e(d,qe)({preset:"card",showIcon:!1,maskClosable:!1,title:"\u53D1\u5E03\u9875\u9762",show:t.show,"onUpdate:show":t["onUpdate:show"],style:{width:"600px"},size:"small",autoFocus:!1},e(Ee,Ze)),{default:()=>[e(d,m)(e(v,yl),{class:"un-mx-12px un-mt-12px",labelPlacement:"left",ref:n,model:l.value,rules:s},{default:()=>[e(d,m)(e(v,wl),{path:"remark"},{default:()=>[e(d,m)(e(v,vl),{type:"textarea",placeholder:"\u53D1\u5E03\u5907\u6CE8",value:l.value.remark,"onUpdate:value":u=>l.value.remark=u},null)]})]})],footer:()=>e(d,m)(e(v,gl),{justify:"end"},{default:()=>[e(d,m)(e(v,hl),{onClick:()=>{var u;return(u=t["onUpdate:show"])==null?void 0:u.call(t,!1)}},{default:()=>[e(d,P)("\u53D6\u6D88")]}),e(d,m)(e(v,fl),{type:"primary",onClick:r,loading:a.value},{default:()=>[e(d,P)("\u786E\u5B9A")]})]})})}}),Yl=e(d,ke)({props:{...e(U,Ge)()},setup(t){const n=e(d,se)(""),s=e(d,se)(""),o=B();e(U,fn)({props:t,onShow:()=>{if(o.selectElementIds.size||o.curElementId){o.selectElementIds.size||o.selectElementIds.add(o.curElementId);const a=JSON.stringify(Array.from(o.selectElementIds).map(l=>q(o,l)),null,2);s.value=a,n.value=a}else{const a=o.originSchema?JSON.parse(o.originSchema):{};s.value=Z(a,!0),n.value=Z(o,!0)}}});const i=()=>{var a;if(o.selectElementIds.size){const l=JSON.parse(n.value),r=e(U,Wl)(l,"uid");o.selectElementIds.forEach(u=>{const c=q(o,u),p=JSON.stringify(c);Oe(o,()=>{const f=JSON.parse(p);o.postMessage({type:"updateElement",data:f}),Object.assign(c,f)}),o.postMessage({type:"updateElement",data:r[u]}),Object.assign(c,r[u])})}else pt(o,n.value);(a=t["onUpdate:show"])==null||a.call(t,!1)};return()=>e(d,m)(e(v,ml),e(d,qe)({preset:"card",showIcon:!1,maskClosable:!1,title:"\u9875\u9762schema",show:t.show,"onUpdate:show":t["onUpdate:show"],style:{width:"calc(100vw - 120px)"},size:"small",autoFocus:!1},e(Ee,Ze)),{default:()=>[e(d,m)("div",{class:"un-p-12px",style:"height: calc(100vh - 160px);"},[e(d,m)(hn,{original:s.value,modified:n.value,"onUpdate:modified":a=>n.value=a,language:"json"},null)])],footer:()=>e(d,m)(e(v,pl),{justify:"end"},{default:()=>[e(d,m)(e(v,cl),{onClick:()=>{var a;return(a=t["onUpdate:show"])==null?void 0:a.call(t,!1)}},{default:()=>[e(d,P)("\u53D6\u6D88")]}),e(d,m)(e(v,dl),{type:"primary",onClick:i},{default:()=>[e(d,P)("\u786E\u5B9A")]})]})})}}),Gl=e(d,ke)({props:{...e(U,Ge)()},setup(t){const n=e(d,se)(""),s=e(d,se)(""),o=B();e(U,fn)({props:t,onShow:()=>{const a=o.prodSchema?JSON.parse(o.prodSchema):{};s.value=Z(a,!0),n.value=Z(o,!0)}});const i=()=>{var a;pt(o,n.value),(a=t["onUpdate:show"])==null||a.call(t,!1)};return()=>e(d,m)(e(v,ul),e(d,qe)({preset:"card",showIcon:!1,maskClosable:!1,title:"\u5BF9\u6BD4\u7EBF\u4E0A",show:t.show,"onUpdate:show":t["onUpdate:show"],style:{width:"calc(100vw - 120px)"},size:"small",autoFocus:!1},e(Ee,Ze)),{default:()=>[e(d,m)("div",{class:"un-p-12px",style:"height: calc(100vh - 160px);"},[e(d,m)(hn,{original:s.value,modified:n.value,"onUpdate:modified":a=>n.value=a,language:"json"},null)])],footer:()=>e(d,m)(e(v,il),{justify:"end"},{default:()=>[e(d,m)(e(v,sl),{onClick:()=>{var a;return(a=t["onUpdate:show"])==null?void 0:a.call(t,!1)}},{default:()=>[e(d,P)("\u53D6\u6D88")]}),e(d,m)(e(v,rl),{type:"primary",onClick:i},{default:()=>[e(d,P)("\u786E\u5B9A")]})]})})}});function gn(){const t=B(),n=ct(),{createElement:s,appendChild:o,insertBefore:i,insertAfter:a}=mt();return()=>{var r,u,c,p,f,w,y,g,k,_;const l=z(t);if(l&&l.uid!==t.curDragId)if(t.curDragId){const L=q(t,t.curDragId);!((r=t.dragPosition)!=null&&r.isInner)&&!t.isSink||t.curElementId&&(!l.children||l.children.filter(b=>b.metaCode!=="slot").length||((u=n[l.metaCode])==null?void 0:u.droppable)===!1)&&((p=n[(c=ut(t,l))==null?void 0:c.metaCode])==null?void 0:p.droppable)!==!1?t.isBefore?i(L,l):a(L,l):t.isBefore&&((f=l.children)!=null&&f.length)?i(L,l.children[0]):o(L,l),t.curElementId=t.curDragId}else{const L=t.curDragCode,b=s(L);!((w=t.dragPosition)!=null&&w.isInner)&&!t.isSink||t.curElementId&&(!l.children||l.children.filter(D=>D.metaCode!=="slot").length||((y=n[l.metaCode])==null?void 0:y.droppable)===!1)&&((k=n[(g=ut(t,l))==null?void 0:g.metaCode])==null?void 0:k.droppable)!==!1?t.isBefore?i(b,l):a(b,l):t.isBefore&&((_=l.children)!=null&&_.length)?i(b,l.children[0]):o(b,l),t.curElementId=b.uid,t.boundingRect=null}t.curDragCode=null,t.curDragId=null,t.isDragging=!1,t.dragPosition=null,t.isSink=!1}}const ne=await h("vue"),Qe="watch",Zl="watchEffect",Ql="onBeforeMount",er="onUnmounted";function tr(){const t=B(),{removeChild:n}=mt(),s=jn(),o=Cr(),{run:i}=Xe(),a=Lr(i,1e3,{leading:!0,trailing:!1});e(ne,Qe)(()=>t.ctrlKey,p=>{p&&t.curElementId&&dt(t,z(t))}),e(ne,Qe)(()=>t.curElementId,()=>{t.selectElementIds.clear()}),e(ne,Qe)(()=>[t.curElementId,t.isDragging],([p,f])=>{if(!p||f)return;const w=[],y=g=>{for(let k=0;k<g.length;k+=1){const _=g[k];if(_.uid===p||(w.push(_.uid),y(_.children??[])))return!0;w.pop()}};y(t.elements),w.forEach(g=>t.expandedKeyMap.set(g,!0))}),e(ne,Zl)(()=>{const p=t.boundingRect,f=t.dragPosition;!p||!f||!f.isInner||(t.isBefore=f&&p.some(w=>f.y>=w.top&&f.y<=w.top+w.height&&f.y<w.top+w.height/2))});const l=()=>{if(t.selectElementIds.size)t.selectElementIds.forEach(p=>{n(q(t,p))});else{const p=z(t);if(!p||p.metaCode==="slot")return;n(p)}},r=p=>{var w;if(t.pauseKeyEvent||["input","textarea"].includes((w=document.activeElement)==null?void 0:w.tagName.toLowerCase()))return;const{ctrlKey:f}=p;f&&(t.ctrlKey=!0),f?p.key==="z"?(p.preventDefault(),Tn(t)):p.key==="a"?(p.preventDefault(),t.elements.forEach(y=>dt(t,y))):p.key==="s"&&(p.preventDefault(),a()):p.key===" "?(p.preventDefault(),t.curElementId=null,t.selectElementIds.clear()):p.key==="Delete"&&l()},u=p=>{const{ctrlKey:f}=p;f||(t.ctrlKey=!1)},c=p=>{var f,w;t.pauseKeyEvent||["input","textarea"].includes((f=document.activeElement)==null?void 0:f.tagName.toLowerCase())||s((w=p.clipboardData)==null?void 0:w.getData("text/plain"))};e(ne,Ql)(()=>{document.addEventListener("keydown",r),document.addEventListener("keyup",u),document.addEventListener("copy",o),document.addEventListener("paste",c)}),e(ne,er)(()=>{document.removeEventListener("keydown",r),document.removeEventListener("keyup",u),document.removeEventListener("copy",o),document.removeEventListener("paste",c)})}const ie=await h("vue"),nr="nextTick",ar="onBeforeMount",or="onUnmounted",lr="watch",rr="toRaw";function sr(t){const{removeChild:n}=mt(),{run:s}=Xe(),o=gn(),i=jn(),a={ready(){Nr(t)},changeState({data:r}){t[r.key]=r.value},initChildren({data:r}){const u=q(t,Number(r));u.children=[]},selectElement({data:r}){t.curElementId=r},dragstart({data:r}){t.curDragId=r,t.curElementId=r,t.isDragging=!0},dropElement(){o()},removeChild({data:r}){n(q(t,r))},popRollback(){Tn(t)},spaceKey(){t.curElementId=null,t.selectElementIds.clear()},savePage(){s()},setBindingRect({data:r}){t.boundingRect=r},pasteElement({data:r}){i(r)}},l=r=>{var c,p;const u=[];(p=(c=r.data).forEach)==null||p.call(c,f=>a[f.type]({data:f.data,rollbacks:u})),u.length&&(e(ie,nr)(()=>{Oe(t,()=>u.forEach(f=>f()))}),t.postMessage({type:"pushRollback"}))};e(ie,ar)(()=>{window.addEventListener("message",l)}),e(ie,or)(()=>{window.removeEventListener("message",l)}),["dynamicClass","dynamicStyle","curElementId","curDragCode","curDragId","isDragging","globalStyle","ctrlKey","style"].forEach(r=>{e(ie,lr)(()=>t[r],u=>{var c;(c=t.postMessage)==null||c.call(t,{type:"changeState",data:{key:r,value:e(ie,rr)(u)}})},{deep:!0})})}let vn,et,x,wn,O,tt,yn,ue,xn,bn,En,kn,nt,Cn,Nn,Sn,In,Mn,_n,Ln,Bn,at;vn=await h("vue-router"),et=await h("@rdx/shared"),x=await h("vue"),wn="Fragment",O="createVNode",tt="defineComponent",yn="reactive",ue="provide",xn="shallowReactive",bn="shallowRef",En="computed",kn="markRaw",nt="nextTick",Cn="watch",Nn="ref",Sn="onBeforeMount",In="onBeforeUnmount",Mn="convertListToMap",_n="useRequestLogic",Ln="useRoute",Bn=e(x,tt)({setup(){const t=e(x,yn)(wr(!0));e(x,ue)(pr,t);const n=e(x,xn)({});e(x,ue)(mr,n);const s=e(x,bn)([]);e(x,ue)(fr,s),e(x,ue)(hr,e(x,En)(()=>e(et,Mn)(s.value,"code")));const o=e(vn,Ln)();return e(et,_n)(async()=>(await ur({id:o.query.id})).content,{ready:()=>!0,onSuccess(i){const a=i.pageSchema;t.title=i.name,t.prodSchema=i.prodSchema,t.originSchema=a||Z(t),t.libs=e(x,kn)(i.libs),t.version=i.version,pt(t,a),e(x,nt)(()=>{window.onbeforeunload=null}),Promise.all(t.libs.map(async l=>(xr?Pn(l.name,{external:l.url,format:"esm"}):Pn(l.name,{external:l.url.replace(".js","-legacy.js"),format:"systemjs"}),await Promise.all([Un(l.name,"./componentMap").then(async r=>(await r.__tla,r.default)),Un(l.name,"./components").then(async r=>(await r.__tla,r.default))])))).then(l=>{l.forEach(([r,u])=>{Object.assign(n,r),s.value=s.value.concat(u)})}),document.title=`\u9875\u9762\u8BBE\u8BA1 - ${t.title}`}}),e(x,Cn)(()=>t.elements,()=>{window.onbeforeunload=()=>!0},{deep:!0}),()=>e(x,O)(e(x,wn),null,[e(x,O)(Xl,null,null),e(x,O)("div",{class:"un-flex"},[t.showLayer?e(x,O)(ln,{class:"un-b-r-1px un-b-r-solid un-border-var(--divider-color) un-select-none"},null):null,e(x,O)(at,{class:"un-flex-1"},null),t.showSetting?e(x,O)("div",{class:"un-w-280px un-bg-var(--card-color) un-b-l-1px un-b-l-solid un-border-var(--divider-color)"},[t.curElementId&&!t.isDragging?e(x,O)(ja,null,null):e(x,O)(zo,null,null)]):null])])}}),at=e(x,tt)({setup(){const t=B(),n=e(x,Nn)(),s=[];tr();const o=gn();t.postMessage=l=>{s.push(l),e(x,nt)(()=>{var r,u;s.length&&((u=(r=n.value)==null?void 0:r.contentWindow)==null||u.postMessage(s),s.length=0)})},sr(t);const i=l=>{var r;t.isDragging&&(l.preventDefault(),(r=t.dragPosition)!=null&&r.isInner&&(t.curElementId=null),t.dragPosition={x:l.clientX,y:l.clientY})},a=()=>{t.isDragging&&o()};return e(x,Sn)(()=>{document.addEventListener("mousemove",i),document.addEventListener("mouseup",a)}),e(x,In)(()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",a)}),()=>e(x,O)("div",{class:"un-relative"},[e(x,O)("div",{class:"un-relative un-overflow-hidden"},[e(x,O)("iframe",{ref:n,src:"./#/inner",class:"un-block un-border-none un-w-full",style:"height: calc(100vh - 45px);"},null),e(x,O)(fa,null,null)]),e(x,O)(va,null,null)])}}),Hn=Object.freeze(Object.defineProperty({__proto__:null,Content:at,default:Bn},Symbol.toStringTag,{value:"Module"}))});export{ft as E,Hn as I,Br as __tla};
