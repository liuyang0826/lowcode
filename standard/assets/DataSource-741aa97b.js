import{b as W,a as t}from"./federation-shared-d266eb0c.js";let M,D,U,J=(async()=>{let u,l,o,k,x,B,C,A,L,S,O,H,v,K,j,V;u=await W("@rdx/shared"),l=await W("@lowcode-fe/designer/common"),o=await W("vue"),k="createVNode",x="useStore",B="useExprParser",C="useSlot",A="useExprValue",L="defineComponent",S="markRaw",O="onBeforeUnmount",H="usePaginationLogic",v="request",K="useSubmitLogic",j="useRequestLogic",V="useWebSocketLogic",D=t(o,L)({inheritAttrs:!1,props:{meta:{type:Object,required:!0}},setup(e){var h,g,f,q,I,E,R,w,N,F,P;const{Slot:b}=t(l,C)(),s=t(l,x)(),n=`${e.meta.scopeKey??""}Http`,a=t(l,B)(),c=(h=a(e.meta.ready))==null?void 0:h(),d=(g=a(e.meta.onBefore))==null?void 0:g(),p=(f=a(e.meta.onSuccess))==null?void 0:f(),y=(q=a(e.meta.onError))==null?void 0:q(),i=(I=a(e.meta.onFinally))==null?void 0:I();if(e.meta.scene==="page"){const m=(E=a(e.meta.query))==null?void 0:E(),r=(R=a(e.meta.model))==null?void 0:R(),z=t(l,A)(()=>e.meta.defaultPageSize);s[n]=t(o,S)(t(u,H)(async({currentPage:_,pageSize:G,query:$})=>(await t(u,v)({url:e.meta.url,method:e.meta.method??"post",data:{currentPage:_,pageSize:G,query:m?m($):$}})).data.content,{pollingInterval:Number(e.meta.pollingInterval),ready:c,model:r,get defaultPageSize(){return z.value||10},manual:e.meta.manual,autoRefresh:e.meta.autoRefresh,onBefore:d,onSuccess:p,onError:y,onFinally:i}))}else if(e.meta.scene==="submit"){const m=(w=a(e.meta.model))==null?void 0:w(),r=(N=a(e.meta.config))==null?void 0:N(),z=(F=a(e.meta.validate))==null?void 0:F();s[n]=t(o,S)(t(u,K)(async _=>(await t(u,v)({url:e.meta.url,method:e.meta.method,...r?r(_):_})).data.content,{pollingInterval:Number(e.meta.pollingInterval),ready:c,model:m,manual:e.meta.manual??!0,autoRefresh:e.meta.autoRefresh,validate:z,onBefore:d,onSuccess:p,onError:y,onFinally:i}))}else{const m=(P=a(e.meta.config))==null?void 0:P();s[n]=t(o,S)(t(u,j)(async(...r)=>(await t(u,v)({url:e.meta.url,method:e.meta.method,...m==null?void 0:m(...r)})).data.content,{pollingInterval:Number(e.meta.pollingInterval),ready:c,manual:e.meta.manual,autoRefresh:e.meta.autoRefresh,onBefore:d,onSuccess:p,onError:y,onFinally:i}))}return t(o,O)(()=>{delete s[n]}),()=>t(o,k)(b,{virtual:!0},null)}}),M=t(o,L)({inheritAttrs:!1,props:{meta:{type:Object,required:!0}},setup(e){var q,I,E,R,w,N,F,P;const{Slot:b}=t(l,C)(),s=t(l,x)(),n=`${e.meta.scopeKey??""}Http`,a=t(l,B)(),c=(q=a(e.meta.ready))==null?void 0:q(),d=(I=a(e.meta.onSuccess))==null?void 0:I(),p=(E=a(e.meta.onError))==null?void 0:E(),y=(R=a(e.meta.onFinally))==null?void 0:R(),i=(w=a(e.meta.sql))==null?void 0:w(),h=(N=a(e.meta.query))==null?void 0:N(),g=(F=a(e.meta.keys))==null?void 0:F(),f=(P=a(e.meta.http))==null?void 0:P();return s[n]=t(o,S)(t(u,j)(async(...m)=>{const r=f==null?void 0:f(...m);return(await t(u,v)({url:"/api/report/dataSource/execute",method:"post",data:{dataSourceId:e.meta.dataSourceId,sql:i==null?void 0:i(...m),dbName:e.meta.dbName,query:h==null?void 0:h(...m),keys:g==null?void 0:g(...m),headers:r==null?void 0:r.headers,params:r==null?void 0:r.params,body:r==null?void 0:r.body}})).data.content},{pollingInterval:Number(e.meta.pollingInterval),ready:c,manual:e.meta.manual,autoRefresh:e.meta.autoRefresh,onSuccess:d,onError:p,onFinally:y})),t(o,O)(()=>{delete s[n]}),()=>t(o,k)(b,{virtual:!0},null)}}),U=t(o,L)({inheritAttrs:!1,props:{meta:{type:Object,required:!0}},setup(e){var c,d,p,y,i;const{Slot:b}=t(l,C)(),s=t(l,x)(),n=t(l,B)(),a=`${e.meta.scopeKey??""}WS`;return s[a]=t(u,V)({host:e.meta.host,path:e.meta.path,retryCount:e.meta.retryCount,retryInterval:e.meta.retryInterval,active:(c=n(e.meta.active))==null?void 0:c(),onOpen:(d=n(e.meta.onOpen))==null?void 0:d(),onClose:(p=n(e.meta.onClose))==null?void 0:p(),onError:(y=n(e.meta.onError))==null?void 0:y(),onMessage:(i=n(e.meta.onMessage))==null?void 0:i()}),t(o,O)(()=>{delete s[a]}),()=>t(o,k)(b,{virtual:!0},null)}})})();export{M as DataSource,D as Http,U as WebSocket,J as __tla};
