import{b as R,a as t}from"./federation-shared-d266eb0c.js";let $,U,G=(async()=>{let n,m,o,v,S,b,w,B,E,y,I,C,f,x,F,L;n=await R("@rdx/shared"),m=await R("@lowcode-fe/designer/common"),o=await R("vue"),v="createVNode",S="useStore",b="useExprParser",w="useSlot",B="useExprValue",E="defineComponent",y="markRaw",I="onBeforeUnmount",C="usePaginationLogic",f="request",x="useSubmitLogic",F="useRequestLogic",L="useWebSocketLogic",$=t(o,E)({inheritAttrs:!1,props:{meta:{type:Object,required:!0}},setup(e){var N,k,z,O,W,_,V,j,A,H,K;const{Slot:q}=t(m,w)(),s=t(m,S)(),r=`${e.meta.scopeKey??""}Http`,a=t(m,b)(),u=(N=a(e.meta.ready))==null?void 0:N(),i=(k=a(e.meta.onBefore))==null?void 0:k(),c=(z=a(e.meta.onSuccess))==null?void 0:z(),d=(O=a(e.meta.onError))==null?void 0:O(),p=(W=a(e.meta.onFinally))==null?void 0:W();if(e.meta.scene==="page"){const l=(_=a(e.meta.query))==null?void 0:_(),g=(V=a(e.meta.model))==null?void 0:V(),P=t(m,B)(()=>e.meta.defaultPageSize);s[r]=t(o,y)(t(n,C)(async({currentPage:h,pageSize:D,query:M})=>(await t(n,f)({url:e.meta.url,method:e.meta.method??"post",data:{currentPage:h,pageSize:D,query:l?l(M):M}})).data.content,{pollingInterval:Number(e.meta.pollingInterval),ready:u,model:g,get defaultPageSize(){return P.value||10},manual:e.meta.manual,autoRefresh:e.meta.autoRefresh,onBefore:i,onSuccess:c,onError:d,onFinally:p}))}else if(e.meta.scene==="submit"){const l=(j=a(e.meta.model))==null?void 0:j(),g=(A=a(e.meta.config))==null?void 0:A(),P=(H=a(e.meta.validate))==null?void 0:H();s[r]=t(o,y)(t(n,x)(async h=>(await t(n,f)({url:e.meta.url,method:e.meta.method,...g?g(h):h})).data.content,{pollingInterval:Number(e.meta.pollingInterval),ready:u,model:l,manual:e.meta.manual??!0,autoRefresh:e.meta.autoRefresh,validate:P,onBefore:i,onSuccess:c,onError:d,onFinally:p}))}else{const l=(K=a(e.meta.config))==null?void 0:K();s[r]=t(o,y)(t(n,F)(async(...g)=>(await t(n,f)({url:e.meta.url,method:e.meta.method,...l==null?void 0:l(...g)})).data.content,{pollingInterval:Number(e.meta.pollingInterval),ready:u,manual:e.meta.manual,autoRefresh:e.meta.autoRefresh,onBefore:i,onSuccess:c,onError:d,onFinally:p}))}return t(o,I)(()=>{delete s[r]}),()=>t(o,v)(q,{virtual:!0},null)}}),U=t(o,E)({inheritAttrs:!1,props:{meta:{type:Object,required:!0}},setup(e){var u,i,c,d,p;const{Slot:q}=t(m,w)(),s=t(m,S)(),r=t(m,b)(),a=`${e.meta.scopeKey??""}WS`;return s[a]=t(n,L)({host:e.meta.host,path:e.meta.path,retryCount:e.meta.retryCount,retryInterval:e.meta.retryInterval,active:(u=r(e.meta.active))==null?void 0:u(),onOpen:(i=r(e.meta.onOpen))==null?void 0:i(),onClose:(c=r(e.meta.onClose))==null?void 0:c(),onError:(d=r(e.meta.onError))==null?void 0:d(),onMessage:(p=r(e.meta.onMessage))==null?void 0:p()}),t(o,I)(()=>{delete s[a]}),()=>t(o,v)(q,{virtual:!0},null)}})})();export{$ as Http,U as WebSocket,G as __tla};
