import{b as f,a as t}from"./federation-shared-d266eb0c.js";import{S as $,__tla as we}from"./Scoped-538c9dbb.js";let J,ve=Promise.all([(()=>{try{return we}catch{}})()]).then(async()=>{const b=await f("@rdx/admin"),M=await f("@rdx/shared"),d=await f("@lowcode-fe/designer/common"),l=await f("vue"),Q=await f("naive-ui"),Z="NDataTable",P="mergeProps",i="createVNode",W="isVNode",Y="Fragment",z="createTextVNode",E="useSlot",ee="useStore",p="useExprValue",te="useExprParser",T="defineComponent",k="computed",ae="watch",le="treeForEach",ne="useAutoPageSize",re="useRowSpanColumns",oe="useDataTableScrollX";function ie(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!t(l,W)(e)}let j;J=t(l,T)({props:{meta:{type:Object,required:!0}},setup(e,{attrs:x}){const{Slot:c}=t(d,E)();return()=>t(l,i)(c,null,{default:({children:y})=>t(l,i)(j,t(l,P)({meta:e.meta,children:y},x),null)})}}),j=t(l,T)({props:{meta:{type:Object,required:!0},children:{type:Array,required:!0}},setup(e){var q,G;const{SlotItem:x}=t(d,E)(),c=t(d,ee)();let y=t(d,p)(()=>e.meta.data);const se=t(d,p)(()=>e.meta.loading),D=t(d,te)(),de=t(d,p)(()=>e.meta.columnsExpr),u=e.meta.scopeKey||"table",H=(a,s,m)=>e.meta.columnsType===2?t(l,i)($,{scopeKey:`${u}Col`,data:{item:s,index:m}},ie(a)?a:{default:()=>[a]}):a,ce=t(l,k)(()=>{const a={};return t(M,le)(e.meta.columns,s=>{a[s.uid]=D(s.props)}),a}),ue=t(d,p)(()=>e.meta.expandable);let K,R,C,g=t(l,k)(()=>{const a=e.meta.columnsType===2,s=a?e.children:e.children.filter(o=>{var n;return((n=o.meta)==null?void 0:n.type)===1}),m=a?e.children:e.children.filter(o=>{var n;return((n=o.meta)==null?void 0:n.type)===2}),_=a?e.children:e.children.filter(o=>{var n;return!((n=o.meta)!=null&&n.type)}),h=[];e.meta.checkable&&h.push({type:"selection",multiple:e.meta.multiple,align:"center",fixed:"left"}),e.meta.expandIndex!==void 0&&h.push({type:"expand",expandable:ue.value,renderExpand:(o,n)=>{const r=m[e.meta.expandIndex];return t(l,i)($,{data:{row:o,rowIndex:n},scopeKey:e.meta.scopeKey??"table"},{default:()=>[t(l,i)(x,{key:r.uid,element:r},null)]})},fixed:"left"}),e.meta.index&&h.push({title:"\u5E8F\u53F7",key:"index",width:54,align:"center",rowSpan:o=>K?K(o):1,render:(o,n)=>(R?R(o):n)+1,fixed:"left"});const v=o=>{const n=[];return o.forEach((r,A)=>{var S,X,B;let F;if((a?r.show:(B=F=(X=(S=ce.value)==null?void 0:S[r.uid])==null?void 0:X.call(S))==null?void 0:B.show)===!1)return;const L=a?e.meta.titleIndex:r.titleIndex,U=a?e.meta.slotIndex:r.slotIndex,V={ellipsis:r.ellipsis?{}:void 0,...r,...F,title:L===void 0?r.title:()=>H(t(l,i)(x,{element:s[L]},null),r,A),render:U===void 0?void 0:(fe,ge)=>H(t(l,i)($,{data:{row:fe,rowIndex:ge},scopeKey:e.meta.scopeKey??"table"},{default:()=>[t(l,i)(x,{element:_[U]},null)]}),r,A)};r.children&&(V.children=v(r.children)),n.push(V)}),n};return h.concat(v(a?de.value:e.meta.columns))});const I=t(d,p)(()=>e.meta.pagination),{tableRef:me,pageSizesRef:N}=t(b,ne)((q=I.value)==null?void 0:q.onUpdatePageSize);t(l,ae)(N,a=>{c[`${u}Ready`]=!!a,c[`${u}DefaultPageSize`]=a==null?void 0:a[0]});const pe=t(l,k)(()=>{const a=I.value;return a?{pageSlot:7,showSizePicker:!0,pageSizes:(e.meta.flexHeight?N.value:null)??[10,20,50,100],prefix:s=>t(l,i)(t(l,Y),null,[t(l,z)("\u5171"),t(l,i)("span",{class:"un-color-primary un-mx-4px"},[s.itemCount]),t(l,z)("\u6761")]),...a}:void 0}),O=a=>a[e.meta.rowKey||"id"],he=t(d,p)(()=>e.meta.props),w=(G=D(e.meta.rowSpanKeys))==null?void 0:G();if(w!=null&&w.length){const{columnsRef:a,dataRef:s,rowSpan:m,getIndex:_,getGroup:h,updateCheckedRowKeys:v}=t(b,re)(g,y,w,{rowKey:O,mergeSelection:e.meta.checkable&&e.meta.mergeSelection});g=a,y=s,C=v,c[`${u}GetGroup`]=h,e.meta.mergeIndex&&(K=m,R=_)}const xe=(a,s,m)=>{C?c[`${u}CheckedRowkeys`]=C(a,c[`${u}CheckedRowkeys`],m):c[`${u}CheckedRowkeys`]=a},ye=t(b,oe)(g);return()=>t(l,i)(t(Q,Z),t(l,P)({ref:e.meta.flexHeight&&I.value?me:void 0,size:e.meta.size,columns:g.value,data:y.value||[],loading:se.value,flexHeight:e.meta.flexHeight,striped:e.meta.striped,pagination:pe.value,scrollX:ye.value,checkedRowKeys:c[`${u}CheckedRowkeys`],onUpdateCheckedRowKeys:xe,rowKey:O,singleLine:!e.meta.singleLine,singleColumn:!(e.meta.singleColumn??!0),remote:!0},he.value),null)}})});export{J as DataTable,ve as __tla};
