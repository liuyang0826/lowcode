import{b as N,a as d}from"./federation-shared-1482b2fe.js";let H,J,K,ae=(async()=>{const Y={black:"#000",silver:"#C0C0C0",gray:"#808080",white:"#FFF",maroon:"#800000",red:"#F00",purple:"#800080",fuchsia:"#F0F",green:"#008000",lime:"#0F0",olive:"#808000",yellow:"#FF0",navy:"#000080",blue:"#00F",teal:"#008080",aqua:"#0FF",transparent:"#0000"},$="^\\s*",x="\\s*$",g="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",w="([0-9A-Fa-f])",y="([0-9A-Fa-f]{2})",Q=new RegExp(`${$}rgb\\s*\\(${g},${g},${g}\\)${x}`),S=new RegExp(`${$}rgba\\s*\\(${g},${g},${g},${g}\\)${x}`),U=new RegExp(`${$}#${w}${w}${w}${x}`),ee=new RegExp(`${$}#${y}${y}${y}${x}`),re=new RegExp(`${$}#${w}${w}${w}${w}${x}`),te=new RegExp(`${$}#${y}${y}${y}${y}${x}`);function p(r){return parseInt(r,16)}function R(r){try{let e;if(e=ee.exec(r))return[p(e[1]),p(e[2]),p(e[3]),1];if(e=Q.exec(r))return[F(e[1]),F(e[5]),F(e[9]),1];if(e=S.exec(r))return[F(e[1]),F(e[5]),F(e[9]),_(e[13])];if(e=U.exec(r))return[p(e[1]+e[1]),p(e[2]+e[2]),p(e[3]+e[3]),1];if(e=te.exec(r))return[p(e[1]),p(e[2]),p(e[3]),_(p(e[4])/255)];if(e=re.exec(r))return[p(e[1]+e[1]),p(e[2]+e[2]),p(e[3]+e[3]),_(p(e[4]+e[4])/255)];if(r in Y)return R(Y[r]);throw new Error(`[seemly/rgba]: Invalid color value ${r}.`)}catch(e){throw e}}function _(r){const e=Math.round(Number(r)*100)/100;return e>1?1:e<0?0:e}function F(r){const e=Math.round(Number(r));return e>255?255:e<0?0:e}let k,b,E,h,j,A,q,P,D,G,I,L,V,C,W,B,O,T,f,Z,M,X;k=await N("zrender"),b=await N("@rdx/shared"),E=await N("@lowcode-fe/designer/common"),h=await N("vue"),j="mergeProps",A="createVNode",q="useExprValue",P="Graphic",D="Circle",G="Polyline",I="defineComponent",L="ref",V="watchEffect",C="computed",W="colors",B="useZRenderGraphicLogic",O="useCoordinateInst",T=r=>new Promise((e,m)=>{const u=new Image;u.onload=()=>e(u),u.onerror=()=>m(u),u.src=r}),f=(r,e,m,u,c,a,o,l,n,i)=>{const t=r.getContext("2d");return n!==void 0&&i!==void 0?t==null||t.drawImage(e,o,l,n,i,m,u,c,a):n!==void 0?t==null||t.drawImage(e,o,l,n,a/c*n,m,u,c,a):i!==void 0?t==null||t.drawImage(e,o,l,c/a*i,i,m,u,c,a):t==null||t.drawImage(e,m,u,c,a),r},Z=async r=>{var z;const{image:e,dx:m=0,dy:u=0,dw:c,dh:a,sx:o=0,sy:l=0,sw:n,sh:i}=r,t=await T(e);if(c!==void 0&&a!==void 0){const s=document.createElement("canvas");return s.width=c,s.height=a,f(s,t,m,u,c,a,o,l,n,i)}if(c!==void 0){const s=document.createElement("canvas");s.width=c;const v=s.height=c/t.width*t.height;return f(s,t,m,u,c,v,o,l,n,i)}if(a!==void 0){const s=document.createElement("canvas"),v=s.width=a/t.height*t.width;return s.height=a,f(s,t,m,u,v,a,o,l,n,i)}if(n!==void 0&&i!==void 0){const s=document.createElement("canvas");return s.width=n,s.height=i,(z=s.getContext("2d"))==null||z.drawImage(t,m,u,n,i,o,l,n,i),f(s,t,m,u,n,i,o,l,n,i)}if(n!==void 0){const s=document.createElement("canvas");s.width=n;const v=s.height=n/t.width*t.height;return f(s,t,m,u,n,v,o,l,n,v)}if(i!==void 0){const s=document.createElement("canvas"),v=s.width=i/t.height*t.width;return s.height=i,f(s,t,m,u,v,i,o,l,v,i)}return t},J=d(h,I)({props:{meta:{type:Object,required:!0}},setup(r){const e=d(E,q)(()=>r.meta.points),m=d(E,q)(()=>r.meta.image),u=d(h,L)(),c=d(E,q)(()=>r.meta.props);return d(h,V)(async()=>{const a=r.meta.isExprImage?m.value:r.meta.image;a?u.value=await Z({...r.meta,image:a}):u.value=void 0}),()=>{var a,o;return d(h,A)(d(b,P),d(h,j)({graphic:d(k,G)},c.value??{},{shape:{points:e.value,smooth:r.meta.smooth,...((a=c.value)==null?void 0:a.shape)??{}},style:{lineWidth:r.meta.lineWidth??1,stroke:u.value?{image:u.value}:r.meta.strokeColor??d(b,W).primaryColor,lineDash:r.meta.lineDash,fill:r.meta.fill,fillOpacity:r.meta.fillOpacity,...((o=c.value)==null?void 0:o.style)??{}}}),null)}}}),M=(r,e)=>Math.sqrt(Math.pow(e[0]-r[0],2)+Math.pow(e[1]-r[1],2)),X=d(h,I)({props:{index:{type:Number,required:!0},total:{type:Number,required:!0},radius:{type:Number,required:!0},delay:{type:Number,required:!0},z:{type:Number,required:!0},color:{type:Array,required:!0},path:{type:Array,required:!0},whens:{type:Array,required:!0},opacity:Boolean},setup(r){return d(b,B)(()=>{const[e,m,u,c]=r.color,a=new(d(k,D))({shape:{r:r.radius},style:{fill:`rgba(${e}, ${m}, ${u}, ${r.opacity?c-c/r.total*r.index:1})`},z:r.z}),o=a.animate("shape",!0).delay(r.index*r.delay);return r.path.forEach(([l,n],i)=>{o.when(r.whens[i],{cx:l,cy:n})}),o.done(()=>{a.__zr.remove(a)}).start(),a}),()=>null}}),K=d(h,I)({inheritAttrs:!1,props:{meta:{type:Object,required:!0}},setup(r){const e=d(E,q)(()=>r.meta.points),m=d(b,O)(),u=d(h,C)(()=>{const a=m.value;return a?Math.max(a.coordX(r.meta.speed??100)-a.coordX(0),a.coordY(r.meta.speed??100)-a.coordY(0))/1e3:0}),c=d(h,C)(()=>{var o;if(!m.value)return[];const a=u.value;return((o=e.value)==null?void 0:o.reduce((l,n,i,t)=>(i===0?l.push(0):l.push(l[i-1]+M(t[i-1],n)/a),l),[]))??[]});return()=>{const a=r.meta.radius??2,o=a/u.value*(r.meta.multiple??1.25),l=R(r.meta.color??"#FF0000FF");return e.value.length?Array.from({length:r.meta.items??40}).map((n,i,{length:t})=>d(h,A)(X,{index:i,key:i,path:e.value,whens:c.value??[],total:t,radius:a,delay:o,color:l,z:r.meta.z??10,opacity:!0},null)):null}}}),H=d(h,I)({inheritAttrs:!1,props:{meta:{type:Object,required:!0}},setup(r){const e=d(E,q)(()=>r.meta.points),m=d(b,O)(),u=d(h,C)(()=>{const o=m.value;return o?Math.max(o.coordX(r.meta.speed??50)-o.coordX(0),o.coordY(r.meta.speed??50)-o.coordY(0))/1e3:0}),c=d(h,C)(()=>{var l;if(!m.value)return[];const o=u.value;return((l=e.value)==null?void 0:l.reduce((n,i,t,z)=>(t===0?n.push(0):n.push(n[t-1]+M(z[t-1],i)/o),n),[]))??[]}),a=d(h,C)(()=>{var l;if(!((l=e.value)!=null&&l.length))return 0;let o=0;for(let n=1;n<e.value.length;n+=1)o+=M(e.value[n-1],e.value[n]);return o});return()=>{var t;const o=r.meta.radius??2,l=R(r.meta.color??"#FFFFFFFF"),n=Math.ceil(a.value/(r.meta.gap??28)),i=(((t=c.value)==null?void 0:t.at(-1))??0)/n;return e.value.length?Array.from({length:n}).map((z,s,{length:v})=>d(h,A)(X,{index:s,key:s,path:e.value,whens:c.value??[],total:v,radius:o,delay:i,color:l,z:r.meta.z??10},null)):null}}})})();export{H as Flow,J as Line,K as Trailing,ae as __tla};
