import{a as e,b as C}from"./federation-shared-1482b2fe.js";import{u as $,__tla as _r}from"./Scoped-92d0b990.js";let mo,Tr=Promise.all([(()=>{try{return _r}catch{}})()]).then(async()=>{const yt=await C("vue"),fo="createElementVNode",vo="openBlock",xo="createElementBlock",go="defineComponent",wo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},yo=e(yt,fo)("path",{d:"M262.29 192.31a64 64 0 1 0 57.4 57.4a64.13 64.13 0 0 0-57.4-57.4zM416.39 256a154.34 154.34 0 0 1-1.53 20.79l45.21 35.46a10.81 10.81 0 0 1 2.45 13.75l-42.77 74a10.81 10.81 0 0 1-13.14 4.59l-44.9-18.08a16.11 16.11 0 0 0-15.17 1.75A164.48 164.48 0 0 1 325 400.8a15.94 15.94 0 0 0-8.82 12.14l-6.73 47.89a11.08 11.08 0 0 1-10.68 9.17h-85.54a11.11 11.11 0 0 1-10.69-8.87l-6.72-47.82a16.07 16.07 0 0 0-9-12.22a155.3 155.3 0 0 1-21.46-12.57a16 16 0 0 0-15.11-1.71l-44.89 18.07a10.81 10.81 0 0 1-13.14-4.58l-42.77-74a10.8 10.8 0 0 1 2.45-13.75l38.21-30a16.05 16.05 0 0 0 6-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 0 0-6.07-13.94l-38.19-30A10.81 10.81 0 0 1 49.48 186l42.77-74a10.81 10.81 0 0 1 13.14-4.59l44.9 18.08a16.11 16.11 0 0 0 15.17-1.75A164.48 164.48 0 0 1 187 111.2a15.94 15.94 0 0 0 8.82-12.14l6.73-47.89A11.08 11.08 0 0 1 213.23 42h85.54a11.11 11.11 0 0 1 10.69 8.87l6.72 47.82a16.07 16.07 0 0 0 9 12.22a155.3 155.3 0 0 1 21.46 12.57a16 16 0 0 0 15.11 1.71l44.89-18.07a10.81 10.81 0 0 1 13.14 4.58l42.77 74a10.8 10.8 0 0 1-2.45 13.75l-38.21 30a16.05 16.05 0 0 0-6.05 14.08c.33 4.14.55 8.3.55 12.47z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Eo=[yo],ko=e(yt,go)({name:"SettingsOutline",render:function(t,s){return e(yt,vo)(),e(yt,xo)("svg",wo,Eo)}}),Be=await C("vue"),ze="nextTick",L=t=>(t==null?void 0:t.type)==="line",B=t=>(t==null?void 0:t.type)==="rect",R=t=>(t==null?void 0:t.type)==="point";function M(t,s,i){return Math.abs(s-i)<4/t.scale}function ee(t,s,i){t.curElement=s,t.focus=i,t.focusIndex=void 0,t.selectElements=new Set([s])}function ut(t,s="select"){t.mode=s,t.curElement=void 0,t.isDrawing=void 0,t.focus=void 0,t.focusIndex=void 0,t.pointIndex=void 0,t.selectElements=new Set,t.isSelecting=!1}let Le=0;function Z(){return Le+=1}function bo(t){Le=t}const Et=[];let ne=!1;const F=(t,s)=>{ne||(Et.unshift(s),e(Be,ze)(()=>{if(!Et.length)return;const i=Et.slice();Et.length=0,t.rollbackStack.push(()=>{i.forEach(m=>m())}),t.rollbackStack.length>100&&t.rollbackStack.shift()}))},oe=t=>{const s=t.rollbackStack.pop();s&&(ne=!0,s(),e(Be,ze)(()=>ne=!1))},Ve=["curElement","selectElements","focus","focusIndex","pointIndex","isDrawing","mode","orthogonal","pickup"],st=t=>Ve.map(s=>t[s]),rt=(t,s)=>{Ve.forEach((i,m)=>{t[i]=s[m]})},Io=(t,s)=>{const i=[],m=new Map;return t.forEach(l=>{m.has(l[s])||(m.set(l[s],i.length),i.push([])),i[m.get(l[s])].push(l)}),i.flat()},No=t=>{t.sort((a,x)=>(B(a)?a.x:a.location[0])-(B(x)?x.x:x.location[0]));const s=t.map(a=>B(a)?a.width:0),i=Math.max(...t.map(a=>B(a)?a.x+a.width:a.location[0])),m=Math.min(...t.map(a=>B(a)?a.x:a.location[0])),l=s.reduce((a,x)=>a+x,0),o=i-m-l;if(o<0)return!1;const n=o/(t.length-1);let r=B(t[0])?t[0].x:t[0].location[0];return t.forEach((a,x)=>{B(a)?a.x=r:a.location[0]=r,r+=s[x]+n}),!0},Mo=t=>{t.sort((a,x)=>(B(a)?a.y:a.location[1])-(B(x)?x.y:x.location[1]));const s=t.map(a=>B(a)?a.height:0),i=Math.max(...t.map(a=>B(a)?a.y+a.height:a.location[1])),m=Math.min(...t.map(a=>B(a)?a.y:a.location[1])),l=s.reduce((a,x)=>a+x,0),o=i-m-l;if(o<0)return!1;const n=o/(t.length-1);let r=B(t[0])?t[0].y:t[0].location[1];return t.forEach((a,x)=>{B(a)?a.y=r:a.location[1]=r,r+=s[x]+n}),!0},W=(t,s)=>t[0]===s[0]&&t[1]===s[1];var Co=typeof global=="object"&&global&&global.Object===Object&&global;const Bo=Co;var zo=typeof self=="object"&&self&&self.Object===Object&&self,Lo=Bo||zo||Function("return this")();const Se=Lo;var Vo=Se.Symbol;const kt=Vo;var De=Object.prototype,So=De.hasOwnProperty,Do=De.toString,dt=kt?kt.toStringTag:void 0;function jo(t){var s=So.call(t,dt),i=t[dt];try{t[dt]=void 0;var m=!0}catch{}var l=Do.call(t);return m&&(s?t[dt]=i:delete t[dt]),l}var Oo=Object.prototype,Fo=Oo.toString;function Ho(t){return Fo.call(t)}var Ao="[object Null]",Po="[object Undefined]",je=kt?kt.toStringTag:void 0;function Uo(t){return t==null?t===void 0?Po:Ao:je&&je in Object(t)?jo(t):Ho(t)}function $o(t){return t!=null&&typeof t=="object"}var Ro="[object Symbol]";function _o(t){return typeof t=="symbol"||$o(t)&&Uo(t)==Ro}var To=/\s/;function Wo(t){for(var s=t.length;s--&&To.test(t.charAt(s)););return s}var qo=/^\s+/;function Ko(t){return t&&t.slice(0,Wo(t)+1).replace(qo,"")}function ie(t){var s=typeof t;return t!=null&&(s=="object"||s=="function")}var Oe=0/0,Yo=/^[-+]0x[0-9a-f]+$/i,Xo=/^0b[01]+$/i,Go=/^0o[0-7]+$/i,Jo=parseInt;function Fe(t){if(typeof t=="number")return t;if(_o(t))return Oe;if(ie(t)){var s=typeof t.valueOf=="function"?t.valueOf():t;t=ie(s)?s+"":s}if(typeof t!="string")return t===0?t:+t;t=Ko(t);var i=Xo.test(t);return i||Go.test(t)?Jo(t.slice(2),i?2:8):Yo.test(t)?Oe:+t}var Qo=function(){return Se.Date.now()};const le=Qo;var Zo="Expected a function",ti=Math.max,ei=Math.min;function He(t,s,i){var m,l,o,n,r,a,x=0,k=!1,h=!1,u=!0;if(typeof t!="function")throw new TypeError(Zo);s=Fe(s)||0,ie(i)&&(k=!!i.leading,h="maxWait"in i,o=h?ti(Fe(i.maxWait)||0,s):o,u="trailing"in i?!!i.trailing:u);function b(f){var y=m,S=l;return m=l=void 0,x=f,n=t.apply(S,y),n}function w(f){return x=f,r=setTimeout(p,s),k?b(f):n}function g(f){var y=f-a,S=f-x,O=s-y;return h?ei(O,o-S):O}function z(f){var y=f-a,S=f-x;return a===void 0||y>=s||y<0||h&&S>=o}function p(){var f=le();if(z(f))return N(f);r=setTimeout(p,g(f))}function N(f){return r=void 0,u&&m?b(f):(m=l=void 0,n)}function d(){r!==void 0&&clearTimeout(r),x=0,m=a=l=r=void 0}function c(){return r===void 0?n:N(le())}function v(){var f=le(),y=z(f);if(m=arguments,l=this,a=f,y){if(r===void 0)return w(a);if(h)return clearTimeout(r),r=setTimeout(p,s),b(a)}return r===void 0&&(r=setTimeout(p,s)),n}return v.cancel=d,v.flush=c,v}const ni=await C("zrender"),Ae=await C("@rdx/shared"),bt=await C("vue"),oi="createVNode",ii="Graphic",li="Polyline",ai="defineComponent",si="computed",ri="inject",ci="useCoordinateInst",ui=e(bt,ai)({props:{x:Number,y:Number},setup(t){const s=e(Ae,ci)(),i=e(bt,si)(()=>{const l=s.value;if(!l)return;const o=t.x?[[l.coordX(t.x),0],[l.coordX(t.x),l.top+l.height]]:[[0,l.coordY(t.y)],[l.left+l.width,l.coordY(t.y)]];return{points:l?o.map(n=>n.map(r=>Math.floor(r)+.5)):[]}}),m=e(bt,ri)("state");return()=>e(bt,oi)(e(Ae,ii),{graphic:e(ni,li),shape:i.value,style:{lineDash:[4,8],stroke:m.color},silent:!0},null)}}),di=await C("zrender"),Pe=await C("@rdx/shared"),ht=await C("vue"),hi="createVNode",pi="Graphic",mi="Polyline",fi="defineComponent",vi="inject",Ue="computed",xi="useCoordinateInst",gi=e(ht,fi)({props:{item:{type:Object,required:!0}},setup(t){const s=e(Pe,xi)(),i=e(ht,vi)("state"),m=e(ht,Ue)(()=>{const o=s.value;if(!o)return[];const{x:n,y:r,width:a,height:x}=t.item;return[[n,r],[n+a,r],[n+a,r+x],[n,r+x]].map(k=>o.coord(k).map(h=>Math.floor(h)+.5))}),l=e(ht,Ue)(()=>({points:m.value.concat([m.value[0]])}));return()=>e(ht,hi)(e(Pe,pi),{graphic:e(di,mi),shape:l.value,style:{stroke:t.item.color||i.color,lineWidth:1,lineDash:"dashed"},z:100,silent:!0},null)}});function wi({x:t,y:s,state:i}){const m=i.elements,l=i.curElement;let o,n;for(let r=0;r<m.length&&!(o!==void 0&&n!==void 0);r+=1){const a=m[r];if(!i.selectElements.has(a)){if(B(a))M(i,a.x,t)?o=a.x:M(i,a.x,t+l.width/2)?o=a.x-l.width/2:M(i,a.x,t+l.width)?o=a.x-l.width:M(i,a.x+a.width/2,t)?o=a.x+a.width/2:M(i,a.x+a.width/2,t+l.width/2)?o=a.x+a.width/2-l.width/2:M(i,a.x+a.width/2,t+l.width)?o=a.x+a.width/2-l.width:M(i,a.x+a.width,t)?o=a.x+a.width:M(i,a.x+a.width,t+l.width/2)?o=a.x+a.width-l.width/2:M(i,a.x+a.width,t+l.width)&&(o=a.x+a.width-l.width),M(i,a.y,s)?n=a.y:M(i,a.y,s+l.height/2)?n=a.y-l.height/2:M(i,a.y,s+l.height)?n=a.y-l.height:M(i,a.y+a.height/2,s)?n=a.y+a.height/2:M(i,a.y+a.height/2,s+l.height/2)?n=a.y+a.height/2-l.height/2:M(i,a.y+a.height/2,s+l.height)?n=a.y+a.height/2-l.height:M(i,a.y+a.height,s)?n=a.y+a.height:M(i,a.y+a.height,s+l.height/2)?n=a.y+a.height-l.height/2:M(i,a.y+a.height,s+l.height)&&(n=a.y+a.height-l.height);else if(L(a))for(let x=0;x<a.points.length&&!(o!==void 0&&n!==void 0);x+=1){const k=a.points[x];M(i,k[0],t)?o=k[0]:M(i,k[0],t+l.width/2)?o=k[0]-l.width/2:M(i,k[0],t+l.width)&&(o=k[0]-l.width),M(i,k[1],s)?n=k[1]:M(i,k[1],s+l.height/2)?n=k[1]-l.height/2:M(i,k[1],s+l.height)&&(n=k[1]-l.height)}else if(R(a)){const x=a.location;M(i,x[0],t)?o=x[0]:M(i,x[0],t+l.width/2)?o=x[0]-l.width/2:M(i,x[0],t+l.width)&&(o=x[0]-l.width),M(i,x[1],s)?n=x[1]:M(i,x[1],s+l.height/2)?n=x[1]-l.height/2:M(i,x[1],s+l.height)&&(n=x[1]-l.height)}}}return[o??t,n??s]}const yi=await C("vue"),Ei="inject";function ae(t){const s=e(yi,Ei)("state");let i=!1;return{handleClick:(m,l)=>{if(m.event.stopPropagation(),s.focusIndex=void 0,s.pointIndex=void 0,s.focus=void 0,i||s.mode!=="select")return;const o=t();s.focusIndex=l,s.pointIndex=void 0,s.focus=void 0,m.event.ctrlKey||(s.selectElements=new Set),s.selectElements.has(o)?s.selectElements.delete(o):s.selectElements.add(o),s.curElement=o},handleMousedown:(m,l)=>{m.event.stopPropagation(),i=!1;const o=t();if(s.focusIndex=void 0,s.pointIndex=void 0,s.focus=void 0,s.mode!=="select"||!s.selectElements.has(o))return;s.focusIndex=l,s.pointIndex=void 0,s.curElement=o,s.isDrawing=!0;const n=Array.from(s.selectElements),r=B(o)?o.x-s.location[0]:0,a=B(o)?o.y-s.location[1]:0,x=L(o)?o.points[0][0]-s.location[0]:0,k=L(o)?o.points[0][1]-s.location[1]:0,h=s.curElement,[u,b]=R(h)?[...h.location]:B(h)?[h.x,h.y]:[...h.points[0]],w=n.map(p=>R(p)?{...p,location:[...p.location]}:B(p)?{...p}:{...p,points:p.points.map(N=>[...N])}),g=()=>{i=!0,s.canBlur=!1;let p=0,N=0;if(B(h)){if(s.pickup){const[d,c]=wi({x:s.location[0]+r,y:s.location[1]+a,state:s});h.x=d,h.y=c}else h.x=s.location[0]+r,h.y=s.location[1]+a;p=h.x-u,N=h.y-b}else L(h)?(p=s.location[0]-u+x,N=s.location[1]-b+k):(p=s.location[0]-u,N=s.location[1]-b);n.forEach((d,c)=>{const v=d.location;if(B(d)){if(m.event.ctrlKey&&s.selectElements.size>1&&L(h))return;d!==s.curElement&&(d.x=w[c].x+p,d.y=w[c].y+N)}else if(R(d)){if(m.event.ctrlKey&&s.selectElements.size>1&&L(h))return;v[0]=w[c].location[0]+p,v[1]=w[c].location[1]+N}else if(s.selectElements.size===1&&!m.event.ctrlKey)for(let f=s.focusIndex;f<s.focusIndex+2;f+=1){const y=d.points[f];y[0]=w[c].points[f][0]+p,y[1]=w[c].points[f][1]+N}else d.points.forEach((f,y)=>{f[0]=w[c].points[y][0]+p,f[1]=w[c].points[y][1]+N})})},z=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",z),s.isDrawing=!1,i&&F(s,()=>{n.forEach((p,N)=>{R(p)?(p.location[0]=w[N].location[0],p.location[1]=w[N].location[1]):B(p)?(p.x=w[N].x,p.y=w[N].y):p.points.forEach((d,c)=>{d[0]=w[N].points[c][0],d[1]=w[N].points[c][1]})})})};document.addEventListener("mousemove",g),document.addEventListener("mouseup",z)}}}const se=await C("zrender"),It=await C("@rdx/shared"),X=await C("vue"),$e="Fragment",pt="createVNode",re="Graphic",Re="Circle",ki="Polyline",bi="defineComponent",Ii="inject",Ni="computed",Mi="useCoordinateInst",Ci=e(X,bi)({props:{item:{type:Object,required:!0},index:{type:Number,required:!0}},setup(t){const s=e(It,Mi)(),i=e(X,Ii)("state"),m=e(X,Ni)(()=>{const a=s.value;return a?t.item.points.map(x=>a.coord(x).map(k=>Math.floor(k)+.5)):[]}),{handleClick:l,handleMousedown:o}=ae(()=>t.item);let n=!1;const r=(a,x)=>{if(i.selectElements.size>1){o(a,x);return}n=!1,a.event.stopPropagation(),ee(i,t.item,"focusLineVertex"),i.focusIndex=void 0,i.pointIndex=x,i.isDrawing=!0;const k=i.curElement.points[i.pointIndex],[h,u]=k,b=()=>{n=!0,i.canBlur=!1,k[0]=i.location[0],k[1]=i.location[1]},w=()=>{i.isDrawing=!1,document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",w),n&&F(i,()=>{k[0]=h,k[1]=u})};document.addEventListener("mousemove",b),document.addEventListener("mouseup",w)};return()=>{var x;const a=i.selectElements.has(t.item);return e(X,pt)(e(X,$e),null,[m.value.map((k,h,u)=>h!==u.length-1?e(X,pt)(e(It,re),{key:h,graphic:e(se,ki),shape:{points:[k,u[h+1]]},style:{stroke:a&&i.focusIndex===h&&i.selectElements.size===1?"#f00":t.item.color||i.color},cursor:a&&i.mode!=="line"?"move":"pointer",onmousedown:b=>o(b,h),onclick:b=>l(b,h),z:a?10:void 0,silent:i.mode!=="select"},null):null),(x=m.value)==null?void 0:x.map((k,h,{length:u})=>a?e(X,pt)(e(X,$e),null,[e(X,pt)(e(It,re),{key:`point-${h}`,graphic:e(se,Re),shape:{cx:k[0],cy:k[1],r:3},style:{fill:h===0?"#f00":h===u-1?"#0f0":t.item.color||i.color},cursor:a&&i.mode!=="line"?"move":"pointer",onmousedown:b=>r(b,h),onclick:b=>{i.isDrawing||b.event.stopPropagation()},z:a?h===0?101:100:10,silent:i.mode!=="select"},null),i.pointIndex===h&&i.mode==="select"?e(X,pt)(e(It,re),{graphic:e(se,Re),shape:{cx:k[0],cy:k[1],r:6},style:{stroke:t.item.color||i.color,fill:"none"},cursor:"move",onmousedown:b=>r(b,h),z:a?100:10,silent:!0},null):null]):null)])}}}),_e=await C("zrender"),ce=await C("@rdx/shared"),tt=await C("vue"),Bi="Fragment",ue="createVNode",Te="Graphic",We="Circle",zi="defineComponent",Li="inject",qe="computed",Vi="useCoordinateInst",Si=e(tt,zi)({props:{item:{type:Object,required:!0},index:{type:Number,required:!0}},setup(t){const s=e(ce,Vi)(),i=e(tt,Li)("state"),m=e(tt,qe)(()=>{const r=s.value;if(r)return{cx:~~r.coordX(t.item.location[0])+.5,cy:~~r.coordY(t.item.location[1])+.5,r:4}}),l=e(tt,qe)(()=>{const r=m.value;if(r)return{...r,r:8}}),{handleClick:o,handleMousedown:n}=ae(()=>t.item);return()=>{const r=i.selectElements.has(t.item);return e(tt,ue)(e(tt,Bi),null,[e(tt,ue)(e(ce,Te),{graphic:e(_e,We),shape:m.value,style:{fill:t.item.color||i.color},cursor:r&&i.mode!=="line"?"move":"pointer",onmousedown:n,onclick:o,z:r?100:10,silent:i.mode!=="select"},null),r?e(tt,ue)(e(ce,Te),{graphic:e(_e,We),shape:l.value,style:{stroke:t.item.color||i.color,fill:"none"},cursor:r&&i.mode!=="line"?"move":"pointer",onmousedown:n,z:r?100:10,silent:!0},null):null])}}}),Nt=await C("@rdx/shared"),Mt="isEqual";function Di({x:t,y:s,width:i,height:m,state:l}){let o,n,r,a;const x=l.elements,k=l.focusIndex,h=l.curElement;return k===0?(x.forEach(u=>{if(B(u)){if(e(Nt,Mt)(h,u,!0))return;M(l,u.y,h.y)?n=u.y:M(l,u.y+u.height,h.y)&&(n=u.y+u.height)}}),n!==void 0&&(a=m+s-n)):k===1?x.forEach(u=>{if(B(u)){if(e(Nt,Mt)(h,u,!0))return;M(l,u.x,h.x+h.width)?r=u.x-h.x:M(l,u.x+u.width,h.x+h.width)&&(r=u.x+u.width-h.x)}}):k===2?x.forEach(u=>{if(B(u)){if(e(Nt,Mt)(h,u,!0))return;M(l,u.y,h.y+h.height)?a=u.y-h.y:M(l,u.y+u.height,h.y+h.height)&&(a=u.y+u.height-h.y)}}):k===3&&(x.forEach(u=>{if(B(u)){if(e(Nt,Mt)(h,u,!0))return;M(l,u.x,h.x)?o=u.x:M(l,u.x+u.width,h.x)&&(o=u.x+u.width)}}),o!==void 0&&(r=i+t-o)),r!==void 0&&(r=Math.max(r,0)),a!==void 0&&(a=Math.max(a,0)),[o,n,r,a]}const Ct=await C("@rdx/shared"),Bt="isEqual";function ji({x:t,y:s,width:i,height:m,state:l}){let o,n,r,a;const x=l.elements,k=l.focusIndex,h=l.curElement;return k===0?(x.forEach(u=>{if(B(u)){if(e(Ct,Bt)(h,u))return;M(l,u.x,h.x)?o=u.x:M(l,u.x+u.width,h.x)&&(o=u.x+u.width),M(l,u.y,h.y)?n=u.y:M(l,u.y+u.height,h.y)&&(n=u.y+u.height)}}),o!==void 0&&(r=i+t-o),n!==void 0&&(a=m+s-n)):k===1?(x.forEach(u=>{if(B(u)){if(e(Ct,Bt)(h,u,!0))return;M(l,u.x,h.x+h.width)?r=u.x-h.x:M(l,u.x+u.width,h.x+h.width)&&(r=u.x+u.width-h.x),M(l,u.y,h.y)?n=u.y:M(l,u.y+u.height,h.y)&&(n=u.y+u.height)}}),n!==void 0&&(a=m+s-n)):k===2?x.forEach(u=>{if(B(u)){if(e(Ct,Bt)(h,u,!0))return;M(l,u.x,h.x+h.width)?r=u.x-h.x:M(l,u.x+u.width,h.x+h.width)&&(r=u.x+u.width-h.x),M(l,u.y,h.y+h.height)?a=u.y-h.y:M(l,u.y+u.height,h.y+h.height)&&(a=u.y+u.height-h.y)}}):k===3&&(x.forEach(u=>{if(B(u)){if(e(Ct,Bt)(h,u,!0))return;M(l,u.x,h.x)?o=u.x:M(l,u.x+u.width,h.x)&&(o=u.x+u.width),M(l,u.y,h.y+h.height)?a=u.y-h.y:M(l,u.y+u.height,h.y+h.height)&&(a=u.y+u.height-h.y)}}),o!==void 0&&(r=i+t-o)),r!==void 0&&(r=Math.max(r,0)),a!==void 0&&(a=Math.max(a,0)),[o,n,r,a]}const de=await C("zrender"),zt=await C("@rdx/shared"),Q=await C("vue"),Oi="Fragment",Lt="createVNode",he="Graphic",Fi="Circle",Ke="Polyline",Hi="defineComponent",Ai="inject",Ye="computed",Pi="useCoordinateInst",Ui=e(Q,Hi)({props:{item:{type:Object,required:!0},index:{type:Number,required:!0}},setup(t){const s=e(zt,Pi)(),i=e(Q,Ai)("state"),m=e(Q,Ye)(()=>{const h=s.value;if(!h)return[];const{x:u,y:b,width:w,height:g}=t.item;return[[u,b],[u+w,b],[u+w,b+g],[u,b+g]].map(z=>h.coord(z).map(p=>Math.floor(p)+.5))}),l=e(Q,Ye)(()=>({points:m.value.concat([m.value[0]])})),{handleClick:o,handleMousedown:n}=ae(()=>t.item),r=(h,u)=>{i.isDrawing||h.event.stopPropagation(),ee(i,t.item,"focusRectVertex"),i.focusIndex=u,i.isDrawing=!0;const{x:b,y:w,width:g,height:z}=t.item,p=()=>{i.canBlur=!1;const d=t.item,{x:c,y:v,width:f,height:y}=d;if(u===0?(d.x=i.location[0],d.y=i.location[1],d.width+=c-d.x,d.height+=v-d.y):u===1?(d.width=i.location[0]-c,d.y=i.location[1],d.height+=v-d.y):u===2?(d.width=i.location[0]-d.x,d.height=i.location[1]-d.y):u===3&&(d.x=i.location[0],d.height=i.location[1]-d.y,d.width+=c-d.x),d.width=Math.max(d.width,0),d.height=Math.max(d.height,0),i.pickup){const S=ji({x:c,y:v,width:f,height:y,state:i});S[0]!==void 0&&(t.item.x=S[0]),S[1]!==void 0&&(t.item.y=S[1]),S[2]!==void 0&&(t.item.width=S[2]),S[3]!==void 0&&(t.item.height=S[3])}},N=()=>{i.isDrawing=!1,document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",N),F(i,()=>{t.item.x=b,t.item.y=w,t.item.width=g,t.item.height=z})};document.addEventListener("mousemove",p),document.addEventListener("mouseup",N)},a=(h,u)=>{i.isDrawing||h.event.stopPropagation();const b=t.item;if(i.curElement!==b)return;ee(i,b,"focusRectSide"),i.focusIndex=u,i.isDrawing=!0;const{x:w,y:g,width:z,height:p}=t.item,N=()=>{i.canBlur=!1;const c=t.item,{x:v,y:f,width:y,height:S}=c;if(u===0?(c.y=i.location[1],c.height+=f-c.y):u===1?c.width=i.location[0]-v:u===2?c.height=i.location[1]-f:u===3&&(c.x=i.location[0],c.width+=v-c.x),c.width=Math.max(c.width,0),c.height=Math.max(c.height,0),i.pickup){const O=Di({x:v,y:f,width:y,height:S,state:i});O[0]!==void 0&&(t.item.x=O[0]),O[1]!==void 0&&(t.item.y=O[1]),O[2]!==void 0&&(t.item.width=O[2]),O[3]!==void 0&&(t.item.height=O[3])}},d=()=>{i.isDrawing=!1,document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",d),F(i,()=>{t.item.x=w,t.item.y=g,t.item.width=z,t.item.height=p})};document.addEventListener("mousemove",N),document.addEventListener("mouseup",d)},x=["n-resize","e-resize","s-resize","w-resize"],k=["nw-resize","ne-resize","se-resize","sw-resize"];return()=>{const h=i.selectElements.has(t.item);return e(Q,Lt)(e(Q,Oi),null,[e(Q,Lt)(e(zt,he),{graphic:e(de,Ke),shape:l.value,style:{stroke:"none",fill:"transparent"},cursor:h?"move":"pointer",onmousedown:n,onclick:o,z:h?10:void 0,silent:i.mode!=="select"},null),m.value.map((u,b,w)=>e(Q,Lt)(e(zt,he),{key:b,graphic:e(de,Ke),shape:{points:[u,w[(b+1)%w.length]]},style:{stroke:t.item.color||i.color,lineWidth:1},cursor:h?x[b]:"pointer",onmousedown:g=>a(g,b),onclick:g=>g.event.stopPropagation(),z:h?10:void 0,silent:i.mode!=="select"},null)),m.value.map((u,b)=>h?e(Q,Lt)(e(zt,he),{key:b,graphic:e(de,Fi),shape:{cx:u[0],cy:u[1],r:3},style:{fill:t.item.color||i.color},onmousedown:w=>r(w,b),onclick:w=>w.event.stopPropagation(),cursor:h?k[b]:"pointer",z:h?10:void 0,silent:i.mode!=="select"},null):null)])}}}),$i=await C("@rdx/shared"),Ri="isEqual";function _i(t){const s=new Set,i=new Set,m=t.elements,l=(o,n)=>{for(let r=0;r<n[0].length;r+=1)if(o[0]===n[0][r]){s.add(n[0][r]);break}for(let r=0;r<n[1].length;r+=1)if(o[1]===n[1][r]){i.add(n[1][r]);break}};if(t.focus==="focusRectSide"){const o=t.curElement;if(!o)return[];m.forEach(n=>{if(B(n)){if(n.uid===o.uid)return;t.focusIndex===0?l([o.x,o.y],[[],[n.y,n.y+n.height/2,n.y+n.height]]):t.focusIndex===1?l([o.x+o.width,o.y],[[n.x,n.x+n.width/2,n.x+n.width],[]]):t.focusIndex===2?l([o.x,o.y+o.height],[[],[n.y,n.y+n.height/2,n.y+n.height]]):t.focusIndex===3&&l([o.x,o.y],[[n.x,n.x+n.width/2,n.x+n.width],[]])}else L(n)?t.focusIndex===0?n.points.forEach(r=>{l(r,[[],[o.y]])}):t.focusIndex===1?n.points.forEach(r=>{l(r,[[o.x+o.width],[]])}):t.focusIndex===2?n.points.forEach(r=>{l(r,[[],[o.y+o.height]])}):t.focusIndex===3&&n.points.forEach(r=>{l(r,[[o.x],[]])}):R(n)&&(t.focusIndex===0?l(n.location,[[],[o.y]]):t.focusIndex===1?l(n.location,[[o.x+o.width],[]]):t.focusIndex===2?l(n.location,[[],[o.y+o.height]]):t.focusIndex===3&&l(n.location,[[o.x],[]]))})}else if(t.focus==="focusRectVertex"){const o=t.curElement;if(!o)return[];m.forEach(n=>{if(B(n)){if(n.uid===o.uid)return;t.focusIndex===0?l([o.x,o.y],[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]]):t.focusIndex===1?l([o.x+o.width,o.y],[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]]):t.focusIndex===2?l([o.x+o.width,o.y+o.height],[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]]):t.focusIndex===3&&l([o.x,o.y+o.height],[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]])}else L(n)?t.focusIndex===0?n.points.forEach(r=>{l(r,[[o.x],[o.y]])}):t.focusIndex===1?n.points.forEach(r=>{l(r,[[o.x+o.width],[o.y]])}):t.focusIndex===2?n.points.forEach(r=>{l(r,[[o.x+o.width],[o.y+o.height]])}):t.focusIndex===3&&n.points.forEach(r=>{l(r,[[o.x],[o.y+o.height]])}):R(n)&&(t.focusIndex===0?l(n.location,[[o.x],[o.y]]):t.focusIndex===1?l(n.location,[[o.x+o.width],[o.y]]):t.focusIndex===2?l(n.location,[[o.x+o.width],[o.y+o.height]]):t.focusIndex===3&&l(n.location,[[o.x],[o.y+o.height]]))})}else if(t.focus==="focusLineVertex"){const o=t.curElement;if(!o)return[];const n=o.points[t.pointIndex];m.forEach(r=>{B(r)?l(n,[[r.x,r.x+r.width/2,r.x+r.width],[r.y,r.y+r.height/2,r.y+r.height]]):L(r)?r.uid===o.uid?r.points.forEach(a=>{e($i,Ri)(n,a,!0)||l(n,a.map(x=>[x]))}):r.points.forEach(a=>{l(n,a.map(x=>[x]))}):R(r)&&l(n,r.location.map(a=>[a]))})}else if(R(t.curElement)){const o=t.curElement;m.forEach(n=>{t.selectElements.has(n)||(R(n)?l(o.location,n.location.map(r=>[r])):L(n)?l(o.location,n.points.reduce((r,a)=>(r[0].push(a[0]),r[1].push(a[1]),r),[[],[]])):B(n)&&l(o.location,[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]]))})}else if(B(t.curElement)){const o=t.curElement;if(!o)return[];m.forEach(n=>{t.selectElements.has(n)||(B(n)?(l([o.x,o.y],[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]]),l([o.x+o.width/2,o.y+o.height/2],[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]]),l([o.x+o.width,o.y+o.height],[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]])):L(n)?(l([o.x,o.y],[n.points.map(r=>r[0]),n.points.map(r=>r[1])]),l([o.x+o.width/2,o.y+o.height/2],[n.points.map(r=>r[0]),n.points.map(r=>r[1])]),l([o.x+o.width,o.y+o.height],[n.points.map(r=>r[0]),n.points.map(r=>r[1])])):R(n)&&(l([o.x,o.y],[[n.location[0]],[n.location[1]]]),l([o.x+o.width/2,o.y+o.height/2],[[n.location[0]],[n.location[1]]]),l([o.x+o.width,o.y+o.height],[[n.location[0]],[n.location[1]]])))})}else if(t.mode!=="select"){const o=t.location;m.forEach(n=>{var r,a;if(L(n))t.mode==="line"&&n.uid===((r=t.curElement)==null?void 0:r.uid)?(n.points.forEach((x,k,{length:h})=>{k!==h-1&&l(o,[[x[0]],[]])}),n.points.forEach((x,k,{length:h})=>{k!==h-1&&l(o,[[],[x[1]]])})):(n.points.forEach(x=>{l(o,[[x[0]],[]])}),n.points.forEach(x=>{l(o,[[],[x[1]]])}));else if(B(n)){if(t.mode==="rect"&&n.uid===((a=t.curElement)==null?void 0:a.uid))return;l(o,[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]])}else R(n)&&l(o,n.location.map(x=>[x]))})}return[Array.from(s).map(o=>({x:o})),Array.from(i).map(o=>({y:o}))].flat()}const Xe=await C("vue"),Ti="ref",Wi="watch";function qi(t){const s=e(Xe,Ti)([]);return e(Xe,Wi)(t,()=>{t.mode!=="select"||t.isDrawing&&t.pickup&&(t.mode!=="select"||!L(t.curElement)||t.pointIndex!==void 0)?s.value=_i(t):s.value=[]},{deep:!0}),s}function Ki(t){return()=>{t.canBlur&&(t.curElement||t.selectElements.size)&&ut(t),t.canBlur=!0}}const pe=await C("vue"),Yi=await C("@rdx/shared"),Xi="useResizeObserver",Gi="watchEffect",Ji="onBeforeMount",Qi="onUnmounted";function Zi(t,s,i){e(Yi,Xi)(()=>i.value,n=>{n.clientWidth===0||n.clientHeight===0||(s.bounding={width:n.clientWidth,height:n.clientHeight})},{immediate:!0});const m=[1,10,.05];e(pe,Gi)(()=>{if(!s.bounding)return;const n=s.bounding.width,r=s.bounding.height,a=(t.xMax??1920)-(t.xMin??0),x=(t.yMax??1080)-(t.yMin??0),k=a/x>n/r?n/a:r/x;k&&(s.scale=k,s.translateX=(n-a*k)/2,s.translateY=(r-x*k)/2,m[0]=k/2,m[1]=k*3,m[3]=k*.05)});const l=n=>{if(n.button!==2)return;const r=x=>{s.translateX+=x.clientX-n.clientX,s.translateY+=x.clientY-n.clientY,n=x},a=()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",a)},o=n=>{n.ctrlKey&&(n.preventDefault(),s.scale-=n.deltaY/Math.abs(n.deltaY)*m[3],s.scale=Math.min(Math.max(s.scale,m[0]),m[1]))};return e(pe,Ji)(()=>{document.addEventListener("mousedown",l)}),e(pe,Qi)(()=>{document.removeEventListener("mousedown",l)}),o}const tl=await C("vue"),el="watch";function nl(t){const s=()=>{if(t.mode!=="line")return;const[i,m]=t.location;let l=t.curElement;if(l){const o=st(t);t.canBlur=!1,l.points.push([i,m]),t.pointIndex=l.points.length-1,F(t,()=>{l.points.pop(),rt(t,o)})}else{const o=st(t);t.canBlur=!1,l={uid:Z(),name:"\u7EBF\u63D2\u69FD",type:t.mode,points:[[i,m],[i,m]]},t.elements.push(l),t.curElement=l,t.selectElements.add(l),t.isDrawing=!0,t.pointIndex=l.points.length-1,F(t,()=>{t.elements.pop(),rt(t,o)})}};return e(tl,el)(()=>t.location,([i,m])=>{var o;if(t.mode!=="line")return;const l=(o=t.curElement)==null?void 0:o.points[t.pointIndex];l&&(l[0]=i,l[1]=m)}),s}function ol(t){return()=>{if(t.mode!=="point")return;const s=st(t),[i,m]=t.location,l={uid:Z(),name:"\u70B9\u63D2\u69FD",type:t.mode,location:[i,m]};t.elements.push(l),F(t,()=>{t.elements.pop(),rt(t,s)})}}const il=await C("vue"),ll="watch";function al(t){const s=i=>{if(i.button!==0||t.mode!=="rect"&&t.mode!=="select")return;const[m,l]=t.location;if(t.mode==="rect"){const n=st(t),r={uid:Z(),name:"\u6846\u63D2\u69FD",type:"rect",x:m,y:l,width:0,height:0};t.elements.push(r),t.curElement=r,t.selectElements.add(r),t.isDrawing=!0,F(t,()=>{t.elements.pop(),rt(t,n)})}else{t.isSelecting=!0;const n={uid:Z(),name:"\u6846\u63D2\u69FD",type:"rect",x:m,y:l,width:0,height:0};t.curElement=n}const o=()=>{t.isDrawing=!1,document.removeEventListener("mouseup",o);const n=t.curElement;if(!t.isSelecting)n.width===0||n.height===0?oe(t):(t.canBlur=!1,ut(t,"rect"));else if(t.isSelecting=!1,!(n.width===0||n.height===0)){t.selectElements=new Set;const r=t.location,a=Math.min(m,r[0]),x=Math.max(m,r[0]),k=Math.min(l,r[1]),h=Math.max(l,r[1]);t.elements.forEach(u=>{R(u)?u.location[0]>=a&&u.location[0]<=x&&u.location[1]>=k&&u.location[1]<=h&&t.selectElements.add(u):B(u)?u.x>=a&&u.y>=k&&u.x+u.width<=x&&u.y+u.height<=h&&t.selectElements.add(u):L(u)&&u.points.every(b=>b[0]>=a&&b[0]<=x&&b[1]>=k&&b[1]<=h)&&t.selectElements.add(u)}),t.canBlur=!1,t.curElement=void 0,t.focusIndex=void 0,t.pointIndex=void 0}};document.addEventListener("mouseup",o)};return e(il,ll)(()=>t.location,([i,m])=>{if((t.mode!=="rect"||!t.isDrawing)&&!t.isSelecting)return;const l=t.curElement;B(l)&&(l.width=i-l.x,l.height=m-l.y)}),s}const me=await C("vue"),sl="computed",rl="onBeforeMount",cl="onUnmounted";function ul(t,s){const i=e(me,sl)(()=>t.stepPace/t.scale),m=()=>{const d=t.curElement;L(d)&&t.isDrawing?d.points.length>2?(d.points.pop(),t.pointIndex=void 0,t.isDrawing=!1,t.curElement=void 0,t.selectElements=new Set,F(t,()=>{t.mode="line";const[c,v]=t.location;t.selectElements.add(d),t.curElement=d,t.isDrawing=!0,d.points.push([c,v]),t.pointIndex=d.points.length-1})):(t.isDrawing=!1,oe(t)):t.mode="select"},l=()=>{const d=t.curElement;if(t.mode==="select")if(L(d)&&t.pointIndex!==void 0&&d.points.length>2){const c=t.pointIndex,[v]=d.points.splice(c,1);t.pointIndex=void 0,F(t,()=>{d.points.splice(c,0,v),t.pointIndex=c})}else t.selectElements.forEach(c=>{const v=t.elements.findIndex(y=>y===c),f=t.elements[v];t.elements.splice(v,1),F(t,()=>{t.elements.splice(v,0,f)})}),ut(t)},o=d=>{if(t.mode!=="select")return;const c=t.curElement;if(t.focusIndex===void 0&&t.pointIndex===void 0){const v=c===void 0?0:(t.elements.indexOf(c)+(d?1:-1))%t.elements.length;t.curElement=t.elements.at(v),t.selectElements=new Set([t.curElement])}else t.pointIndex!==void 0?d?t.pointIndex===c.points.length-1?(t.focus="focusLineVertex",t.pointIndex=0,t.focusIndex=void 0):(t.focus=void 0,t.focusIndex=t.pointIndex,t.pointIndex=void 0):t.pointIndex===0?(t.focus="focusLineVertex",t.pointIndex=c.points.length-1,t.focusIndex=void 0):(t.focus=void 0,t.focusIndex=t.pointIndex-1,t.pointIndex=void 0):(t.focus="focusLineVertex",t.pointIndex=t.focusIndex+(d?1:0),t.focusIndex=void 0)},n=()=>{const d=t.focusIndex;if(d===void 0)return;const c=t.curElement;L(c)&&(c.points.splice(d+1,0,[(c.points[d][0]+c.points[d+1][0])/2,(c.points[d][1]+c.points[d+1][1])/2]),F(t,()=>{c.points.splice(d+1,1)}))},r=()=>{const d=t.pointIndex;if(d===void 0)return;const c=t.curElement;if(L(c)&&d!==0&&d!==c.points.length-1){const v=c.points.splice(d+1),f={uid:Z(),name:"\u7EBF\u63D2\u69FD",type:"line",points:[[...c.points.at(-1)],...v.map(S=>[...S])],variableKey:c.variableKey},y=t.elements.indexOf(c);t.elements.splice(y+1,0,f),F(t,()=>{t.elements.splice(y+1,1),c.points.push(...v)})}},a=()=>{const d=t.pointIndex;if(d===void 0)return;const c=t.curElement;if(L(c)&&d!==0&&d!==c.points.length-1){const v=c.points[d-1],f=c.points[d+1],y=c.points[d],S=i.value*12;v[1]===f[1]?(c.points[d][1]=v[1]-S,c.points.splice(d,0,[y[0]-S*(v[0]<f[0]?1:-1),v[1]]),c.points.splice(d+2,0,[y[0]+S*(v[0]<f[0]?1:-1),f[1]]),t.pointIndex=d+1,F(t,()=>{t.pointIndex=d,c.points.splice(d+2,1),c.points.splice(d,1),c.points[d][1]=v[1]})):v[0]===f[0]&&(c.points[d][0]=v[0]+S,c.points.splice(d,0,[v[0],y[1]-S*(v[1]<f[1]?1:-1)]),c.points.splice(d+2,0,[f[0],y[1]+S*(v[1]<f[1]?1:-1)]),t.pointIndex=d+1,F(t,()=>{t.pointIndex=d,c.points.splice(d+2,1),c.points.splice(d,1),c.points[d][0]=v[0]}))}},x=()=>{const d=t.pointIndex;if(d===void 0)return;const c=t.curElement;if(L(c)&&(d===0||d===c.points.length-1)){const v=t.elements.findIndex(y=>L(y)&&y!==c&&(W(y.points.at(-1),c.points.at(d))||W(y.points.at(0),c.points.at(d))));if(v===-1)return;const f=t.elements[v];if(d===0){if(W(f.points.at(-1),c.points.at(d)))for(let y=f.points.length-2;y>=0;y-=1)c.points.unshift(f.points[y]);else for(let y=1;y<=f.points.length-1;y+=1)c.points.unshift(f.points[y]);t.pointIndex=f.points.length-1,F(t,()=>{c.points.splice(0,f.points.length-1),t.pointIndex=d})}else{if(W(f.points.at(-1),c.points.at(d)))for(let y=f.points.length-2;y>=0;y-=1)c.points.push(f.points[y]);else for(let y=1;y<=f.points.length-1;y+=1)c.points.push(f.points[y]);F(t,()=>{c.points.splice(c.points.length-1-(f.points.length-2),f.points.length-1)})}t.elements.splice(v,1),F(t,()=>{t.elements.splice(v,0,f)})}},k=()=>{t.selectElements=new Set,t.elements.forEach(d=>{t.selectElements.add(d)})},h=He(F,600,{leading:!0,trailing:!1}),u=d=>{if(t.focus==="focusLineVertex"){const c=t.curElement.points[t.pointIndex],v=c[1],f=t.location[1];c[1]+=i.value,t.location[1]+=i.value,h(t,()=>{c[1]=v,t.location[1]=f})}else if(t.focus==="focusRectSide"){const c=t.curElement;if(t.focusIndex===0){const v=c.y,f=c.height;c.y+=i.value,c.height-=i.value,h(t,()=>{c.y=v,c.height=f})}else if(t.focusIndex===2){const v=c.height;c.height+=i.value,h(t,()=>c.height=v)}}else t.selectElements.forEach(c=>{if(B(c)){const v=c.y;c.y+=i.value,h(t,()=>c.y=v)}else if(L(c))if(t.selectElements.size===1&&!d.ctrlKey){const v=c.points.slice(t.focusIndex,t.focusIndex+2),f=v.map(y=>y[1]);v.forEach(y=>{y[1]+=i.value}),h(t,()=>{v.forEach((y,S)=>{y[1]=f[S]})})}else{const v=c.points.map(f=>f[1]);c.points.forEach(f=>{f[1]+=i.value}),h(t,()=>{c.points.forEach((f,y)=>{f[1]=v[y]})})}else{const v=c.location[1];c.location[1]+=i.value,h(t,()=>c.location[1]=v)}})},b=d=>{if(t.focus==="focusLineVertex"){const c=t.curElement.points[t.pointIndex],v=c[1],f=t.location[1];c[1]-=i.value,t.location[1]-=i.value,h(t,()=>{c[1]=v,t.location[1]=f})}else if(t.focus==="focusRectSide"){const c=t.curElement;if(t.focusIndex===0){const v=c.y,f=c.height;c.y-=i.value,c.height+=i.value,h(t,()=>{c.y=v,c.height=f})}else if(t.focusIndex===2){const v=c.height;c.height-=i.value,h(t,()=>c.height=v)}}else t.selectElements.forEach(c=>{if(B(c)){const v=c.y;c.y-=i.value,h(t,()=>c.y=v)}else if(L(c))if(t.selectElements.size===1&&!d.ctrlKey){const v=c.points.slice(t.focusIndex,t.focusIndex+2),f=v.map(y=>y[1]);v.forEach(y=>{y[1]-=i.value}),h(t,()=>{v.forEach((y,S)=>{y[1]=f[S]})})}else{const v=c.points.map(f=>f[1]);c.points.forEach(f=>{f[1]-=i.value}),h(t,()=>{c.points.forEach((f,y)=>{f[1]=v[y]})})}else{const v=c.location[1];c.location[1]-=i.value,h(t,()=>c.location[1]=v)}})},w=d=>{if(t.focus==="focusLineVertex"){const c=t.curElement.points[t.pointIndex],v=c[0],f=t.location[0];c[0]+=i.value,t.location[0]+=i.value,h(t,()=>{c[0]=v,t.location[0]=f})}else if(t.focus==="focusRectSide"){const c=t.curElement;if(t.focusIndex===3){const v=c.x,f=c.width;c.x+=i.value,c.width-=i.value,h(t,()=>{c.x=v,c.width=f})}else if(t.focusIndex===1){const v=c.width;c.width+=i.value,h(t,()=>c.width=v)}}else t.selectElements.forEach(c=>{if(B(c)){const v=c.x;c.x+=i.value,h(t,()=>c.x=v)}else if(L(c))if(t.selectElements.size===1&&!d.ctrlKey){const v=c.points.slice(t.focusIndex,t.focusIndex+2),f=v.map(y=>y[0]);v.forEach(y=>{y[0]+=i.value}),h(t,()=>{v.forEach((y,S)=>{y[0]=f[S]})})}else{const v=c.points.map(f=>f[0]);c.points.forEach(f=>{f[0]+=i.value}),h(t,()=>{c.points.forEach((f,y)=>{f[0]=v[y]})})}else{const v=c.location[0];c.location[0]+=i.value,h(t,()=>c.location[0]=v)}})},g=d=>{if(t.focus==="focusLineVertex"){const c=t.curElement.points[t.pointIndex],v=c[0],f=t.location[0];c[0]-=i.value,t.location[0]-=i.value,h(t,()=>{c[0]=v,t.location[0]=f})}else if(t.focus==="focusRectSide"){const c=t.curElement;if(t.focusIndex===3){const v=c.x,f=c.width;c.x-=i.value,c.width+=i.value,h(t,()=>{c.x=v,c.width=f})}else if(t.focusIndex===1){const v=c.width;c.width-=i.value,h(t,()=>c.width=v)}}else t.selectElements.forEach(c=>{if(B(c)){const v=c.x;c.x-=i.value,h(t,()=>c.x=v)}else if(L(c))if(t.selectElements.size===1&&!d.ctrlKey){const v=c.points.slice(t.focusIndex,t.focusIndex+2),f=v.map(y=>y[0]);v.forEach(y=>{y[0]-=i.value}),h(t,()=>{v.forEach((y,S)=>{y[0]=f[S]})})}else{const v=c.points.map(f=>f[0]);c.points.forEach(f=>{f[0]-=i.value}),h(t,()=>{c.points.forEach((f,y)=>{f[0]=v[y]})})}else{const v=c.location[0];c.location[0]-=i.value,h(t,()=>c.location[0]=v)}})},z=d=>{var c,v;((c=document.getSelection())==null?void 0:c.type)!=="Range"&&t.selectElements.size&&(d.preventDefault(),(v=d.clipboardData)==null||v.setData("text/plain",JSON.stringify(Array.from(t.selectElements))))},p=d=>{var y,S;if(["input","textarea"].includes((y=document.activeElement)==null?void 0:y.tagName.toLowerCase()))return;const c=(S=d.clipboardData)==null?void 0:S.getData("text/plain");if(!c)return;d.preventDefault();const v=JSON.parse(c),f=st(t);t.selectElements=new Set,v.forEach(O=>{delete O.slotIndex,L(O)?(O.uid=Z(),O.points=O.points.map(([Rt,_t])=>[Rt+16/t.scale,_t+16/t.scale]),t.elements.push(O),t.selectElements.add(O)):B(O)?(O.uid=Z(),O.x+=16/t.scale,O.y+=16/t.scale,t.elements.push(O),t.selectElements.add(O)):R(O)&&(O.uid=Z(),O.location[0]+=16/t.scale,O.location[0]+=16/t.scale,t.elements.push(O),t.selectElements.add(O))}),F(t,()=>{v.forEach(()=>t.elements.pop()),rt(t,f)})},N=async d=>{var f;if(["input","textarea"].includes((f=document.activeElement)==null?void 0:f.tagName.toLowerCase()))return;const{ctrlKey:c,shiftKey:v}=d;c?d.key==="z"?(d.preventDefault(),oe(t)):d.key==="b"?(d.preventDefault(),n()):d.key==="d"?(d.preventDefault(),r()):d.key==="m"?(d.preventDefault(),x()):d.key==="j"?(d.preventDefault(),a()):d.key==="a"?(d.preventDefault(),k()):d.key==="s"&&(d.preventDefault(),s()):d.key===" "?m():d.key==="F8"?t.orthogonal=!t.orthogonal:d.key==="Delete"?l():d.key==="Tab"&&(d.preventDefault(),o(!v)),d.key==="ArrowDown"?u(d):d.key==="ArrowUp"?b(d):d.key==="ArrowRight"?w(d):d.key==="ArrowLeft"&&g(d)};e(me,rl)(()=>{document.addEventListener("keydown",N),document.addEventListener("copy",z),document.addEventListener("paste",p)}),e(me,cl)(()=>{document.removeEventListener("keydown",N),document.removeEventListener("copy",z),document.removeEventListener("paste",p)})}function dl({x:t,y:s,state:i}){let m,l;const o=i.elements;for(let n=0;n<o.length&&!(m!==void 0&&l!==void 0);n+=1){const r=o[n];if(L(r))for(let a=0;a<r.points.length&&!(m!==void 0&&l!==void 0);a+=1){if(i.selectElements.has(r)&&(i.selectElements.size===1&&a===i.pointIndex||i.pointIndex===void 0))continue;const x=r.points[a];m===void 0&&M(i,x[0],t)&&(m=x[0]),l===void 0&&M(i,x[1],s)&&(l=x[1])}else if(B(r)){if(i.selectElements.has(r))continue;m===void 0&&(M(i,r.x,t)?m=r.x:M(i,r.x+r.width,t)?m=r.x+r.width:M(i,r.x+r.width/2,t)&&(m=r.x+r.width/2)),l===void 0&&(M(i,r.y,s)?l=r.y:M(i,r.y+r.height/2,s)?l=r.y+r.height/2:M(i,r.y+r.height,s)&&(l=r.y+r.height))}else if(R(r)){if(i.selectElements.has(r))continue;m===void 0&&M(i,r.location[0],t)&&(m=r.location[0]),l===void 0&&M(i,r.location[1],s)&&(l=r.location[1])}}return[m??t,l??s]}const Ge=await C("vue"),hl="onBeforeMount",pl="onUnmounted";function ml(t,s,i){const m=l=>{if(!i.value)return;const{left:o=0,top:n=0,width:r,height:a}=i.value.getBoundingClientRect()??{},{xMin:x=0,xMax:k=1920,yMin:h=0,yMax:u=1080}=t;let b=x+(l.clientX-o)*(k-x)/r,w=h+(l.clientY-n)*(u-h)/a;const g=s.curElement;if(s.orthogonal&&s.mode==="line"&&s.isDrawing&&L(g)){const z=g.points.at(-1),p=g.points.at(-2);if(z&&p){const N=b-p[0],d=w-p[1];Math.abs(N)>Math.abs(d)?w=p[1]:b=p[0]}}s.pickup&&(s.mode!=="select"||!L(s.curElement)||s.pointIndex!==void 0)?s.location=dl({x:b,y:w,state:s}):s.location=[b,w]};return e(Ge,hl)(()=>{document.addEventListener("mousemove",m)}),e(Ge,pl)(()=>{document.removeEventListener("mousemove",m)}),i}const Je=await C("@rdx/shared"),T=await C("vue"),et="createVNode",fl="mergeProps",vl="GraphicContainer",xl="defineComponent",gl="ref",wl="provide",yl="computed",El="useCoordinateLogic",kl=e(T,xl)({props:{meta:{type:Object,required:!0},state:{type:Object,required:!0},onSave:{type:Function,required:!0}},setup(t){const s=e(T,gl)(null);e(T,wl)("state",t.state),ul(t.state,He(()=>t.onSave(),1e3,{leading:!0,trailing:!1}));const{coordinateRef:i,rootRef:m}=e(Je,El)({xAxis:{get min(){return t.meta.xMin??0},get max(){return t.meta.xMax??1920}},yAxis:{get min(){return t.meta.yMin??0},get max(){return t.meta.yMax??1080}}},{get clientWidth(){return((t.meta.xMax??1920)-(t.meta.xMin??0))*t.state.scale},get clientHeight(){return((t.meta.yMax??1080)-(t.meta.yMin??0))*t.state.scale}}),l=Zi(t.meta,t.state,s);ml(t.meta,t.state,m);const o=nl(t.state),n=al(t.state),r=ol(t.state),a=Ki(t.state),x=qi(t.state),k=()=>{o(),r(),a()},h=e(T,yl)(()=>t.state.background?URL.createObjectURL(t.state.background):null);return()=>{const u=i.value,b=t.state,w=(u==null?void 0:u.coordX(0))||0,g=(u==null?void 0:u.coordY(0))||0,z=((u==null?void 0:u.coordX(t.meta.bgLeft))||0)-w,p=((u==null?void 0:u.coordY(t.meta.bgTop))||0)-g,N=((u==null?void 0:u.coordX(t.meta.bgRight))||0)-w,d=((u==null?void 0:u.coordY(t.meta.bgBottom))||0)-g,c=h.value||t.meta.bgImage;return e(T,et)("div",{style:"flex: 1;height: calc(100vh - 46px);overflow: hidden;",ref:s,onClick:k,onMousedown:n,onWheel:l,onContextmenu:v=>v.preventDefault()},[b.bounding?e(T,et)("div",{ref:m,style:{width:`${((t.meta.xMax??1920)-(t.meta.xMin??0))*b.scale}px`,height:`${((t.meta.yMax??1080)-(t.meta.yMin??0))*b.scale}px`,transform:`translate(${~~b.translateX}px, ${~~b.translateY}px)`,background:c?`url(${c}) ${z}px ${p}px / calc(100% - ${z}px - ${N}px) calc(100% - ${p}px - ${d}px) no-repeat`:"var(--card-color)"}},[u?e(T,et)(e(Je,vl),{style:"height: 100%;",coordinate:u},{default:()=>{var v;return[b.elements.map((f,y)=>L(f)?e(T,et)(Ci,{key:f.uid,item:f,index:y},null):B(f)?e(T,et)(Ui,{key:f.uid,item:f,index:y},null):e(T,et)(Si,{key:f.uid,item:f,index:y},null)),b.isSelecting&&B(b.curElement)?e(T,et)(gi,{key:b.curElement.uid,item:b.curElement},null):null,(v=x.value)==null?void 0:v.map((f,y)=>e(T,et)(ui,e(T,fl)(f,{key:`auxiliary${y}`}),null))]}}):null]):null])}}}),Vt=await C("vue"),bl="createElementVNode",Il="openBlock",Nl="createElementBlock",Ml="defineComponent",Cl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Bl=e(Vt,bl)("path",{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z",fill:"currentColor"},null,-1),zl=[Bl],Ll=e(Vt,Ml)({name:"SwapOutlined",render:function(t,s){return e(Vt,Il)(),e(Vt,Nl)("svg",Cl,zl)}}),mt=await C("vue"),Qe="createElementVNode",Vl="openBlock",Sl="createElementBlock",Dl="defineComponent",jl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},Ol=e(mt,Qe)("g",{fill:"none"},[e(mt,Qe)("path",{d:"M10 2a8 8 0 1 0 0 16a8 8 0 0 0 0-16z",fill:"currentColor"})],-1),Fl=[Ol],St=e(mt,Dl)({name:"Circle20Filled",render:function(t,s){return e(mt,Vl)(),e(mt,Sl)("svg",jl,Fl)}}),ft=await C("vue"),Ze="createElementVNode",Hl="openBlock",Al="createElementBlock",Pl="defineComponent",Ul={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},$l=e(ft,Ze)("g",{fill:"none"},[e(ft,Ze)("path",{d:"M15.5 4a1.5 1.5 0 1 0 0 3a1.5 1.5 0 0 0 0-3zM13 5.5a2.5 2.5 0 1 1 1.557 2.316l-1.282 1.923a2.5 2.5 0 1 1-3.83 3.185l-2.496 1.07a2.5 2.5 0 1 1-.394-.919l2.496-1.07a2.5 2.5 0 0 1 3.392-2.822l1.282-1.922A2.492 2.492 0 0 1 13 5.5zm-3 6a1.5 1.5 0 1 0 3 0a1.5 1.5 0 0 0-3 0zm-7 3a1.5 1.5 0 1 0 3 0a1.5 1.5 0 0 0-3 0z",fill:"currentColor"})],-1),Rl=[$l],tn=e(ft,Pl)({name:"DataLine20Regular",render:function(t,s){return e(ft,Hl)(),e(ft,Al)("svg",Ul,Rl)}}),vt=await C("vue"),en="createElementVNode",_l="openBlock",Tl="createElementBlock",Wl="defineComponent",ql={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 16 16"},Kl=e(vt,en)("g",{fill:"none"},[e(vt,en)("path",{d:"M1 5.5A2.5 2.5 0 0 1 3.5 3h9A2.5 2.5 0 0 1 15 5.5v5a2.5 2.5 0 0 1-2.5 2.5h-9A2.5 2.5 0 0 1 1 10.5v-5zM3.5 4A1.5 1.5 0 0 0 2 5.5v5A1.5 1.5 0 0 0 3.5 12h9a1.5 1.5 0 0 0 1.5-1.5v-5A1.5 1.5 0 0 0 12.5 4h-9z",fill:"currentColor"})],-1),Yl=[Kl],nn=e(vt,Wl)({name:"RectangleLandscape16Regular",render:function(t,s){return e(vt,_l)(),e(vt,Tl)("svg",ql,Yl)}}),ct=await C("vue"),fe="createElementVNode",Xl="openBlock",Gl="createElementBlock",Jl="defineComponent",Ql={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Zl=e(ct,fe)("path",{d:"M200.66 352H144a96 96 0 0 1 0-192h55.41",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48"},null,-1),ta=e(ct,fe)("path",{d:"M312.59 160H368a96 96 0 0 1 0 192h-56.66",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48"},null,-1),ea=e(ct,fe)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M169.07 256h175.86"},null,-1),na=[Zl,ta,ea],oa=e(ct,Jl)({name:"Link",render:function(t,s){return e(ct,Xl)(),e(ct,Gl)("svg",Ql,na)}}),on=t=>typeof t=="object"&&t!=null&&t.nodeType===1,ln=(t,s)=>(!s||t!=="hidden")&&t!=="visible"&&t!=="clip",ve=(t,s)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const i=getComputedStyle(t,null);return ln(i.overflowY,s)||ln(i.overflowX,s)||(m=>{const l=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(m);return!!l&&(l.clientHeight<m.scrollHeight||l.clientWidth<m.scrollWidth)})(t)}return!1},Dt=(t,s,i,m,l,o,n,r)=>o<t&&n>s||o>t&&n<s?0:o<=t&&r<=i||n>=s&&r>=i?o-t-m:n>s&&r<i||o<t&&r>i?n-s+l:0,ia=t=>t.parentElement??(t.getRootNode().host||null),an=(t,s)=>{var i,m,l,o;if(typeof document>"u")return[];const{scrollMode:n,block:r,inline:a,boundary:x,skipOverflowHiddenElements:k}=s,h=typeof x=="function"?x:at=>at!==x;if(!on(t))throw new TypeError("Invalid target");const u=document.scrollingElement||document.documentElement,b=[];let w=t;for(;on(w)&&h(w);){if(w=ia(w),w===u){b.push(w);break}w!=null&&w===document.body&&ve(w)&&!ve(document.documentElement)||w!=null&&ve(w,k)&&b.push(w)}const g=(m=(i=window.visualViewport)==null?void 0:i.width)!=null?m:innerWidth,z=(o=(l=window.visualViewport)==null?void 0:l.height)!=null?o:innerHeight,{scrollX:p,scrollY:N}=window,{height:d,width:c,top:v,right:f,bottom:y,left:S}=t.getBoundingClientRect(),{top:O,right:Rt,bottom:_t,left:uo}=(at=>{const P=window.getComputedStyle(at);return{top:parseFloat(P.scrollMarginTop)||0,right:parseFloat(P.scrollMarginRight)||0,bottom:parseFloat(P.scrollMarginBottom)||0,left:parseFloat(P.scrollMarginLeft)||0}})(t);let K=r==="start"||r==="nearest"?v-O:r==="end"?y+_t:v+d/2-O+_t,Y=a==="center"?S+c/2-uo+Rt:a==="end"?f+Rt:S-uo;const be=[];for(let at=0;at<b.length;at++){const P=b[at],{height:Tt,width:Wt,top:qt,right:Ie,bottom:Ne,left:Kt}=P.getBoundingClientRect();if(n==="if-needed"&&v>=0&&S>=0&&y<=z&&f<=g&&v>=qt&&y<=Ne&&S>=Kt&&f<=Ie)return be;const Yt=getComputedStyle(P),Xt=parseInt(Yt.borderLeftWidth,10),Gt=parseInt(Yt.borderTopWidth,10),Jt=parseInt(Yt.borderRightWidth,10),Qt=parseInt(Yt.borderBottomWidth,10);let nt=0,ot=0;const Zt="offsetWidth"in P?P.offsetWidth-P.clientWidth-Xt-Jt:0,te="offsetHeight"in P?P.offsetHeight-P.clientHeight-Gt-Qt:0,Me="offsetWidth"in P?P.offsetWidth===0?0:Wt/P.offsetWidth:0,Ce="offsetHeight"in P?P.offsetHeight===0?0:Tt/P.offsetHeight:0;if(u===P)nt=r==="start"?K:r==="end"?K-z:r==="nearest"?Dt(N,N+z,z,Gt,Qt,N+K,N+K+d,d):K-z/2,ot=a==="start"?Y:a==="center"?Y-g/2:a==="end"?Y-g:Dt(p,p+g,g,Xt,Jt,p+Y,p+Y+c,c),nt=Math.max(0,nt+N),ot=Math.max(0,ot+p);else{nt=r==="start"?K-qt-Gt:r==="end"?K-Ne+Qt+te:r==="nearest"?Dt(qt,Ne,Tt,Gt,Qt+te,K,K+d,d):K-(qt+Tt/2)+te/2,ot=a==="start"?Y-Kt-Xt:a==="center"?Y-(Kt+Wt/2)+Zt/2:a==="end"?Y-Ie+Jt+Zt:Dt(Kt,Ie,Wt,Xt,Jt+Zt,Y,Y+c,c);const{scrollLeft:ho,scrollTop:po}=P;nt=Ce===0?0:Math.max(0,Math.min(po+nt/Ce,P.scrollHeight-Tt/Ce+te)),ot=Me===0?0:Math.max(0,Math.min(ho+ot/Me,P.scrollWidth-Wt/Me+Zt)),K+=po-nt,Y+=ho-ot}be.push({el:P,top:nt,left:ot})}return be},la=t=>t===!1?{block:"end",inline:"nearest"}:(s=>s===Object(s)&&Object.keys(s).length!==0)(t)?t:{block:"start",inline:"nearest"};function aa(t,s){if(!t.isConnected||!(l=>{let o=l;for(;o&&o.parentNode;){if(o.parentNode===document)return!0;o=o.parentNode instanceof ShadowRoot?o.parentNode.host:o.parentNode}return!1})(t))return;const i=(l=>{const o=window.getComputedStyle(l);return{top:parseFloat(o.scrollMarginTop)||0,right:parseFloat(o.scrollMarginRight)||0,bottom:parseFloat(o.scrollMarginBottom)||0,left:parseFloat(o.scrollMarginLeft)||0}})(t);if((l=>typeof l=="object"&&typeof l.behavior=="function")(s))return s.behavior(an(t,s));const m=typeof s=="boolean"||s==null?void 0:s.behavior;for(const{el:l,top:o,left:n}of an(t,la(s))){const r=o-i.top+i.bottom,a=n-i.left+i.right;l.scroll({top:r,left:a,behavior:m})}}const sn=await C("@rdx/admin"),A=await C("vue"),G=await C("naive-ui"),sa="NIcon",ra="NIcon",ca="NInput",ua="NFormItem",da="NInput",ha="NFormItem",pa="NIcon",ma="NButton",fa="NPopover",va="NScrollbar",U="createVNode",xa="isVNode",ga="defineComponent",wa="ref",ya="watch",Ea="useColors",ka="createHoverColor";function ba(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!e(A,xa)(t)}const Ia=e(A,ga)({props:{state:{type:Object,required:!0},hack:{type:Function,required:!0}},setup(t){const s=e(sn,Ea)();let i=null;const m=e(A,wa)(null);return e(A,ya)(m,l=>{l&&setTimeout(()=>{aa(l,{scrollMode:"if-needed",behavior:"smooth",block:"center",inline:"nearest"})},250)},{immediate:!0}),()=>{let l;return e(A,U)(e(G,va),{class:"un-h-full un-w-240px un-bg-#fff un-b-r-1px un-b-r-solid un-border-var(--divider-color)"},ba(l=t.state.elements.map((o,n)=>e(A,U)("div",{key:o.uid,ref:r=>{t.state.curElement===o&&(m.value=r)},draggable:!0,onDragstart:()=>i=n,onDragover:r=>{i!==null&&r.preventDefault()},onDrop:async()=>{if(i===null||i===n)return;await t.hack();const r=t.state.elements[i];i<n?(t.state.elements.splice(n+1,0,r),t.state.elements.splice(i,1)):(t.state.elements.splice(i,1),t.state.elements.splice(n,0,r))}},[e(A,U)(e(G,fa),{placement:"left",trigger:"click",raw:!0},{default:()=>{var r;return[e(A,U)("div",{class:"un-relative un-p-8px un-bg-#fff un-rounded-3px"},[((r=t.state.curElement)==null?void 0:r.type)==="line"?e(A,U)(e(G,ma),{text:!0,class:"un-absolute un-right-8px",type:"primary",onClick:()=>{t.state.curElement.points.reverse()}},{default:()=>[e(A,U)(e(G,pa),null,{default:()=>[e(A,U)(Ll,null,null)]})]}):null,e(A,U)(e(G,ha),{label:"\u540D\u79F0"},{default:()=>[e(A,U)(e(G,da),{value:o.name,"onUpdate:value":a=>o.name=a},null)]}),e(A,U)(e(G,ua),{label:"\u5173\u8054\u53D8\u91CF",class:"un-mb--12px"},{default:()=>[e(A,U)(e(G,ca),{value:o.variableKey,"onUpdate:value":a=>o.variableKey=a},null)]})])]},trigger:()=>e(A,U)("div",{class:["un-cursor-move un-px-8px un-py-4px un-lh-24px un-flex un-items-center un-gap-6px un-min-h-32px",t.state.selectElements.has(o)?"":"un-hover:bg-var(--hover-color)"],style:{background:t.state.selectElements.has(o)?e(sn,ka)(s.value.primaryColor,.75):void 0},onClick:r=>{t.state.mode==="select"&&(r.ctrlKey||(t.state.selectElements=new Set),t.state.selectElements.has(o)?t.state.selectElements.delete(o):t.state.selectElements.add(o),t.state.curElement=o)}},[e(A,U)("div",{class:"un-flex-none un-flex un-items-center"},[e(A,U)(e(G,ra),{size:14},{default:()=>[B(o)?e(A,U)(nn,null,null):L(o)?e(A,U)(tn,null,null):e(A,U)(St,null,null)]})]),e(A,U)("div",{class:"un-flex-1"},[o.name||"\u672A\u547D\u540D"]),o.variableKey?e(A,U)("div",{class:"un-flex-none un-flex un-items-center"},[e(A,U)(e(G,sa),{size:14},{default:()=>[e(A,U)(oa,null,null)]})]):null])})])))?l:{default:()=>[l]})}}}),jt=await C("vue"),Na="createElementVNode",Ma="openBlock",Ca="createElementBlock",Ba="defineComponent",za={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},La=e(jt,Na)("path",{d:"M180 176h-60c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8zm724 0h-60c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8zM785.3 504.3L657.7 403.6a7.23 7.23 0 0 0-11.7 5.7V476H378v-62.8c0-6-7-9.4-11.7-5.7L238.7 508.3a7.14 7.14 0 0 0 0 11.3l127.5 100.8c4.7 3.7 11.7.4 11.7-5.7V548h268v62.8c0 6 7 9.4 11.7 5.7l127.5-100.8c3.8-2.9 3.8-8.5.2-11.4z",fill:"currentColor"},null,-1),Va=[La],rn=e(jt,Ba)({name:"ColumnWidthOutlined",render:function(t,s){return e(jt,Ma)(),e(jt,Ca)("svg",za,Va)}}),xt=await C("vue"),cn="createElementVNode",Sa="openBlock",Da="createElementBlock",ja="defineComponent",Oa={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Fa=e(xt,cn)("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448s448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372s372 166.6 372 372s-166.6 372-372 372z",fill:"currentColor"},null,-1),Ha=e(xt,cn)("path",{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7c-21.2 8.1-39.2 22.3-52.1 40.9c-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0 1 30.9-44.8c59-22.7 97.1-74.7 97.1-132.5c.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1 0 80 0a40 40 0 1 0-80 0z",fill:"currentColor"},null,-1),Aa=[Fa,Ha],Pa=e(xt,ja)({name:"QuestionCircleOutlined",render:function(t,s){return e(xt,Sa)(),e(xt,Da)("svg",Oa,Aa)}}),Ot=await C("vue"),Ua="createElementVNode",$a="openBlock",Ra="createElementBlock",_a="defineComponent",Ta={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Wa=e(Ot,Ua)("path",{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144s144-64.5 144-144s-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80s80 35.8 80 80s-35.8 80-80 80z",fill:"currentColor"},null,-1),qa=[Wa],Ka=e(Ot,_a)({name:"SaveOutlined",render:function(t,s){return e(Ot,$a)(),e(Ot,Ra)("svg",Ta,qa)}}),Ft=await C("vue"),Ya="createElementVNode",Xa="openBlock",Ga="createElementBlock",Ja="defineComponent",Qa={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Za=e(Ft,Ya)("path",{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h360c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H184V184h656v320c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V144c0-17.7-14.3-32-32-32zM653.3 599.4l52.2-52.2a8.01 8.01 0 0 0-4.7-13.6l-179.4-21c-5.1-.6-9.5 3.7-8.9 8.9l21 179.4c.8 6.6 8.9 9.4 13.6 4.7l52.4-52.4l256.2 256.2c3.1 3.1 8.2 3.1 11.3 0l42.4-42.4c3.1-3.1 3.1-8.2 0-11.3L653.3 599.4z",fill:"currentColor"},null,-1),ts=[Za],es=e(Ft,Ja)({name:"SelectOutlined",render:function(t,s){return e(Ft,Xa)(),e(Ft,Ga)("svg",Qa,ts)}}),Ht=await C("vue"),ns="createElementVNode",os="openBlock",is="createElementBlock",ls="defineComponent",as={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},ss=e(Ht,ns)("path",{d:"M839.6 433.8L749 150.5a9.24 9.24 0 0 0-8.9-6.5h-77.4c-4.1 0-7.6 2.6-8.9 6.5l-91.3 283.3c-.3.9-.5 1.9-.5 2.9c0 5.1 4.2 9.3 9.3 9.3h56.4c4.2 0 7.8-2.8 9-6.8l17.5-61.6h89l17.3 61.5c1.1 4 4.8 6.8 9 6.8h61.2c1 0 1.9-.1 2.8-.4c2.4-.8 4.3-2.4 5.5-4.6c1.1-2.2 1.3-4.7.6-7.1zM663.3 325.5l32.8-116.9h6.3l32.1 116.9h-71.2zm143.5 492.9H677.2v-.4l132.6-188.9c1.1-1.6 1.7-3.4 1.7-5.4v-36.4c0-5.1-4.2-9.3-9.3-9.3h-204c-5.1 0-9.3 4.2-9.3 9.3v43c0 5.1 4.2 9.3 9.3 9.3h122.6v.4L587.7 828.9a9.35 9.35 0 0 0-1.7 5.4v36.4c0 5.1 4.2 9.3 9.3 9.3h211.4c5.1 0 9.3-4.2 9.3-9.3v-43a9.2 9.2 0 0 0-9.2-9.3zM416 702h-76V172c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v530h-76c-6.7 0-10.5 7.8-6.3 13l112 141.9a8 8 0 0 0 12.6 0l112-141.9c4.1-5.2.4-13-6.3-13z",fill:"currentColor"},null,-1),rs=[ss],cs=e(Ht,ls)({name:"SortAscendingOutlined",render:function(t,s){return e(Ht,os)(),e(Ht,is)("svg",as,rs)}}),At=await C("vue"),us="createElementVNode",ds="openBlock",hs="createElementBlock",ps="defineComponent",ms={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},fs=e(At,us)("path",{d:"M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355a8 8 0 0 0-12.6 0l-112 141.7a7.98 7.98 0 0 0 6.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z",fill:"currentColor"},null,-1),vs=[fs],Pt=e(At,ps)({name:"VerticalAlignTopOutlined",render:function(t,s){return e(At,ds)(),e(At,hs)("svg",ms,vs)}}),gt=await C("vue"),un="createElementVNode",xs="openBlock",gs="createElementBlock",ws="defineComponent",ys={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},Es=e(gt,un)("g",{fill:"none"},[e(gt,un)("path",{d:"M14.085 2H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h3v2H5.5a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1H13v-2h3a2 2 0 0 0 2-2V7h-1v6a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h10v-.5c0-.175.03-.344.085-.5zM12 17H8v-2h4v2zm3-14.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V5h-.78a.5.5 0 0 0-.474.342l-.544 1.632A1.5 1.5 0 0 1 11.78 8H11v1.5a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V7h.78a.5.5 0 0 0 .474-.342l.544-1.632A1.5 1.5 0 0 1 14.22 4H15V2.5zM10 7H8v2h2V7zm6-2h2V3h-2v2z",fill:"currentColor"})],-1),ks=[Es],bs=e(gt,ws)({name:"DesktopFlow20Regular",render:function(t,s){return e(gt,xs)(),e(gt,gs)("svg",ys,ks)}}),wt=await C("vue"),dn="createElementVNode",Is="openBlock",Ns="createElementBlock",Ms="defineComponent",Cs={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Bs=e(wt,dn)("g",{fill:"none"},[e(wt,dn)("path",{d:"M10.25 2a.75.75 0 0 1 .743.648L11 2.75v4.794A6.253 6.253 0 0 1 16.457 13h4.794a.75.75 0 0 1 .102 1.493l-.102.007h-4.794A6.253 6.253 0 0 1 11 19.956v1.295a.75.75 0 0 1-1.494.102L9.5 21.25v-1.295a6.253 6.253 0 0 1-5.455-5.454H2.75a.75.75 0 0 1-.102-1.494L2.75 13h1.294A6.253 6.253 0 0 1 9.5 7.544V2.75a.75.75 0 0 1 .75-.75zM9.5 14.5H5.559A4.754 4.754 0 0 0 9.5 18.442V14.5zm5.441 0H11v3.941a4.754 4.754 0 0 0 3.941-3.94zm-5.44-5.442A4.754 4.754 0 0 0 5.558 13H9.5V9.058zm1.5 0L11 13h3.942a4.755 4.755 0 0 0-3.726-3.902L11 9.058z",fill:"currentColor"})],-1),zs=[Bs],Ls=e(wt,Ms)({name:"PointScan24Regular",render:function(t,s){return e(wt,Is)(),e(wt,Ns)("svg",Cs,zs)}}),it=await C("vue"),Ut="createElementVNode",Vs="openBlock",Ss="createElementBlock",Ds="defineComponent",js={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Os=e(it,Ut)("rect",{x:"48",y:"80",width:"416",height:"352",rx:"48",ry:"48",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),Fs=e(it,Ut)("circle",{cx:"336",cy:"176",r:"32",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),Hs=e(it,Ut)("path",{d:"M304 335.79l-90.66-90.49a32 32 0 0 0-43.87-1.3L48 352",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),As=e(it,Ut)("path",{d:"M224 432l123.34-123.34a32 32 0 0 1 43.11-2L464 368",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Ps=[Os,Fs,Hs,As],hn=e(it,Ds)({name:"ImageOutline",render:function(t,s){return e(it,Vs)(),e(it,Ss)("svg",js,Ps)}});function Us(t){const s=t.filter(o=>L(o)),i=[];let m=0;s.forEach(o=>{const n=o.points.at(-1);if(i.some(a=>W(a.point,n)))return;const r=s.filter(a=>o!==a&&W(n,a.points.at(0))).length;r?(i.push({point:n,branch:s.filter(a=>o!==a&&W(n,a.points.at(1))).length+r>1,index:m}),i.at(-1).branch||(m+=1)):s.filter(a=>o!==a&&(W(o.points.at(-1),a.points.at(0))||W(o.points.at(0),a.points.at(-1)))).length||(i.push({point:o.points.at(0),index:m}),m+=1)});const l=s.map(o=>{const n=i.findIndex(a=>W(a.point,o.points.at(0))),r=i.findIndex(a=>W(a.point,o.points.at(-1)));return{source:n===-1?void 0:n,target:r===-1?void 0:r}});return{nodes:i,edges:l}}const $s=await C("@rdx/admin"),Rs=await C("@rdx/shared"),pn=await C("@lowcode-fe/designer/designer"),_=await C("vue"),_s=await C("naive-ui"),Ts="NModal",mn="createTextVNode",J="createVNode",Ws="mergeProps",fn="CodeEditor",qs="defineComponent",Ks="createModalProps",Ys="presetStyleModal",Xs=e(_,qs)({props:{...e(Rs,Ks)()},setup(t){return()=>e(_,J)(e(_s,Ts),e(_,Ws)({preset:"card",showIcon:!1,maskClosable:!1,title:"\u6D41\u7A0B\u53C2\u6570",show:t.show,"onUpdate:show":t["onUpdate:show"],style:{width:"1200px"},size:"small",autoFocus:!1},e($s,Ys)),{default:()=>{var s,i;return[e(_,J)("div",{class:"un-flex un-gap-8px"},[e(_,J)("div",{class:"un-flex-1"},[e(_,J)("div",{class:"un-px-12px un-lh-32px"},[e(_,mn)("\u8282\u70B9")]),e(_,J)("div",{style:"height: calc(100vh - 240px);"},[e(_,J)(e(pn,fn),{readOnly:!0,value:`[
${(s=t.data)==null?void 0:s.nodes.map(m=>`  {
    ${m.branch?"branch: true":"on: true"},
    location: [${m.point[0]}, ${m.point[1]}],${m.branch?"":` // ${m.index}`}
  },`).join(`\r
`)}
]`},null)])]),e(_,J)("div",{class:"un-w-400px"},[e(_,J)("div",{class:"un-px-12px un-lh-32px"},[e(_,mn)("\u8FDE\u63A5\u7EBF")]),e(_,J)("div",{style:"height: calc(100vh - 240px);"},[e(_,J)(e(pn,fn),{readOnly:!0,value:`[
${(i=t.data)==null?void 0:i.edges.map(m=>`  { ${["source","target"].filter(l=>m[l]!==void 0).map(l=>`${l}: ${m[l]}`).join(", ")} },`).join(`\r
`)}
]`},null)])])])]}})}}),Gs=await C("@rdx/admin"),E=await C("vue"),V=await C("naive-ui"),Js="NDivider",Qs="NButtonGroup",Zs="NDivider",tr="NColorPicker",er="NIcon",nr="NButton",or="NInputNumber",ir="NFormItem",lr="NInputNumber",ar="NFormItem",sr="NInputNumber",rr="NFormItem",cr="NInputNumber",ur="NFormItem",dr="NIcon",hr="NButton",pr="NDivider",mr="NInput",fr="NFormItem",vr="NPopover",xr="NDivider",gr="NDivider",wr="NButtonGroup",yr="NDivider",Er="NInputNumber",kr="NInputGroupLabel",br="NInputGroup",Ir="NDivider",Nr="NIcon",Mr="NButton",Cr="NIcon",Br="NIcon",zr="NPopover",Lr="NIcon",Vr="NButton",Sr="NTooltip",Dr="NIcon",jr="NButton",Or="NTooltip",Fr="NIcon",Hr="NButton",Ar="NTooltip",Pr="isVNode",I="createVNode",Ur="Fragment",xe="createTextVNode",$r="defineComponent",vn="ref",Rr="preferMessage";function ge(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!e(E,Pr)(t)}let xn,we,$t,ye,q,Ee,gn,wn,lt,ke,yn,En,kn,bn,In,Nn,Mn,Cn,Bn,zn,Ln,Vn,D,H,Sn,Dn,jn,On,Fn,Hn,An,Pn,Un,$n,Rn,_n,Tn,Wn,qn,Kn,Yn,Xn,Gn,Jn,Qn,Zn,to,eo,no,oo,io,lo,j,ao,so,ro,co;xn=e(E,$r)({props:{meta:{type:Object,required:!0},state:{type:Object,required:!0},hack:{type:Function,required:!0},onSave:{type:Function,required:!0}},setup(t){const s=$(()=>t.meta,"bgImage"),i=$(()=>t.meta,"bgLeft",0),m=$(()=>t.meta,"bgRight",0),l=$(()=>t.meta,"bgTop",0),o=$(()=>t.meta,"bgBottom",0),n=(g,z,p)=>e(E,I)(e(V,Ar),null,{default:()=>[p],trigger:()=>e(E,I)(e(V,Hr),{type:t.state.mode===z?"primary":"default",ghost:!0,size:"small",onClick:()=>{const N=st(t.state);ut(t.state,z),F(t.state,()=>rt(t.state,N))},focusable:!1},{default:()=>[e(E,I)(e(V,Fr),null,ge(g)?g:{default:()=>[g]})]})}),r=(g,z,p)=>e(E,I)(e(V,Or),null,{default:()=>[p],trigger:()=>e(E,I)(e(V,jr),{type:t.state[z]?"primary":"default",ghost:!0,size:"small",onClick:()=>t.state[z]=!t.state[z],focusable:!1},{default:()=>[e(E,I)(e(V,Dr),null,ge(g)?g:{default:()=>[g]})]})}),a=(g,z,p)=>e(E,I)(e(V,Sr),null,{default:()=>[z],trigger:()=>e(E,I)(e(V,Vr),{type:"default",ghost:!0,size:"small",onClick:p,focusable:!1},{default:()=>[e(E,I)(e(V,Lr),null,ge(g)?g:{default:()=>[g]})]})}),x=()=>{const g=document.createElement("input");g.style.display="none",g.type="file",g.onchange=z=>{var p;t.state.background=(p=z.target.files)==null?void 0:p[0]},document.body.appendChild(g),g.click(),g.remove()},k=$(()=>t.state,"color"),h=()=>{t.state.curElement?t.state.curElement.color=k.v:k.on()},u=[{key:"ctrl + s",desc:"\u4FDD\u5B58"},{key:"ctrl + a",desc:"\u5168\u9009"},{key:"ctrl + b",desc:"\u65B0\u589E\u62D0\u70B9"},{key:"ctrl + d",desc:"\u5206\u5272\u7EBF"},{key:"ctrl + m",desc:"\u5408\u5E76\u7EBF"},{key:"ctrl + j",desc:"\u8DF3\u7EBF"},{key:"ctrl + z",desc:"\u64A4\u9500"},{key:"tab",desc:"\u9009\u4E2D\u4E0B\u4E00\u4E2A"},{key:"space",desc:"\u7ED3\u675F\u753B\u7EBF"},{key:"delete",desc:"\u5220\u9664\u5143\u7D20"}],b=e(E,vn)(!1),w=e(E,vn)();return()=>e(E,I)(e(E,Ur),null,[e(E,I)("div",{class:"un-flex un-items-center un-text-14px un-gap-8px"},[e(E,I)(e(V,zr),null,{default:()=>[e(E,I)("div",{class:"un-flex un-flex-col un-gap-8px"},[u.map(g=>e(E,I)("div",{key:g.key,class:"un-flex"},[e(E,I)("div",{class:"un-w-60px un-text-center un-bg-#eaeaea un-rounded-3px"},[g.key]),e(E,I)("div",{class:"un-ml-8px"},[g.desc])])),e(E,I)("div",{class:"un-flex un-gap-8px"},[e(E,I)("div",{class:"un-flex un-items-center"},[e(E,I)(e(V,Br),{color:"#f00"},{default:()=>[e(E,I)(St,null,null)]}),e(E,I)("div",{class:"un-ml-8px"},[e(E,xe)("\u8D77\u70B9")])]),e(E,I)("div",{class:"un-flex un-items-center"},[e(E,I)(e(V,Cr),{color:"#0f0"},{default:()=>[e(E,I)(St,null,null)]}),e(E,I)("div",{class:"un-ml-8px"},[e(E,xe)("\u7EC8\u70B9")])])])])],trigger:()=>e(E,I)(e(V,Mr),{ghost:!0,size:"small",focusable:!1},{default:()=>[e(E,I)(e(V,Nr),null,{default:()=>[e(E,I)(Pa,null,null)]})]})}),e(E,I)(e(V,Ir),{vertical:!0},null),e(E,I)(e(V,br),{class:"un-w-96px"},{default:()=>[e(E,I)(e(V,kr),{size:"small"},{default:()=>[e(E,xe)("\u6B65\u8DDD")]}),e(E,I)(e(V,Er),{size:"small",value:t.state.stepPace,"onUpdate:value":g=>t.state.stepPace=g,showButton:!1},null)]}),a(e(E,I)(bs,null,null),"\u89E3\u6790\u6D41\u7A0B",()=>{const g=Us(Array.from(t.state.selectElements));if(!g.nodes.length){e(Gs,Rr).warning("\u8BF7\u5148\u9009\u62E9\u7EBF");return}b.value=!0,w.value=g,t.state.selectElements.clear()}),e(E,I)(e(V,yr),{vertical:!0},null),e(E,I)(e(V,wr),null,{default:()=>[n(e(E,I)(es,null,null),"select","\u9009\u62E9"),n(e(E,I)(nn,null,null),"rect","\u6846"),n(e(E,I)(tn,null,null),"line","\u7EBF"),n(e(E,I)(St,null,null),"point","\u70B9")]}),e(E,I)(e(V,gr),{vertical:!0},null),r("\u221F","orthogonal","\u6B63\u4EA4"),r(e(E,I)(Ls,null,null),"pickup","\u5BF9\u8C61\u62FE\u53D6"),e(E,I)(e(V,xr),{vertical:!0},null),e(E,I)(e(V,vr),null,{default:()=>[e(E,I)("div",{class:"un-flex un-items-center un-gap-6px"},[e(E,I)(e(V,fr),{label:"\u80CC\u666F\u56FE\u7247:",labelPlacement:"left",showFeedback:!1},{default:()=>[e(E,I)(e(V,mr),{value:s.v,"onUpdate:value":g=>s.v=g,onBlur:s.on},null)]}),e(E,I)(e(V,pr),{vertical:!0},null),e(E,I)(e(V,hr),{ghost:!0,size:"small",onClick:x,focusable:!1},{default:()=>[e(E,I)(e(V,dr),null,{default:()=>[e(E,I)(hn,null,null)]})]})]),e(E,I)("div",{class:"un-grid un-grid-cols-2 un-gap-12px un-mt-12px"},[e(E,I)(e(V,ur),{label:"\u5DE6:",labelPlacement:"left",showFeedback:!1},{default:()=>[e(E,I)(e(V,cr),{value:i.v,"onUpdate:value":g=>i.v=g,onBlur:i.on,class:"un-w-120px"},null)]}),e(E,I)(e(V,rr),{label:"\u53F3:",labelPlacement:"left",showFeedback:!1},{default:()=>[e(E,I)(e(V,sr),{value:m.v,"onUpdate:value":g=>m.v=g,onBlur:m.on,class:"un-w-120px"},null)]}),e(E,I)(e(V,ar),{label:"\u4E0A:",labelPlacement:"left",showFeedback:!1},{default:()=>[e(E,I)(e(V,lr),{value:l.v,"onUpdate:value":g=>l.v=g,onBlur:l.on,class:"un-w-120px"},null)]}),e(E,I)(e(V,ir),{label:"\u4E0B:",labelPlacement:"left",showFeedback:!1},{default:()=>[e(E,I)(e(V,or),{value:o.v,"onUpdate:value":g=>o.v=g,onBlur:o.on,class:"un-w-120px"},null)]})])],trigger:()=>e(E,I)(e(V,nr),{ghost:!0,size:"small",focusable:!1},{default:()=>[e(E,I)(e(V,er),null,{default:()=>[e(E,I)(hn,null,null)]})]})}),e(E,I)(e(V,tr),{value:k.v,"onUpdate:value":g=>k.v=g,onComplete:h,size:"small",renderLabel:()=>null,class:"un-w-34px"},null),e(E,I)(e(V,Zs),{vertical:!0},null),e(E,I)(e(V,Qs),null,{default:()=>[a(e(E,I)(rn,null,null),"\u6C34\u5E73\u5206\u5E03",()=>{const g=Array.from(t.state.selectElements).filter(p=>!L(p));if(g.length<=2)return;const z=g.map(p=>B(p)?p.x:p.location[0]);No(g)&&F(t.state,()=>{g.forEach((p,N)=>{B(p)?p.x=z[N]:p.location[0]=z[N]})})}),a(e(E,I)(rn,{style:"transform: rotate(90deg)"},null),"\u5782\u76F4\u5206\u5E03",()=>{const g=Array.from(t.state.selectElements).filter(p=>!L(p));if(g.length<=2)return;const z=g.map(p=>B(p)?p.y:p.location[1]);Mo(g)&&F(t.state,()=>{g.forEach((p,N)=>{B(p)?p.y=z[N]:p.location[1]=z[N]})})}),a(e(E,I)(Pt,{style:"transform: rotate(-90deg)"},null),"\u5DE6\u5BF9\u9F50",()=>{if(t.state.selectElements.size<2)return;const g=Array.from(t.state.selectElements).filter(p=>!L(p)),z=Math.min(...g.map(p=>B(p)?p.x:p.location[0]));g.forEach(p=>{if(B(p)){const N=p.x;F(t.state,()=>p.x=N),p.x=z}else if(!L(p)){const N=p.location[0];F(t.state,()=>p.location[0]=N),p.location[0]=z}})}),a(e(E,I)(Pt,{style:"transform: rotate(90deg)"},null),"\u53F3\u5BF9\u9F50",()=>{if(t.state.selectElements.size<2)return;const g=Array.from(t.state.selectElements).filter(p=>!L(p)),z=Math.max(...g.map(p=>B(p)?p.x+p.width:p.location[0]));g.forEach(p=>{if(B(p)){const N=p.x;F(t.state,()=>p.x=N),p.x=z-p.width}else if(!L(p)){const N=p.location[0];F(t.state,()=>p.location[0]=N),p.location[0]=z}})}),a(e(E,I)(Pt,null,null),"\u4E0A\u5BF9\u9F50",()=>{if(t.state.selectElements.size<2)return;const g=Array.from(t.state.selectElements).filter(p=>!L(p)),z=Math.min(...g.map(p=>B(p)?p.y:p.location[1]));g.forEach(p=>{if(B(p)){const N=p.y;F(t.state,()=>p.y=N),p.y=z}else if(!L(p)){const N=p.location[1];F(t.state,()=>p.location[1]=N),p.location[1]=z}})}),a(e(E,I)(Pt,{style:"transform: rotate(180deg)"},null),"\u4E0B\u5BF9\u9F50",()=>{if(t.state.selectElements.size<2)return;const g=Array.from(t.state.selectElements).filter(p=>!L(p)),z=Math.max(...g.map(p=>B(p)?p.y+p.height:p.location[1]));g.forEach(p=>{if(B(p)){const N=p.y;F(t.state,()=>p.y=N),p.y=z-p.height}else if(!L(p)){const N=p.location[1];F(t.state,()=>p.location[1]=N),p.location[1]=z}})})]}),e(E,I)(e(V,Js),{vertical:!0},null),a(e(E,I)(cs,null,null),"\u5206\u7EC4\u6392\u5E8F",async()=>{await t.hack(),t.state.elements=Io(t.state.elements,"variableKey")}),a(e(E,I)(Ka,null,null),"\u4FDD\u5B58",t.onSave)]),e(E,I)(Xs,{show:b.value,"onUpdate:show":g=>b.value=g,data:w.value},null)])}}),we=await C("@rdx/admin"),$t=await C("@rdx/shared"),ye=await C("@lowcode-fe/designer/designer"),q=await C("vue"),Ee=await C("naive-ui"),gn="NDrawerContent",wn="NDrawer",lt="createVNode",ke="useDesginer",yn="defineComponent",En="reactive",kn="ref",bn="nextTick",In="createModalProps",Nn="useModalLogic",Mn="convertListToMap",Cn="useColors",Bn="preferMessage",zn=e(q,yn)({props:{meta:{type:Object,required:!0},...e($t,In)()},setup(t){const{pauseShortcut:s,continueShortcut:i}=e(ye,ke)(),m=e(we,Cn)(),l=e(q,En)({mode:"select",elements:[],location:[0,0],scale:1,stepPace:1,pickup:!0,orthogonal:!0,rollbackStack:[],translateX:0,translateY:0,background:null,color:m.value.primaryColor,canBlur:!0,selectElements:new Set}),o={};e($t,Nn)({props:t,onShow:()=>{s();const z=k(x()).filter(N=>N.metaCode==="slot"),p=t.meta.elements;p?(p.forEach((N,d)=>{N.name=z[d].name,o[N.uid]=z[d]}),l.elements=JSON.parse(JSON.stringify(p))):l.elements=[],ut(l),bo(l.elements.length?Math.max(...l.elements.map(N=>N.uid)):0)},onClose(){i()}});const{createElement:n,removeChild:r,appendChild:a,getCurElement:x,getChildren:k,insertBefore:h,getParent:u}=e(ye,ke)(),b=()=>{var N;const z=e($t,Mn)(l.elements.filter(d=>d.slotIndex!==void 0),"slotIndex",!0),p=k(x()).filter(d=>d.metaCode==="slot");(N=t.meta.elements)==null||N.forEach(d=>{z[d.slotIndex]||r(p[d.slotIndex])}),l.elements.forEach(d=>{if(d.slotIndex===void 0){const c=o[d.uid]=n({metaCode:"slot",name:d.name,preset:{children:[]}});a(c)}}),l.elements.forEach((d,c)=>{d.slotIndex=c,o[d.uid].name=d.name});for(let d=l.elements.length-1;d>=0;d-=1){const c=o[l.elements[d].uid];h(c,k(u(c))[0])}t.meta.elements=JSON.parse(JSON.stringify(l.elements)),e(we,Bn).success("\u4FDD\u5B58\u6210\u529F")},w=e(q,kn)(!0),g=async()=>{w.value=!1,await e(q,bn)(),w.value=!0};return()=>e(q,lt)(e(Ee,wn),{maskClosable:!1,show:t.show,"onUpdate:show":t["onUpdate:show"],style:"width: 100vw;",autoFocus:!1,themeOverrides:{headerPadding:"8px 16px",bodyPadding:"0"},closeOnEsc:!1},{default:()=>[e(q,lt)(e(Ee,gn),{closable:!0,bodyStyle:"background: #f2f4fa;"},{default:()=>[e(q,lt)("div",{class:"un-h-full un-flex"},[e(q,lt)(Ia,{state:l,hack:g},null),w.value?e(q,lt)(kl,{meta:t.meta,state:l,onSave:b},null):null])],header:()=>e(q,lt)(xn,{state:l,meta:t.meta,hack:g,onSave:b},null)})]})}}),Ln=await C("@rdx/shared"),Vn=await C("@lowcode-fe/designer/designer"),D=await C("vue"),H=await C("naive-ui"),Sn="NInputNumber",Dn="NFormItem",jn="NInputNumber",On="NFormItem",Fn="NInputNumber",Hn="NFormItem",An="NInputNumber",Pn="NFormItem",Un="NCollapseItem",$n="NCollapse",Rn="NInput",_n="NFormItem",Tn="NIcon",Wn="NButton",qn="NInputNumber",Kn="NFormItem",Yn="NSelect",Xn="NFormItem",Gn="NInputNumber",Jn="NFormItem",Qn="NInputNumber",Zn="NFormItem",to="NInputNumber",eo="NFormItem",no="NInputNumber",oo="NFormItem",io="NInput",lo="NFormItem",j="createVNode",ao="createTextVNode",so="useRegisterVar",ro="defineComponent",co="useBoolean",mo=e(D,ro)({props:{meta:{type:Object,required:!0}},setup(t){const s=$(()=>t.meta,"xMin",0),i=$(()=>t.meta,"xMax",1920),m=$(()=>t.meta,"yMin",0),l=$(()=>t.meta,"yMax",1080),o=$(()=>t.meta,"bgImage"),n=$(()=>t.meta,"bgLeft",0),r=$(()=>t.meta,"bgRight",0),a=$(()=>t.meta,"bgTop",0),x=$(()=>t.meta,"bgBottom",0),k=$(()=>t.meta,"dpr",1),h=$(()=>t.meta,"scopeKey","canvas");e(Vn,so)(w=>{const g=t.meta.scopeKey??"canvas";w("coord",`$g('${g}Coord')`,"\u5750\u6807\u7CFB",!0),w("points",`$g('${g}Graphic').points`,"\u56FE\u5F62\u5750\u6807",!0),w("data",`$g('${g}Graphic').data`,"\u56FE\u5F62\u6570\u636E",!0),w("data",`$g('${g}Graphic').index`,"\u56FE\u5F62\u6570\u636E\u4E0B\u6807",!0)});const{booleanRef:u,setTrue:b}=e(Ln,co)();return()=>e(D,j)("div",{class:"un-py-12px"},[e(D,j)("div",{class:"un-px-12px"},[e(D,j)(e(H,lo),{label:"\u7EC4\u4EF6\u6807\u8BC6"},{default:()=>[e(D,j)(e(H,io),{value:h.v,"onUpdate:value":w=>h.v=w,onBlur:h.on},null)]}),e(D,j)("div",{class:"un-grid un-grid-cols-2 un-gap-x-8px"},[e(D,j)(e(H,oo),{label:"XMin"},{default:()=>[e(D,j)(e(H,no),{value:s.v,"onUpdate:value":w=>s.v=w,onBlur:s.on},null)]}),e(D,j)(e(H,eo),{label:"XMax"},{default:()=>[e(D,j)(e(H,to),{value:i.v,"onUpdate:value":w=>i.v=w,onBlur:i.on},null)]}),e(D,j)(e(H,Zn),{label:"YMin"},{default:()=>[e(D,j)(e(H,Qn),{value:m.v,"onUpdate:value":w=>m.v=w,onBlur:m.on},null)]}),e(D,j)(e(H,Jn),{label:"YMax"},{default:()=>[e(D,j)(e(H,Gn),{value:l.v,"onUpdate:value":w=>l.v=w,onBlur:l.on},null)]}),e(D,j)(e(H,Xn),{label:"\u6E32\u67D3\u5668"},{default:()=>[e(D,j)(e(H,Yn),{defaultValue:"canvas",value:t.meta.renderer,"onUpdate:value":w=>t.meta.renderer=w,options:[{label:"canvas",value:"canvas"},{label:"svg",value:"svg"}]},null)]}),e(D,j)(e(H,Kn),{label:"dpr"},{default:()=>[e(D,j)(e(H,qn),{value:k.v,"onUpdate:value":w=>k.v=w,onBlur:k.on,min:1},null)]})]),e(D,j)(e(H,Wn),{block:!0,size:"small",class:"un-justify-between",iconPlacement:"right",onClick:b},{default:()=>[e(D,ao)("\u7ED8\u5236\u56FE\u5F62")],icon:()=>e(D,j)(e(H,Tn),{size:14},{default:()=>[e(D,j)(ko,null,null)]})}),e(D,j)(e(H,_n),{label:"\u80CC\u666F\u56FE\u7247",showFeedback:!1,class:"un-mt-12px"},{default:()=>[e(D,j)(e(H,Rn),{value:o.v,"onUpdate:value":w=>o.v=w,onBlur:o.on},null)]})]),e(D,j)(e(H,$n),{class:"un-mt-12px"},{default:()=>[e(D,j)(e(H,Un),{title:"\u8FB9\u8DDD",name:1},{default:()=>[e(D,j)("div",{class:"un-pl-12px un-grid un-grid-cols-2 un-gap-8px"},[e(D,j)(e(H,Pn),{label:"\u5DE6",showFeedback:!1},{default:()=>[e(D,j)(e(H,An),{value:n.v,"onUpdate:value":w=>n.v=w,onBlur:n.on,class:"un-w-120px"},null)]}),e(D,j)(e(H,Hn),{label:"\u53F3",showFeedback:!1},{default:()=>[e(D,j)(e(H,Fn),{value:r.v,"onUpdate:value":w=>r.v=w,onBlur:r.on,class:"un-w-120px"},null)]}),e(D,j)(e(H,On),{label:"\u4E0A",showFeedback:!1},{default:()=>[e(D,j)(e(H,jn),{value:a.v,"onUpdate:value":w=>a.v=w,onBlur:a.on,class:"un-w-120px"},null)]}),e(D,j)(e(H,Dn),{label:"\u4E0B",showFeedback:!1},{default:()=>[e(D,j)(e(H,Sn),{value:x.v,"onUpdate:value":w=>x.v=w,onBlur:x.on,class:"un-w-120px"},null)]})])]})]}),e(D,j)(zn,{show:u.value,"onUpdate:show":w=>u.value=w,meta:t.meta},null)])}})});export{mo as Canvas,Tr as __tla};
