import{b as D,a as i}from"./federation-shared-1482b2fe.js";let H,J,K,Q,ne=(async()=>{const j={black:"#000",silver:"#C0C0C0",gray:"#808080",white:"#FFF",maroon:"#800000",red:"#F00",purple:"#800080",fuchsia:"#F0F",green:"#008000",lime:"#0F0",olive:"#808000",yellow:"#FF0",navy:"#000080",blue:"#00F",teal:"#008080",aqua:"#0FF",transparent:"#0000"},E="^\\s*",q="\\s*$",w="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",y="([0-9A-Fa-f])",$="([0-9A-Fa-f]{2})",S=new RegExp(`${E}rgb\\s*\\(${w},${w},${w}\\)${q}`),U=new RegExp(`${E}rgba\\s*\\(${w},${w},${w},${w}\\)${q}`),ee=new RegExp(`${E}#${y}${y}${y}${q}`),ae=new RegExp(`${E}#${$}${$}${$}${q}`),te=new RegExp(`${E}#${y}${y}${y}${y}${q}`),re=new RegExp(`${E}#${$}${$}${$}${$}${q}`);function p(a){return parseInt(a,16)}function R(a){try{let e;if(e=ae.exec(a))return[p(e[1]),p(e[2]),p(e[3]),1];if(e=S.exec(a))return[z(e[1]),z(e[5]),z(e[9]),1];if(e=U.exec(a))return[z(e[1]),z(e[5]),z(e[9]),k(e[13])];if(e=ee.exec(a))return[p(e[1]+e[1]),p(e[2]+e[2]),p(e[3]+e[3]),1];if(e=re.exec(a))return[p(e[1]),p(e[2]),p(e[3]),k(p(e[4])/255)];if(e=te.exec(a))return[p(e[1]+e[1]),p(e[2]+e[2]),p(e[3]+e[3]),k(p(e[4]+e[4])/255)];if(a in j)return R(j[a]);throw new Error(`[seemly/rgba]: Invalid color value ${a}.`)}catch(e){throw e}}function k(a){const e=Math.round(Number(a)*100)/100;return e>1?1:e<0?0:e}function z(a){const e=Math.round(Number(a));return e>255?255:e<0?0:e}let A,g,x,h,W,O,F,P,G,X,C,L,V,f,B,Y,N,T,b,Z,I,_;A=await D("zrender"),g=await D("@rdx/shared"),x=await D("@lowcode-fe/designer/common"),h=await D("vue"),W="mergeProps",O="createVNode",F="useExprValue",P="Graphic",G="Circle",X="Polyline",C="defineComponent",L="ref",V="watchEffect",f="computed",B="colors",Y="useZRenderGraphicLogic",N="useCoordinateInst",T=a=>new Promise((e,c)=>{const s=new Image;s.onload=()=>e(s),s.onerror=()=>c(s),s.src=a}),b=(a,e,c,s,d,o,t,u,r,n)=>{const l=a.getContext("2d");return r!==void 0&&n!==void 0?l==null||l.drawImage(e,t,u,r,n,c,s,d,o):r!==void 0?l==null||l.drawImage(e,t,u,r,o/d*r,c,s,d,o):n!==void 0?l==null||l.drawImage(e,t,u,d/o*n,n,c,s,d,o):l==null||l.drawImage(e,c,s,d,o),a},Z=async a=>{var M;const{image:e,dx:c=0,dy:s=0,dw:d,dh:o,sx:t=0,sy:u=0,sw:r,sh:n}=a,l=await T(e);if(d!==void 0&&o!==void 0){const m=document.createElement("canvas");return m.width=d,m.height=o,b(m,l,c,s,d,o,t,u,r,n)}if(d!==void 0){const m=document.createElement("canvas");m.width=d;const v=m.height=d/l.width*l.height;return b(m,l,c,s,d,v,t,u,r,n)}if(o!==void 0){const m=document.createElement("canvas"),v=m.width=o/l.height*l.width;return m.height=o,b(m,l,c,s,v,o,t,u,r,n)}if(r!==void 0&&n!==void 0){const m=document.createElement("canvas");return m.width=r,m.height=n,(M=m.getContext("2d"))==null||M.drawImage(l,c,s,r,n,t,u,r,n),b(m,l,c,s,r,n,t,u,r,n)}if(r!==void 0){const m=document.createElement("canvas");m.width=r;const v=m.height=r/l.width*l.height;return b(m,l,c,s,r,v,t,u,r,v)}if(n!==void 0){const m=document.createElement("canvas"),v=m.width=n/l.height*l.width;return m.height=n,b(m,l,c,s,v,n,t,u,v,n)}return l},K=i(h,C)({props:{meta:{type:Object,required:!0}},setup(a){const e=i(x,F)(()=>a.meta.points),c=i(x,F)(()=>a.meta.image),s=i(h,L)(),d=i(x,F)(()=>a.meta.props);return i(h,V)(async()=>{const o=a.meta.isExprImage?c.value:a.meta.image;o?s.value=await Z({...a.meta,image:o}):s.value=void 0}),()=>{var o,t;return i(h,O)(i(g,P),i(h,W)({graphic:i(A,X)},d.value??{},{shape:{points:e.value,smooth:a.meta.smooth,...((o=d.value)==null?void 0:o.shape)??{}},style:{lineWidth:a.meta.lineWidth??1,stroke:s.value?{image:s.value}:a.meta.strokeColor??i(g,B).primaryColor,lineDash:a.meta.lineDash,fill:a.meta.fill,fillOpacity:a.meta.fillOpacity,...((t=d.value)==null?void 0:t.style)??{}}}),null)}}}),I=(a,e)=>Math.sqrt(Math.pow(e[0]-a[0],2)+Math.pow(e[1]-a[1],2)),_=i(h,C)({props:{index:{type:Number,required:!0},total:{type:Number,required:!0},radius:{type:Number,required:!0},delay:{type:Number,required:!0},z:{type:Number,required:!0},color:{type:Array,required:!0},path:{type:Array,required:!0},whens:{type:Array,required:!0},opacity:Boolean},setup(a){return i(g,Y)(()=>{const[e,c,s,d]=a.color,o=new(i(A,G))({shape:{r:a.radius},style:{fill:`rgba(${e}, ${c}, ${s}, ${a.opacity?d-d/a.total*a.index:1})`},z:a.z}),t=o.animate("shape",!0).delay(a.index*a.delay);return a.path.forEach(([u,r],n)=>{t.when(a.whens[n],{cx:u,cy:r})}),t.done(()=>{o.__zr.remove(o)}).start(),o}),()=>null}}),Q=i(h,C)({inheritAttrs:!1,props:{meta:{type:Object,required:!0}},setup(a){const e=i(x,F)(()=>a.meta.points),c=i(g,N)(),s=i(h,f)(()=>{const o=c.value;return o?Math.max(o.coordX(a.meta.speed??100)-o.coordX(0),o.coordY(a.meta.speed??100)-o.coordY(0))/1e3:0}),d=i(h,f)(()=>{var t;if(!c.value)return[];const o=s.value;return((t=e.value)==null?void 0:t.reduce((u,r,n,l)=>(n===0?u.push(0):u.push(u[n-1]+I(l[n-1],r)/o),u),[]))??[]});return()=>{const o=a.meta.radius??2,t=o/s.value*(a.meta.multiple??1.25),u=R(a.meta.color??"#FFFFFFFF");return e.value.length?Array.from({length:a.meta.items??40}).map((r,n,{length:l})=>i(h,O)(_,{index:n,key:n,path:e.value,whens:d.value??[],total:l,radius:o,delay:t,color:u,z:a.meta.z??10,opacity:!0},null)):null}}}),J=i(h,C)({inheritAttrs:!1,props:{meta:{type:Object,required:!0}},setup(a){const e=i(x,F)(()=>a.meta.points),c=i(g,N)(),s=i(h,f)(()=>{const t=c.value;return t?Math.max(t.coordX(a.meta.speed??50)-t.coordX(0),t.coordY(a.meta.speed??50)-t.coordY(0))/1e3:0}),d=i(h,f)(()=>{var u;if(!c.value)return[];const t=s.value;return((u=e.value)==null?void 0:u.reduce((r,n,l,M)=>(l===0?r.push(0):r.push(r[l-1]+I(M[l-1],n)/t),r),[]))??[]}),o=i(h,f)(()=>{var u;if(!((u=e.value)!=null&&u.length))return 0;let t=0;for(let r=1;r<e.value.length;r+=1)t+=I(e.value[r-1],e.value[r]);return t});return()=>{var l;const t=a.meta.radius??2,u=R(a.meta.color??"#FFFFFFFF"),r=Math.max(1,~~(o.value/(a.meta.gap??28))),n=(((l=d.value)==null?void 0:l.at(-1))??0)/r;return e.value.length?Array.from({length:r}).map((M,m,{length:v})=>i(h,O)(_,{index:m,key:m,path:e.value,whens:d.value??[],total:v,radius:t,delay:n,color:u,z:a.meta.z??10},null)):null}}}),H=i(h,C)({props:{meta:{type:Object,required:!0}},setup(a){const e=i(x,F)(()=>a.meta.points),c=i(g,N)(),s=i(h,f)(()=>{const t=c.value;return t?Math.max(t.coordX(a.meta.speed??50)-t.coordX(0),t.coordY(a.meta.speed??50)-t.coordY(0))/1e3:0}),d=i(h,f)(()=>{var r;if(!c.value||!((r=e.value)!=null&&r.length))return 0;const t=s.value;let u=0;for(let n=1;n<e.value.length;n+=1)u+=I(e.value[n-1],e.value[n])/t;return u}),o=i(h,f)(()=>{var r;if(!((r=e.value)!=null&&r.length))return 0;let t=0;for(let n=1;n<e.value.length;n+=1)t+=I(e.value[n-1],e.value[n]);const u=(a.meta.len??20)+(a.meta.gap??20);return Math.max(1,~~(t/u))*u});return i(g,Y)(()=>{if(!d.value)return;const t=new(i(A,X))({shape:{points:e.value},style:{stroke:a.meta.color??"#ffffff",lineDash:[a.meta.len??20,a.meta.gap??20],lineDashOffset:0,lineWidth:a.meta.lineWidth??3},z:a.meta.z}),u=t.animate("style",!0);return u.when(0,{lineDashOffset:o.value}).when(d.value,{lineDashOffset:0}),u.done(()=>{t.__zr.remove(t)}).start(),t}),()=>null}})})();export{H as Dashed,J as Flow,K as Line,Q as Trailing,ne as __tla};
