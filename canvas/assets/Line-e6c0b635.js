import{b as R,a as u}from"./federation-shared-1482b2fe.js";let Z,H,K,Q,ne=(async()=>{const j={black:"#000",silver:"#C0C0C0",gray:"#808080",white:"#FFF",maroon:"#800000",red:"#F00",purple:"#800080",fuchsia:"#F0F",green:"#008000",lime:"#0F0",olive:"#808000",yellow:"#FF0",navy:"#000080",blue:"#00F",teal:"#008080",aqua:"#0FF",transparent:"#0000"},E="^\\s*",q="\\s*$",w="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",y="([0-9A-Fa-f])",$="([0-9A-Fa-f]{2})",S=new RegExp(`${E}rgb\\s*\\(${w},${w},${w}\\)${q}`),U=new RegExp(`${E}rgba\\s*\\(${w},${w},${w},${w}\\)${q}`),ee=new RegExp(`${E}#${y}${y}${y}${q}`),ae=new RegExp(`${E}#${$}${$}${$}${q}`),te=new RegExp(`${E}#${y}${y}${y}${y}${q}`),re=new RegExp(`${E}#${$}${$}${$}${$}${q}`);function p(a){return parseInt(a,16)}function k(a){try{let e;if(e=ae.exec(a))return[p(e[1]),p(e[2]),p(e[3]),1];if(e=S.exec(a))return[z(e[1]),z(e[5]),z(e[9]),1];if(e=U.exec(a))return[z(e[1]),z(e[5]),z(e[9]),D(e[13])];if(e=ee.exec(a))return[p(e[1]+e[1]),p(e[2]+e[2]),p(e[3]+e[3]),1];if(e=re.exec(a))return[p(e[1]),p(e[2]),p(e[3]),D(p(e[4])/255)];if(e=te.exec(a))return[p(e[1]+e[1]),p(e[2]+e[2]),p(e[3]+e[3]),D(p(e[4]+e[4])/255)];if(a in j)return k(j[a]);throw new Error(`[seemly/rgba]: Invalid color value ${a}.`)}catch(e){throw e}}function D(a){const e=Math.round(Number(a)*100)/100;return e>1?1:e<0?0:e}function z(a){const e=Math.round(Number(a));return e>255?255:e<0?0:e}let A,f,x,h,W,N,F,P,G,X,C,J,L,g,V,Y,O,B,b,T,I,_;A=await R("zrender"),f=await R("@rdx/shared"),x=await R("@lowcode-fe/designer/common"),h=await R("vue"),W="mergeProps",N="createVNode",F="useExprValue",P="Graphic",G="Circle",X="Polyline",C="defineComponent",J="ref",L="watchEffect",g="computed",V="colors",Y="useZRenderGraphicLogic",O="useCoordinateInst",B=a=>new Promise((e,c)=>{const s=new Image;s.onload=()=>e(s),s.onerror=()=>c(s),s.src=a}),b=(a,e,c,s,d,o,t,i,r,n)=>{const l=a.getContext("2d");return r!==void 0&&n!==void 0?l==null||l.drawImage(e,t,i,r,n,c,s,d,o):r!==void 0?l==null||l.drawImage(e,t,i,r,o/d*r,c,s,d,o):n!==void 0?l==null||l.drawImage(e,t,i,d/o*n,n,c,s,d,o):l==null||l.drawImage(e,c,s,d,o),a},T=async a=>{var M;const{image:e,dx:c=0,dy:s=0,dw:d,dh:o,sx:t=0,sy:i=0,sw:r,sh:n}=a,l=await B(e);if(d!==void 0&&o!==void 0){const m=document.createElement("canvas");return m.width=d,m.height=o,b(m,l,c,s,d,o,t,i,r,n)}if(d!==void 0){const m=document.createElement("canvas");m.width=d;const v=m.height=d/l.width*l.height;return b(m,l,c,s,d,v,t,i,r,n)}if(o!==void 0){const m=document.createElement("canvas"),v=m.width=o/l.height*l.width;return m.height=o,b(m,l,c,s,v,o,t,i,r,n)}if(r!==void 0&&n!==void 0){const m=document.createElement("canvas");return m.width=r,m.height=n,(M=m.getContext("2d"))==null||M.drawImage(l,c,s,r,n,t,i,r,n),b(m,l,c,s,r,n,t,i,r,n)}if(r!==void 0){const m=document.createElement("canvas");m.width=r;const v=m.height=r/l.width*l.height;return b(m,l,c,s,r,v,t,i,r,v)}if(n!==void 0){const m=document.createElement("canvas"),v=m.width=n/l.height*l.width;return m.height=n,b(m,l,c,s,v,n,t,i,v,n)}return l},K=u(h,C)({props:{meta:{type:Object,required:!0}},setup(a){const e=u(x,F)(()=>a.meta.points),c=u(x,F)(()=>a.meta.image),s=u(h,J)(),d=u(x,F)(()=>a.meta.props);return u(h,L)(async()=>{const o=a.meta.isExprImage?c.value:a.meta.image;o?s.value=await T({...a.meta,image:o}):s.value=void 0}),()=>{var o,t;return u(h,N)(u(f,P),u(h,W)({graphic:u(A,X)},d.value??{},{shape:{points:e.value,smooth:a.meta.smooth,...((o=d.value)==null?void 0:o.shape)??{}},style:{lineWidth:a.meta.lineWidth??1,stroke:s.value?{image:s.value}:a.meta.strokeColor??u(f,V).primaryColor,lineDash:a.meta.lineDash,fill:a.meta.fill,fillOpacity:a.meta.fillOpacity,lineJoin:a.meta.round?"round":void 0,...((t=d.value)==null?void 0:t.style)??{}}}),null)}}}),I=(a,e)=>Math.sqrt(Math.pow(e[0]-a[0],2)+Math.pow(e[1]-a[1],2)),_=u(h,C)({props:{index:{type:Number,required:!0},total:{type:Number,required:!0},radius:{type:Number,required:!0},delay:{type:Number,required:!0},z:{type:Number,required:!0},color:{type:Array,required:!0},path:{type:Array,required:!0},whens:{type:Array,required:!0},opacity:Boolean},setup(a){return u(f,Y)(()=>{const[e,c,s,d]=a.color,o=new(u(A,G))({shape:{r:a.radius},style:{fill:`rgba(${e}, ${c}, ${s}, ${a.opacity?d-d/a.total*a.index:1})`},z:a.z}),t=o.animate("shape",!0).delay(a.index*a.delay);return a.path.forEach(([i,r],n)=>{t.when(a.whens[n],{cx:i,cy:r})}),t.done(()=>{o.__zr.remove(o)}).start(),o}),()=>null}}),Q=u(h,C)({inheritAttrs:!1,props:{meta:{type:Object,required:!0}},setup(a){const e=u(x,F)(()=>a.meta.points),c=u(f,O)(),s=u(h,g)(()=>{const o=c.value;return o?Math.max(o.coordX(a.meta.speed??100)-o.coordX(0),o.coordY(a.meta.speed??100)-o.coordY(0))/1e3:0}),d=u(h,g)(()=>{var t;if(!c.value)return[];const o=s.value;return((t=e.value)==null?void 0:t.reduce((i,r,n,l)=>(n===0?i.push(0):i.push(i[n-1]+I(l[n-1],r)/o),i),[]))??[]});return()=>{const o=a.meta.radius??2,t=o/s.value*(a.meta.multiple??1.25),i=k(a.meta.color??"#FFFFFFFF");return e.value.length?Array.from({length:a.meta.items??40}).map((r,n,{length:l})=>u(h,N)(_,{index:n,key:n,path:e.value,whens:d.value??[],total:l,radius:o,delay:t,color:i,z:a.meta.z??10,opacity:!0},null)):null}}}),H=u(h,C)({inheritAttrs:!1,props:{meta:{type:Object,required:!0}},setup(a){const e=u(x,F)(()=>a.meta.points),c=u(f,O)(),s=u(h,g)(()=>{const t=c.value;return t?Math.max(t.coordX(a.meta.speed??50)-t.coordX(0),t.coordY(a.meta.speed??50)-t.coordY(0))/1e3:0}),d=u(h,g)(()=>{var i;if(!c.value)return[];const t=s.value;return((i=e.value)==null?void 0:i.reduce((r,n,l,M)=>(l===0?r.push(0):r.push(r[l-1]+I(M[l-1],n)/t),r),[]))??[]}),o=u(h,g)(()=>{var i;if(!((i=e.value)!=null&&i.length))return 0;let t=0;for(let r=1;r<e.value.length;r+=1)t+=I(e.value[r-1],e.value[r]);return t});return()=>{var l;const t=a.meta.radius??2,i=k(a.meta.color??"#FFFFFFFF"),r=Math.max(1,~~(o.value/(a.meta.gap??28))),n=(((l=d.value)==null?void 0:l.at(-1))??0)/r;return e.value.length?Array.from({length:r}).map((M,m,{length:v})=>u(h,N)(_,{index:m,key:m,path:e.value,whens:d.value??[],total:v,radius:t,delay:n,color:i,z:a.meta.z??10},null)):null}}}),Z=u(h,C)({props:{meta:{type:Object,required:!0}},setup(a){const e=u(x,F)(()=>a.meta.points),c=u(f,O)(),s=u(h,g)(()=>{const t=c.value;return t?Math.max(t.coordX(a.meta.speed??50)-t.coordX(0),t.coordY(a.meta.speed??50)-t.coordY(0))/1e3:0}),d=u(h,g)(()=>{var r;if(!c.value||!((r=e.value)!=null&&r.length))return 0;const t=s.value;let i=0;for(let n=1;n<e.value.length;n+=1)i+=I(e.value[n-1],e.value[n])/t;return i}),o=u(h,g)(()=>{var r;if(!((r=e.value)!=null&&r.length))return 0;let t=0;for(let n=1;n<e.value.length;n+=1)t+=I(e.value[n-1],e.value[n]);const i=(a.meta.len??20)+(a.meta.gap??20);return Math.max(1,~~(t/i))*i});return u(f,Y)(()=>{if(!d.value)return;const t=new(u(A,X))({shape:{points:e.value},style:{stroke:a.meta.color??"#ffffff",lineDash:[a.meta.len??20,a.meta.gap??20],lineWidth:a.meta.lineWidth??3,lineJoin:a.meta.round?"round":void 0},z:a.meta.z}),i=t.animate("style",!0);return i.when(0,{lineDashOffset:o.value}).when(d.value,{lineDashOffset:0}),i.done(()=>{t.__zr.remove(t)}).start(),t}),()=>null}})})();export{Z as Dashed,H as Flow,K as Line,Q as Trailing,ne as __tla};
