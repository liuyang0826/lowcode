import{b as D,a as u}from"./federation-shared-1482b2fe.js";let H,J,K,Q,ne=(async()=>{const j={black:"#000",silver:"#C0C0C0",gray:"#808080",white:"#FFF",maroon:"#800000",red:"#F00",purple:"#800080",fuchsia:"#F0F",green:"#008000",lime:"#0F0",olive:"#808000",yellow:"#FF0",navy:"#000080",blue:"#00F",teal:"#008080",aqua:"#0FF",transparent:"#0000"},E="^\\s*",q="\\s*$",w="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",y="([0-9A-Fa-f])",$="([0-9A-Fa-f]{2})",S=new RegExp(`${E}rgb\\s*\\(${w},${w},${w}\\)${q}`),U=new RegExp(`${E}rgba\\s*\\(${w},${w},${w},${w}\\)${q}`),ee=new RegExp(`${E}#${y}${y}${y}${q}`),ae=new RegExp(`${E}#${$}${$}${$}${q}`),te=new RegExp(`${E}#${y}${y}${y}${y}${q}`),re=new RegExp(`${E}#${$}${$}${$}${$}${q}`);function p(a){return parseInt(a,16)}function R(a){try{let e;if(e=ae.exec(a))return[p(e[1]),p(e[2]),p(e[3]),1];if(e=S.exec(a))return[z(e[1]),z(e[5]),z(e[9]),1];if(e=U.exec(a))return[z(e[1]),z(e[5]),z(e[9]),k(e[13])];if(e=ee.exec(a))return[p(e[1]+e[1]),p(e[2]+e[2]),p(e[3]+e[3]),1];if(e=re.exec(a))return[p(e[1]),p(e[2]),p(e[3]),k(p(e[4])/255)];if(e=te.exec(a))return[p(e[1]+e[1]),p(e[2]+e[2]),p(e[3]+e[3]),k(p(e[4]+e[4])/255)];if(a in j)return R(j[a]);throw new Error(`[seemly/rgba]: Invalid color value ${a}.`)}catch(e){throw e}}function k(a){const e=Math.round(Number(a)*100)/100;return e>1?1:e<0?0:e}function z(a){const e=Math.round(Number(a));return e>255?255:e<0?0:e}let A,g,x,h,W,O,F,P,G,X,C,L,V,f,B,Y,N,T,b,Z,I,_;A=await D("zrender"),g=await D("@rdx/shared"),x=await D("@lowcode-fe/designer/common"),h=await D("vue"),W="mergeProps",O="createVNode",F="useExprValue",P="Graphic",G="Circle",X="Polyline",C="defineComponent",L="ref",V="watchEffect",f="computed",B="colors",Y="useZRenderGraphicLogic",N="useCoordinateInst",T=a=>new Promise((e,c)=>{const s=new Image;s.onload=()=>e(s),s.onerror=()=>c(s),s.src=a}),b=(a,e,c,s,d,n,t,i,r,l)=>{const o=a.getContext("2d");return r!==void 0&&l!==void 0?o==null||o.drawImage(e,t,i,r,l,c,s,d,n):r!==void 0?o==null||o.drawImage(e,t,i,r,n/d*r,c,s,d,n):l!==void 0?o==null||o.drawImage(e,t,i,d/n*l,l,c,s,d,n):o==null||o.drawImage(e,c,s,d,n),a},Z=async a=>{var M;const{image:e,dx:c=0,dy:s=0,dw:d,dh:n,sx:t=0,sy:i=0,sw:r,sh:l}=a,o=await T(e);if(d!==void 0&&n!==void 0){const m=document.createElement("canvas");return m.width=d,m.height=n,b(m,o,c,s,d,n,t,i,r,l)}if(d!==void 0){const m=document.createElement("canvas");m.width=d;const v=m.height=d/o.width*o.height;return b(m,o,c,s,d,v,t,i,r,l)}if(n!==void 0){const m=document.createElement("canvas"),v=m.width=n/o.height*o.width;return m.height=n,b(m,o,c,s,v,n,t,i,r,l)}if(r!==void 0&&l!==void 0){const m=document.createElement("canvas");return m.width=r,m.height=l,(M=m.getContext("2d"))==null||M.drawImage(o,c,s,r,l,t,i,r,l),b(m,o,c,s,r,l,t,i,r,l)}if(r!==void 0){const m=document.createElement("canvas");m.width=r;const v=m.height=r/o.width*o.height;return b(m,o,c,s,r,v,t,i,r,v)}if(l!==void 0){const m=document.createElement("canvas"),v=m.width=l/o.height*o.width;return m.height=l,b(m,o,c,s,v,l,t,i,v,l)}return o},K=u(h,C)({props:{meta:{type:Object,required:!0}},setup(a){const e=u(x,F)(()=>a.meta.points),c=u(x,F)(()=>a.meta.image),s=u(h,L)(),d=u(x,F)(()=>a.meta.props);return u(h,V)(async()=>{const n=a.meta.isExprImage?c.value:a.meta.image;n?s.value=await Z({...a.meta,image:n}):s.value=void 0}),()=>{var n,t;return u(h,O)(u(g,P),u(h,W)({graphic:u(A,X)},d.value??{},{shape:{points:e.value,smooth:a.meta.smooth,...((n=d.value)==null?void 0:n.shape)??{}},style:{lineWidth:a.meta.lineWidth??1,stroke:s.value?{image:s.value}:a.meta.strokeColor??u(g,B).primaryColor,lineDash:a.meta.lineDash,fill:a.meta.fill,fillOpacity:a.meta.fillOpacity,...((t=d.value)==null?void 0:t.style)??{}}}),null)}}}),I=(a,e)=>Math.sqrt(Math.pow(e[0]-a[0],2)+Math.pow(e[1]-a[1],2)),_=u(h,C)({props:{index:{type:Number,required:!0},total:{type:Number,required:!0},radius:{type:Number,required:!0},delay:{type:Number,required:!0},z:{type:Number,required:!0},color:{type:Array,required:!0},path:{type:Array,required:!0},whens:{type:Array,required:!0},opacity:Boolean},setup(a){return u(g,Y)(()=>{const[e,c,s,d]=a.color,n=new(u(A,G))({shape:{r:a.radius},style:{fill:`rgba(${e}, ${c}, ${s}, ${a.opacity?d-d/a.total*a.index:1})`},z:a.z}),t=n.animate("shape",!0).delay(a.index*a.delay);return a.path.forEach(([i,r],l)=>{t.when(a.whens[l],{cx:i,cy:r})}),t.done(()=>{n.__zr.remove(n)}).start(),n}),()=>null}}),Q=u(h,C)({inheritAttrs:!1,props:{meta:{type:Object,required:!0}},setup(a){const e=u(x,F)(()=>a.meta.points),c=u(g,N)(),s=u(h,f)(()=>{const n=c.value;return n?Math.max(n.coordX(a.meta.speed??100)-n.coordX(0),n.coordY(a.meta.speed??100)-n.coordY(0))/1e3:0}),d=u(h,f)(()=>{var t;if(!c.value)return[];const n=s.value;return((t=e.value)==null?void 0:t.reduce((i,r,l,o)=>(l===0?i.push(0):i.push(i[l-1]+I(o[l-1],r)/n),i),[]))??[]});return()=>{const n=a.meta.radius??2,t=n/s.value*(a.meta.multiple??1.25),i=R(a.meta.color??"#FF0000FF");return e.value.length?Array.from({length:a.meta.items??40}).map((r,l,{length:o})=>u(h,O)(_,{index:l,key:l,path:e.value,whens:d.value??[],total:o,radius:n,delay:t,color:i,z:a.meta.z??10,opacity:!0},null)):null}}}),J=u(h,C)({inheritAttrs:!1,props:{meta:{type:Object,required:!0}},setup(a){const e=u(x,F)(()=>a.meta.points),c=u(g,N)(),s=u(h,f)(()=>{const t=c.value;return t?Math.max(t.coordX(a.meta.speed??50)-t.coordX(0),t.coordY(a.meta.speed??50)-t.coordY(0))/1e3:0}),d=u(h,f)(()=>{var i;if(!c.value)return[];const t=s.value;return((i=e.value)==null?void 0:i.reduce((r,l,o,M)=>(o===0?r.push(0):r.push(r[o-1]+I(M[o-1],l)/t),r),[]))??[]}),n=u(h,f)(()=>{var i;if(!((i=e.value)!=null&&i.length))return 0;let t=0;for(let r=1;r<e.value.length;r+=1)t+=I(e.value[r-1],e.value[r]);return t});return()=>{var o;const t=a.meta.radius??2,i=R(a.meta.color??"#FFFFFFFF"),r=Math.max(1,~~(n.value/(a.meta.gap??28))),l=(((o=d.value)==null?void 0:o.at(-1))??0)/r;return e.value.length?Array.from({length:r}).map((M,m,{length:v})=>u(h,O)(_,{index:m,key:m,path:e.value,whens:d.value??[],total:v,radius:t,delay:l,color:i,z:a.meta.z??10},null)):null}}}),H=u(h,C)({props:{meta:{type:Object,required:!0}},setup(a){const e=u(x,F)(()=>a.meta.points),c=u(g,N)(),s=u(h,f)(()=>{const t=c.value;return t?Math.max(t.coordX(a.meta.speed??50)-t.coordX(0),t.coordY(a.meta.speed??50)-t.coordY(0))/1e3:0}),d=u(h,f)(()=>{if(!c.value)return 0;const t=s.value;let i=0;for(let r=1;r<e.value.length;r+=1)i+=I(e.value[r-1],e.value[r])/t;return i}),n=u(h,f)(()=>{var r;if(!((r=e.value)!=null&&r.length))return 0;let t=0;for(let l=1;l<e.value.length;l+=1)t+=I(e.value[l-1],e.value[l]);const i=(a.meta.len??20)+(a.meta.gap??20);return Math.max(1,~~(t/i))*i});return u(g,Y)(()=>{const t=new(u(A,X))({shape:{points:e.value},style:{stroke:a.meta.color??"#ffffff",lineDash:[a.meta.len??20,a.meta.gap??20],lineDashOffset:0,lineWidth:a.meta.lineWidth??3},z:a.meta.z});if(d.value){const i=t.animate("style",!0);i.when(0,{lineDashOffset:n.value}).when(d.value,{lineDashOffset:0}),i.done(()=>{t.__zr.remove(t)}).start()}return t}),()=>null}})})();export{H as Dashed,J as Flow,K as Line,Q as Trailing,ne as __tla};
