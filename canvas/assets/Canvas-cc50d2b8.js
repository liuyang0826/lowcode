import{a as e,b as C}from"./federation-shared-1482b2fe.js";import{u as R,__tla as $c}from"./Scoped-92d0b990.js";let po,Tc=Promise.all([(()=>{try{return $c}catch{}})()]).then(async()=>{const yt=await C("vue"),mo="createElementVNode",fo="openBlock",vo="createElementBlock",xo="defineComponent",go={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},wo=e(yt,mo)("path",{d:"M262.29 192.31a64 64 0 1 0 57.4 57.4a64.13 64.13 0 0 0-57.4-57.4zM416.39 256a154.34 154.34 0 0 1-1.53 20.79l45.21 35.46a10.81 10.81 0 0 1 2.45 13.75l-42.77 74a10.81 10.81 0 0 1-13.14 4.59l-44.9-18.08a16.11 16.11 0 0 0-15.17 1.75A164.48 164.48 0 0 1 325 400.8a15.94 15.94 0 0 0-8.82 12.14l-6.73 47.89a11.08 11.08 0 0 1-10.68 9.17h-85.54a11.11 11.11 0 0 1-10.69-8.87l-6.72-47.82a16.07 16.07 0 0 0-9-12.22a155.3 155.3 0 0 1-21.46-12.57a16 16 0 0 0-15.11-1.71l-44.89 18.07a10.81 10.81 0 0 1-13.14-4.58l-42.77-74a10.8 10.8 0 0 1 2.45-13.75l38.21-30a16.05 16.05 0 0 0 6-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 0 0-6.07-13.94l-38.19-30A10.81 10.81 0 0 1 49.48 186l42.77-74a10.81 10.81 0 0 1 13.14-4.59l44.9 18.08a16.11 16.11 0 0 0 15.17-1.75A164.48 164.48 0 0 1 187 111.2a15.94 15.94 0 0 0 8.82-12.14l6.73-47.89A11.08 11.08 0 0 1 213.23 42h85.54a11.11 11.11 0 0 1 10.69 8.87l6.72 47.82a16.07 16.07 0 0 0 9 12.22a155.3 155.3 0 0 1 21.46 12.57a16 16 0 0 0 15.11 1.71l44.89-18.07a10.81 10.81 0 0 1 13.14 4.58l42.77 74a10.8 10.8 0 0 1-2.45 13.75l-38.21 30a16.05 16.05 0 0 0-6.05 14.08c.33 4.14.55 8.3.55 12.47z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),yo=[wo],Eo=e(yt,xo)({name:"SettingsOutline",render:function(t,s){return e(yt,fo)(),e(yt,vo)("svg",go,yo)}});var ko=typeof global=="object"&&global&&global.Object===Object&&global;const bo=ko;var Io=typeof self=="object"&&self&&self.Object===Object&&self,No=bo||Io||Function("return this")();const Be=No;var Mo=Be.Symbol;const Et=Mo;var ze=Object.prototype,Co=ze.hasOwnProperty,Bo=ze.toString,ut=Et?Et.toStringTag:void 0;function zo(t){var s=Co.call(t,ut),l=t[ut];try{t[ut]=void 0;var m=!0}catch{}var i=Bo.call(t);return m&&(s?t[ut]=l:delete t[ut]),i}var Lo=Object.prototype,Vo=Lo.toString;function So(t){return Vo.call(t)}var Do="[object Null]",jo="[object Undefined]",Le=Et?Et.toStringTag:void 0;function Oo(t){return t==null?t===void 0?jo:Do:Le&&Le in Object(t)?zo(t):So(t)}function Fo(t){return t!=null&&typeof t=="object"}var Ho="[object Symbol]";function Ao(t){return typeof t=="symbol"||Fo(t)&&Oo(t)==Ho}var Po=/\s/;function Uo(t){for(var s=t.length;s--&&Po.test(t.charAt(s)););return s}var Ro=/^\s+/;function _o(t){return t&&t.slice(0,Uo(t)+1).replace(Ro,"")}function ee(t){var s=typeof t;return t!=null&&(s=="object"||s=="function")}var Ve=0/0,$o=/^[-+]0x[0-9a-f]+$/i,To=/^0b[01]+$/i,Wo=/^0o[0-7]+$/i,qo=parseInt;function Se(t){if(typeof t=="number")return t;if(Ao(t))return Ve;if(ee(t)){var s=typeof t.valueOf=="function"?t.valueOf():t;t=ee(s)?s+"":s}if(typeof t!="string")return t===0?t:+t;t=_o(t);var l=To.test(t);return l||Wo.test(t)?qo(t.slice(2),l?2:8):$o.test(t)?Ve:+t}var Ko=function(){return Be.Date.now()};const ne=Ko;var Yo="Expected a function",Xo=Math.max,Go=Math.min;function Jo(t,s,l){var m,i,o,n,a,r,x=0,k=!1,h=!1,u=!0;if(typeof t!="function")throw new TypeError(Yo);s=Se(s)||0,ee(l)&&(k=!!l.leading,h="maxWait"in l,o=h?Xo(Se(l.maxWait)||0,s):o,u="trailing"in l?!!l.trailing:u);function b(f){var y=m,S=i;return m=i=void 0,x=f,n=t.apply(S,y),n}function w(f){return x=f,a=setTimeout(p,s),k?b(f):n}function g(f){var y=f-r,S=f-x,O=s-y;return h?Go(O,o-S):O}function z(f){var y=f-r,S=f-x;return r===void 0||y>=s||y<0||h&&S>=o}function p(){var f=ne();if(z(f))return N(f);a=setTimeout(p,g(f))}function N(f){return a=void 0,u&&m?b(f):(m=i=void 0,n)}function d(){a!==void 0&&clearTimeout(a),x=0,m=r=i=a=void 0}function c(){return a===void 0?n:N(ne())}function v(){var f=ne(),y=z(f);if(m=arguments,i=this,r=f,y){if(a===void 0)return w(r);if(h)return clearTimeout(a),a=setTimeout(p,s),b(r)}return a===void 0&&(a=setTimeout(p,s)),n}return v.cancel=d,v.flush=c,v}const De=await C("vue"),je="nextTick",L=t=>(t==null?void 0:t.type)==="line",B=t=>(t==null?void 0:t.type)==="rect",_=t=>(t==null?void 0:t.type)==="point";function M(t,s,l){return Math.abs(s-l)<4/t.scale}function oe(t,s,l){t.curElement=s,t.focus=l,t.focusIndex=void 0,t.selectElements=new Set([s])}function dt(t,s="select"){t.mode=s,t.curElement=void 0,t.isDrawing=void 0,t.focus=void 0,t.focusIndex=void 0,t.pointIndex=void 0,t.selectElements=new Set,t.isSelecting=!1}let Oe=0;function Z(){return Oe+=1}function Qo(t){Oe=t}const kt=[];let ie=!1;const F=(t,s)=>{ie||(kt.unshift(s),e(De,je)(()=>{if(!kt.length)return;const l=kt.slice();kt.length=0,t.rollbackStack.push(()=>{l.forEach(m=>m())}),t.rollbackStack.length>100&&t.rollbackStack.shift()}))},le=t=>{const s=t.rollbackStack.pop();s&&(ie=!0,s(),e(De,je)(()=>ie=!1))},Fe=["curElement","selectElements","focus","focusIndex","pointIndex","isDrawing","mode","orthogonal","pickup"],st=t=>Fe.map(s=>t[s]),ct=(t,s)=>{Fe.forEach((l,m)=>{t[l]=s[m]})},Zo=(t,s)=>{const l=[],m=new Map;return t.forEach(i=>{m.has(i[s])||(m.set(i[s],l.length),l.push([])),l[m.get(i[s])].push(i)}),l.flat()},ti=t=>{t.sort((r,x)=>(B(r)?r.x:r.location[0])-(B(x)?x.x:x.location[0]));const s=t.map(r=>B(r)?r.width:0),l=Math.max(...t.map(r=>B(r)?r.x+r.width:r.location[0])),m=Math.min(...t.map(r=>B(r)?r.x:r.location[0])),i=s.reduce((r,x)=>r+x,0),o=l-m-i;if(o<0)return!1;const n=o/(t.length-1);let a=B(t[0])?t[0].x:t[0].location[0];return t.forEach((r,x)=>{B(r)?r.x=a:r.location[0]=a,a+=s[x]+n}),!0},ei=t=>{t.sort((r,x)=>(B(r)?r.y:r.location[1])-(B(x)?x.y:x.location[1]));const s=t.map(r=>B(r)?r.height:0),l=Math.max(...t.map(r=>B(r)?r.y+r.height:r.location[1])),m=Math.min(...t.map(r=>B(r)?r.y:r.location[1])),i=s.reduce((r,x)=>r+x,0),o=l-m-i;if(o<0)return!1;const n=o/(t.length-1);let a=B(t[0])?t[0].y:t[0].location[1];return t.forEach((r,x)=>{B(r)?r.y=a:r.location[1]=a,a+=s[x]+n}),!0},Y=(t,s)=>t[0]===s[0]&&t[1]===s[1],ae=await C("vue"),ni="computed",oi="onBeforeMount",ii="onUnmounted";function li(t,s){const l=e(ae,ni)(()=>t.stepPace/t.scale),m=()=>{const d=t.curElement;L(d)&&t.isDrawing?d.points.length>2?(d.points.pop(),t.pointIndex=void 0,t.isDrawing=!1,t.curElement=void 0,t.selectElements=new Set,F(t,()=>{t.mode="line";const[c,v]=t.location;t.selectElements.add(d),t.curElement=d,t.isDrawing=!0,d.points.push([c,v]),t.pointIndex=d.points.length-1})):(t.isDrawing=!1,le(t)):t.mode="select"},i=()=>{const d=t.curElement;if(t.mode==="select")if(L(d)&&t.pointIndex!==void 0&&d.points.length>2){const c=t.pointIndex,[v]=d.points.splice(c,1);t.pointIndex=void 0,F(t,()=>{d.points.splice(c,0,v),t.pointIndex=c})}else t.selectElements.forEach(c=>{const v=t.elements.findIndex(y=>y===c),f=t.elements[v];t.elements.splice(v,1),F(t,()=>{t.elements.splice(v,0,f)})}),dt(t)},o=d=>{if(t.mode!=="select")return;const c=t.curElement;if(t.focusIndex===void 0&&t.pointIndex===void 0){const v=c===void 0?0:(t.elements.indexOf(c)+(d?1:-1))%t.elements.length;t.curElement=t.elements.at(v),t.selectElements=new Set([t.curElement])}else t.pointIndex!==void 0?d?t.pointIndex===c.points.length-1?(t.focus="focusLineVertex",t.pointIndex=0,t.focusIndex=void 0):(t.focus=void 0,t.focusIndex=t.pointIndex,t.pointIndex=void 0):t.pointIndex===0?(t.focus="focusLineVertex",t.pointIndex=c.points.length-1,t.focusIndex=void 0):(t.focus=void 0,t.focusIndex=t.pointIndex-1,t.pointIndex=void 0):(t.focus="focusLineVertex",t.pointIndex=t.focusIndex+(d?1:0),t.focusIndex=void 0)},n=()=>{const d=t.focusIndex;if(d===void 0)return;const c=t.curElement;L(c)&&(c.points.splice(d+1,0,[(c.points[d][0]+c.points[d+1][0])/2,(c.points[d][1]+c.points[d+1][1])/2]),F(t,()=>{c.points.splice(d+1,1)}))},a=()=>{const d=t.pointIndex;if(d===void 0)return;const c=t.curElement;if(L(c)&&d!==0&&d!==c.points.length-1){const v=c.points.splice(d+1),f={uid:Z(),name:"\u7EBF\u63D2\u69FD",type:"line",points:[[...c.points.at(-1)],...v.map(S=>[...S])],variableKey:c.variableKey},y=t.elements.indexOf(c);t.elements.splice(y+1,0,f),F(t,()=>{t.elements.splice(y+1,1),c.points.push(...v)})}},r=()=>{const d=t.pointIndex;if(d===void 0)return;const c=t.curElement;if(L(c)&&d!==0&&d!==c.points.length-1){const v=c.points[d-1],f=c.points[d+1],y=c.points[d],S=l.value*12;v[1]===f[1]?(c.points[d][1]=v[1]-S,c.points.splice(d,0,[y[0]-S*(v[0]<f[0]?1:-1),v[1]]),c.points.splice(d+2,0,[y[0]+S*(v[0]<f[0]?1:-1),f[1]]),t.pointIndex=d+1,F(t,()=>{t.pointIndex=d,c.points.splice(d+2,1),c.points.splice(d,1),c.points[d][1]=v[1]})):v[0]===f[0]&&(c.points[d][0]=v[0]+S,c.points.splice(d,0,[v[0],y[1]-S*(v[1]<f[1]?1:-1)]),c.points.splice(d+2,0,[f[0],y[1]+S*(v[1]<f[1]?1:-1)]),t.pointIndex=d+1,F(t,()=>{t.pointIndex=d,c.points.splice(d+2,1),c.points.splice(d,1),c.points[d][0]=v[0]}))}},x=()=>{const d=t.pointIndex;if(d===void 0)return;const c=t.curElement;if(L(c)&&(d===0||d===c.points.length-1)){const v=t.elements.findIndex(y=>L(y)&&y!==c&&(Y(y.points.at(-1),c.points.at(d))||Y(y.points.at(0),c.points.at(d))));if(v===-1)return;const f=t.elements[v];if(d===0){if(Y(f.points.at(-1),c.points.at(d)))for(let y=f.points.length-2;y>=0;y-=1)c.points.unshift(f.points[y]);else for(let y=1;y<=f.points.length-1;y+=1)c.points.unshift(f.points[y]);t.pointIndex=f.points.length-1,F(t,()=>{c.points.splice(0,f.points.length-1),t.pointIndex=d})}else{if(Y(f.points.at(-1),c.points.at(d)))for(let y=f.points.length-2;y>=0;y-=1)c.points.push(f.points[y]);else for(let y=1;y<=f.points.length-1;y+=1)c.points.push(f.points[y]);F(t,()=>{c.points.splice(c.points.length-1-(f.points.length-2),f.points.length-1)})}t.elements.splice(v,1),F(t,()=>{t.elements.splice(v,0,f)})}},k=()=>{t.selectElements=new Set,t.elements.forEach(d=>{t.selectElements.add(d)})},h=Jo(F,600,{leading:!0,trailing:!1}),u=d=>{if(t.focus==="focusLineVertex"){const c=t.curElement.points[t.pointIndex],v=c[1],f=t.location[1];c[1]+=l.value,t.location[1]+=l.value,h(t,()=>{c[1]=v,t.location[1]=f})}else if(t.focus==="focusRectSide"){const c=t.curElement;if(t.focusIndex===0){const v=c.y,f=c.height;c.y+=l.value,c.height-=l.value,h(t,()=>{c.y=v,c.height=f})}else if(t.focusIndex===2){const v=c.height;c.height+=l.value,h(t,()=>c.height=v)}}else t.selectElements.forEach(c=>{if(B(c)){const v=c.y;c.y+=l.value,h(t,()=>c.y=v)}else if(L(c))if(t.selectElements.size===1&&!d.ctrlKey){const v=c.points.slice(t.focusIndex,t.focusIndex+2),f=v.map(y=>y[1]);v.forEach(y=>{y[1]+=l.value}),h(t,()=>{v.forEach((y,S)=>{y[1]=f[S]})})}else{const v=c.points.map(f=>f[1]);c.points.forEach(f=>{f[1]+=l.value}),h(t,()=>{c.points.forEach((f,y)=>{f[1]=v[y]})})}else{const v=c.location[1];c.location[1]+=l.value,h(t,()=>c.location[1]=v)}})},b=d=>{if(t.focus==="focusLineVertex"){const c=t.curElement.points[t.pointIndex],v=c[1],f=t.location[1];c[1]-=l.value,t.location[1]-=l.value,h(t,()=>{c[1]=v,t.location[1]=f})}else if(t.focus==="focusRectSide"){const c=t.curElement;if(t.focusIndex===0){const v=c.y,f=c.height;c.y-=l.value,c.height+=l.value,h(t,()=>{c.y=v,c.height=f})}else if(t.focusIndex===2){const v=c.height;c.height-=l.value,h(t,()=>c.height=v)}}else t.selectElements.forEach(c=>{if(B(c)){const v=c.y;c.y-=l.value,h(t,()=>c.y=v)}else if(L(c))if(t.selectElements.size===1&&!d.ctrlKey){const v=c.points.slice(t.focusIndex,t.focusIndex+2),f=v.map(y=>y[1]);v.forEach(y=>{y[1]-=l.value}),h(t,()=>{v.forEach((y,S)=>{y[1]=f[S]})})}else{const v=c.points.map(f=>f[1]);c.points.forEach(f=>{f[1]-=l.value}),h(t,()=>{c.points.forEach((f,y)=>{f[1]=v[y]})})}else{const v=c.location[1];c.location[1]-=l.value,h(t,()=>c.location[1]=v)}})},w=d=>{if(t.focus==="focusLineVertex"){const c=t.curElement.points[t.pointIndex],v=c[0],f=t.location[0];c[0]+=l.value,t.location[0]+=l.value,h(t,()=>{c[0]=v,t.location[0]=f})}else if(t.focus==="focusRectSide"){const c=t.curElement;if(t.focusIndex===3){const v=c.x,f=c.width;c.x+=l.value,c.width-=l.value,h(t,()=>{c.x=v,c.width=f})}else if(t.focusIndex===1){const v=c.width;c.width+=l.value,h(t,()=>c.width=v)}}else t.selectElements.forEach(c=>{if(B(c)){const v=c.x;c.x+=l.value,h(t,()=>c.x=v)}else if(L(c))if(t.selectElements.size===1&&!d.ctrlKey){const v=c.points.slice(t.focusIndex,t.focusIndex+2),f=v.map(y=>y[0]);v.forEach(y=>{y[0]+=l.value}),h(t,()=>{v.forEach((y,S)=>{y[0]=f[S]})})}else{const v=c.points.map(f=>f[0]);c.points.forEach(f=>{f[0]+=l.value}),h(t,()=>{c.points.forEach((f,y)=>{f[0]=v[y]})})}else{const v=c.location[0];c.location[0]+=l.value,h(t,()=>c.location[0]=v)}})},g=d=>{if(t.focus==="focusLineVertex"){const c=t.curElement.points[t.pointIndex],v=c[0],f=t.location[0];c[0]-=l.value,t.location[0]-=l.value,h(t,()=>{c[0]=v,t.location[0]=f})}else if(t.focus==="focusRectSide"){const c=t.curElement;if(t.focusIndex===3){const v=c.x,f=c.width;c.x-=l.value,c.width+=l.value,h(t,()=>{c.x=v,c.width=f})}else if(t.focusIndex===1){const v=c.width;c.width-=l.value,h(t,()=>c.width=v)}}else t.selectElements.forEach(c=>{if(B(c)){const v=c.x;c.x-=l.value,h(t,()=>c.x=v)}else if(L(c))if(t.selectElements.size===1&&!d.ctrlKey){const v=c.points.slice(t.focusIndex,t.focusIndex+2),f=v.map(y=>y[0]);v.forEach(y=>{y[0]-=l.value}),h(t,()=>{v.forEach((y,S)=>{y[0]=f[S]})})}else{const v=c.points.map(f=>f[0]);c.points.forEach(f=>{f[0]-=l.value}),h(t,()=>{c.points.forEach((f,y)=>{f[0]=v[y]})})}else{const v=c.location[0];c.location[0]-=l.value,h(t,()=>c.location[0]=v)}})},z=d=>{var c,v;((c=document.getSelection())==null?void 0:c.type)!=="Range"&&t.selectElements.size&&(d.preventDefault(),(v=d.clipboardData)==null||v.setData("text/plain",JSON.stringify(Array.from(t.selectElements))))},p=d=>{var y,S;if(["input","textarea"].includes((y=document.activeElement)==null?void 0:y.tagName.toLowerCase()))return;const c=(S=d.clipboardData)==null?void 0:S.getData("text/plain");if(!c)return;d.preventDefault();const v=JSON.parse(c),f=st(t);t.selectElements=new Set,v.forEach(O=>{delete O.slotIndex,L(O)?(O.uid=Z(),O.points=O.points.map(([_t,$t])=>[_t+16/t.scale,$t+16/t.scale]),t.elements.push(O),t.selectElements.add(O)):B(O)?(O.uid=Z(),O.x+=16/t.scale,O.y+=16/t.scale,t.elements.push(O),t.selectElements.add(O)):_(O)&&(O.uid=Z(),O.location[0]+=16/t.scale,O.location[0]+=16/t.scale,t.elements.push(O),t.selectElements.add(O))}),F(t,()=>{v.forEach(()=>t.elements.pop()),ct(t,f)})},N=async d=>{var f;if(["input","textarea"].includes((f=document.activeElement)==null?void 0:f.tagName.toLowerCase()))return;const{ctrlKey:c,shiftKey:v}=d;c?d.key==="z"?(d.preventDefault(),le(t)):d.key==="b"?(d.preventDefault(),n()):d.key==="d"?(d.preventDefault(),a()):d.key==="m"?(d.preventDefault(),x()):d.key==="j"?(d.preventDefault(),r()):d.key==="a"?(d.preventDefault(),k()):d.key==="s"&&(d.preventDefault(),s()):d.key===" "?m():d.key==="F8"?t.orthogonal=!t.orthogonal:d.key==="Delete"?i():d.key==="Tab"&&(d.preventDefault(),o(!v)),d.key==="ArrowDown"?u(d):d.key==="ArrowUp"?b(d):d.key==="ArrowRight"?w(d):d.key==="ArrowLeft"&&g(d)};e(ae,oi)(()=>{document.addEventListener("keydown",N),document.addEventListener("copy",z),document.addEventListener("paste",p)}),e(ae,ii)(()=>{document.removeEventListener("keydown",N),document.removeEventListener("copy",z),document.removeEventListener("paste",p)})}const ai=await C("zrender"),He=await C("@rdx/shared"),bt=await C("vue"),si="createVNode",ci="Graphic",ri="Polyline",ui="defineComponent",di="computed",hi="inject",pi="useCoordinateInst",mi=e(bt,ui)({props:{x:Number,y:Number},setup(t){const s=e(He,pi)(),l=e(bt,di)(()=>{const i=s.value;if(!i)return;const o=t.x?[[i.coordX(t.x),0],[i.coordX(t.x),i.top+i.height]]:[[0,i.coordY(t.y)],[i.left+i.width,i.coordY(t.y)]];return{points:i?o.map(n=>n.map(a=>Math.floor(a)+.5)):[]}}),m=e(bt,hi)("state");return()=>e(bt,si)(e(He,ci),{graphic:e(ai,ri),shape:l.value,style:{lineDash:[4,8],stroke:m.color},silent:!0},null)}}),fi=await C("zrender"),Ae=await C("@rdx/shared"),ht=await C("vue"),vi="createVNode",xi="Graphic",gi="Polyline",wi="defineComponent",yi="inject",Pe="computed",Ei="useCoordinateInst",ki=e(ht,wi)({props:{item:{type:Object,required:!0}},setup(t){const s=e(Ae,Ei)(),l=e(ht,yi)("state"),m=e(ht,Pe)(()=>{const o=s.value;if(!o)return[];const{x:n,y:a,width:r,height:x}=t.item;return[[n,a],[n+r,a],[n+r,a+x],[n,a+x]].map(k=>o.coord(k).map(h=>Math.floor(h)+.5))}),i=e(ht,Pe)(()=>({points:m.value.concat([m.value[0]])}));return()=>e(ht,vi)(e(Ae,xi),{graphic:e(fi,gi),shape:i.value,style:{stroke:t.item.color||l.color,lineWidth:1,lineDash:"dashed"},z:100,silent:!0},null)}});function bi({x:t,y:s,state:l}){const m=l.elements,i=l.curElement;let o,n;for(let a=0;a<m.length&&!(o!==void 0&&n!==void 0);a+=1){const r=m[a];if(!l.selectElements.has(r)){if(B(r))M(l,r.x,t)?o=r.x:M(l,r.x,t+i.width/2)?o=r.x-i.width/2:M(l,r.x,t+i.width)?o=r.x-i.width:M(l,r.x+r.width/2,t)?o=r.x+r.width/2:M(l,r.x+r.width/2,t+i.width/2)?o=r.x+r.width/2-i.width/2:M(l,r.x+r.width/2,t+i.width)?o=r.x+r.width/2-i.width:M(l,r.x+r.width,t)?o=r.x+r.width:M(l,r.x+r.width,t+i.width/2)?o=r.x+r.width-i.width/2:M(l,r.x+r.width,t+i.width)&&(o=r.x+r.width-i.width),M(l,r.y,s)?n=r.y:M(l,r.y,s+i.height/2)?n=r.y-i.height/2:M(l,r.y,s+i.height)?n=r.y-i.height:M(l,r.y+r.height/2,s)?n=r.y+r.height/2:M(l,r.y+r.height/2,s+i.height/2)?n=r.y+r.height/2-i.height/2:M(l,r.y+r.height/2,s+i.height)?n=r.y+r.height/2-i.height:M(l,r.y+r.height,s)?n=r.y+r.height:M(l,r.y+r.height,s+i.height/2)?n=r.y+r.height-i.height/2:M(l,r.y+r.height,s+i.height)&&(n=r.y+r.height-i.height);else if(L(r))for(let x=0;x<r.points.length&&!(o!==void 0&&n!==void 0);x+=1){const k=r.points[x];M(l,k[0],t)?o=k[0]:M(l,k[0],t+i.width/2)?o=k[0]-i.width/2:M(l,k[0],t+i.width)&&(o=k[0]-i.width),M(l,k[1],s)?n=k[1]:M(l,k[1],s+i.height/2)?n=k[1]-i.height/2:M(l,k[1],s+i.height)&&(n=k[1]-i.height)}else if(_(r)){const x=r.location;M(l,x[0],t)?o=x[0]:M(l,x[0],t+i.width/2)?o=x[0]-i.width/2:M(l,x[0],t+i.width)&&(o=x[0]-i.width),M(l,x[1],s)?n=x[1]:M(l,x[1],s+i.height/2)?n=x[1]-i.height/2:M(l,x[1],s+i.height)&&(n=x[1]-i.height)}}}return[o??t,n??s]}const Ii=await C("vue"),Ni="inject";function se(t){const s=e(Ii,Ni)("state");let l=!1;return{handleClick:(m,i)=>{if(m.event.stopPropagation(),s.focusIndex=void 0,s.pointIndex=void 0,s.focus=void 0,l||s.mode!=="select")return;const o=t();s.focusIndex=i,s.pointIndex=void 0,s.focus=void 0,m.event.ctrlKey||(s.selectElements=new Set),s.selectElements.has(o)?s.selectElements.delete(o):s.selectElements.add(o),s.curElement=o},handleMousedown:(m,i)=>{m.event.stopPropagation(),l=!1;const o=t();if(s.focusIndex=void 0,s.pointIndex=void 0,s.focus=void 0,s.mode!=="select"||!s.selectElements.has(o))return;s.focusIndex=i,s.pointIndex=void 0,s.curElement=o,s.isDrawing=!0;const n=Array.from(s.selectElements),a=B(o)?o.x-s.location[0]:0,r=B(o)?o.y-s.location[1]:0,x=L(o)?o.points[0][0]-s.location[0]:0,k=L(o)?o.points[0][1]-s.location[1]:0,h=s.curElement,[u,b]=_(h)?[...h.location]:B(h)?[h.x,h.y]:[...h.points[0]],w=n.map(p=>_(p)?{...p,location:[...p.location]}:B(p)?{...p}:{...p,points:p.points.map(N=>[...N])}),g=()=>{l=!0,s.canBlur=!1;let p=0,N=0;if(B(h)){if(s.pickup){const[d,c]=bi({x:s.location[0]+a,y:s.location[1]+r,state:s});h.x=d,h.y=c}else h.x=s.location[0]+a,h.y=s.location[1]+r;p=h.x-u,N=h.y-b}else L(h)?(p=s.location[0]-u+x,N=s.location[1]-b+k):(p=s.location[0]-u,N=s.location[1]-b);n.forEach((d,c)=>{const v=d.location;if(B(d)){if(m.event.ctrlKey&&s.selectElements.size>1&&L(h))return;d!==s.curElement&&(d.x=w[c].x+p,d.y=w[c].y+N)}else if(_(d)){if(m.event.ctrlKey&&s.selectElements.size>1&&L(h))return;v[0]=w[c].location[0]+p,v[1]=w[c].location[1]+N}else if(s.selectElements.size===1&&!m.event.ctrlKey)for(let f=s.focusIndex;f<s.focusIndex+2;f+=1){const y=d.points[f];y[0]=w[c].points[f][0]+p,y[1]=w[c].points[f][1]+N}else d.points.forEach((f,y)=>{f[0]=w[c].points[y][0]+p,f[1]=w[c].points[y][1]+N})})},z=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",z),s.isDrawing=!1,l&&F(s,()=>{n.forEach((p,N)=>{_(p)?(p.location[0]=w[N].location[0],p.location[1]=w[N].location[1]):B(p)?(p.x=w[N].x,p.y=w[N].y):p.points.forEach((d,c)=>{d[0]=w[N].points[c][0],d[1]=w[N].points[c][1]})})})};document.addEventListener("mousemove",g),document.addEventListener("mouseup",z)}}}const ce=await C("zrender"),It=await C("@rdx/shared"),X=await C("vue"),Ue="Fragment",pt="createVNode",re="Graphic",Re="Circle",Mi="Polyline",Ci="defineComponent",Bi="inject",zi="computed",Li="useCoordinateInst",Vi=e(X,Ci)({props:{item:{type:Object,required:!0},index:{type:Number,required:!0}},setup(t){const s=e(It,Li)(),l=e(X,Bi)("state"),m=e(X,zi)(()=>{const r=s.value;return r?t.item.points.map(x=>r.coord(x).map(k=>Math.floor(k)+.5)):[]}),{handleClick:i,handleMousedown:o}=se(()=>t.item);let n=!1;const a=(r,x)=>{if(l.selectElements.size>1){o(r,x);return}n=!1,r.event.stopPropagation(),oe(l,t.item,"focusLineVertex"),l.focusIndex=void 0,l.pointIndex=x,l.isDrawing=!0;const k=l.curElement.points[l.pointIndex],[h,u]=k,b=()=>{n=!0,l.canBlur=!1,k[0]=l.location[0],k[1]=l.location[1]},w=()=>{l.isDrawing=!1,document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",w),n&&F(l,()=>{k[0]=h,k[1]=u})};document.addEventListener("mousemove",b),document.addEventListener("mouseup",w)};return()=>{var x;const r=l.selectElements.has(t.item);return e(X,pt)(e(X,Ue),null,[m.value.map((k,h,u)=>h!==u.length-1?e(X,pt)(e(It,re),{key:h,graphic:e(ce,Mi),shape:{points:[k,u[h+1]]},style:{stroke:r&&l.focusIndex===h&&l.selectElements.size===1?"#f00":t.item.color||l.color},cursor:r&&l.mode!=="line"?"move":"pointer",onmousedown:b=>o(b,h),onclick:b=>i(b,h),z:r?10:void 0,silent:l.mode!=="select"},null):null),(x=m.value)==null?void 0:x.map((k,h,{length:u})=>r?e(X,pt)(e(X,Ue),null,[e(X,pt)(e(It,re),{key:`point-${h}`,graphic:e(ce,Re),shape:{cx:k[0],cy:k[1],r:3},style:{fill:h===0?"#f00":h===u-1?"#0f0":t.item.color||l.color},cursor:r&&l.mode!=="line"?"move":"pointer",onmousedown:b=>a(b,h),onclick:b=>{l.isDrawing||b.event.stopPropagation()},z:r?h===0?101:100:10,silent:l.mode!=="select"},null),l.pointIndex===h&&l.mode==="select"?e(X,pt)(e(It,re),{graphic:e(ce,Re),shape:{cx:k[0],cy:k[1],r:6},style:{stroke:t.item.color||l.color,fill:"none"},cursor:"move",onmousedown:b=>a(b,h),z:r?100:10,silent:!0},null):null]):null)])}}}),_e=await C("zrender"),ue=await C("@rdx/shared"),tt=await C("vue"),Si="Fragment",de="createVNode",$e="Graphic",Te="Circle",Di="defineComponent",ji="inject",We="computed",Oi="useCoordinateInst",Fi=e(tt,Di)({props:{item:{type:Object,required:!0},index:{type:Number,required:!0}},setup(t){const s=e(ue,Oi)(),l=e(tt,ji)("state"),m=e(tt,We)(()=>{const a=s.value;if(a)return{cx:~~a.coordX(t.item.location[0])+.5,cy:~~a.coordY(t.item.location[1])+.5,r:4}}),i=e(tt,We)(()=>{const a=m.value;if(a)return{...a,r:8}}),{handleClick:o,handleMousedown:n}=se(()=>t.item);return()=>{const a=l.selectElements.has(t.item);return e(tt,de)(e(tt,Si),null,[e(tt,de)(e(ue,$e),{graphic:e(_e,Te),shape:m.value,style:{fill:t.item.color||l.color},cursor:a&&l.mode!=="line"?"move":"pointer",onmousedown:n,onclick:o,z:a?100:10,silent:l.mode!=="select"},null),a?e(tt,de)(e(ue,$e),{graphic:e(_e,Te),shape:i.value,style:{stroke:t.item.color||l.color,fill:"none"},cursor:a&&l.mode!=="line"?"move":"pointer",onmousedown:n,z:a?100:10,silent:!0},null):null])}}}),Nt=await C("@rdx/shared"),Mt="isEqual";function Hi({x:t,y:s,width:l,height:m,state:i}){let o,n,a,r;const x=i.elements,k=i.focusIndex,h=i.curElement;return k===0?(x.forEach(u=>{if(B(u)){if(e(Nt,Mt)(h,u,!0))return;M(i,u.y,h.y)?n=u.y:M(i,u.y+u.height,h.y)&&(n=u.y+u.height)}}),n!==void 0&&(r=m+s-n)):k===1?x.forEach(u=>{if(B(u)){if(e(Nt,Mt)(h,u,!0))return;M(i,u.x,h.x+h.width)?a=u.x-h.x:M(i,u.x+u.width,h.x+h.width)&&(a=u.x+u.width-h.x)}}):k===2?x.forEach(u=>{if(B(u)){if(e(Nt,Mt)(h,u,!0))return;M(i,u.y,h.y+h.height)?r=u.y-h.y:M(i,u.y+u.height,h.y+h.height)&&(r=u.y+u.height-h.y)}}):k===3&&(x.forEach(u=>{if(B(u)){if(e(Nt,Mt)(h,u,!0))return;M(i,u.x,h.x)?o=u.x:M(i,u.x+u.width,h.x)&&(o=u.x+u.width)}}),o!==void 0&&(a=l+t-o)),a!==void 0&&(a=Math.max(a,0)),r!==void 0&&(r=Math.max(r,0)),[o,n,a,r]}const Ct=await C("@rdx/shared"),Bt="isEqual";function Ai({x:t,y:s,width:l,height:m,state:i}){let o,n,a,r;const x=i.elements,k=i.focusIndex,h=i.curElement;return k===0?(x.forEach(u=>{if(B(u)){if(e(Ct,Bt)(h,u))return;M(i,u.x,h.x)?o=u.x:M(i,u.x+u.width,h.x)&&(o=u.x+u.width),M(i,u.y,h.y)?n=u.y:M(i,u.y+u.height,h.y)&&(n=u.y+u.height)}}),o!==void 0&&(a=l+t-o),n!==void 0&&(r=m+s-n)):k===1?(x.forEach(u=>{if(B(u)){if(e(Ct,Bt)(h,u,!0))return;M(i,u.x,h.x+h.width)?a=u.x-h.x:M(i,u.x+u.width,h.x+h.width)&&(a=u.x+u.width-h.x),M(i,u.y,h.y)?n=u.y:M(i,u.y+u.height,h.y)&&(n=u.y+u.height)}}),n!==void 0&&(r=m+s-n)):k===2?x.forEach(u=>{if(B(u)){if(e(Ct,Bt)(h,u,!0))return;M(i,u.x,h.x+h.width)?a=u.x-h.x:M(i,u.x+u.width,h.x+h.width)&&(a=u.x+u.width-h.x),M(i,u.y,h.y+h.height)?r=u.y-h.y:M(i,u.y+u.height,h.y+h.height)&&(r=u.y+u.height-h.y)}}):k===3&&(x.forEach(u=>{if(B(u)){if(e(Ct,Bt)(h,u,!0))return;M(i,u.x,h.x)?o=u.x:M(i,u.x+u.width,h.x)&&(o=u.x+u.width),M(i,u.y,h.y+h.height)?r=u.y-h.y:M(i,u.y+u.height,h.y+h.height)&&(r=u.y+u.height-h.y)}}),o!==void 0&&(a=l+t-o)),a!==void 0&&(a=Math.max(a,0)),r!==void 0&&(r=Math.max(r,0)),[o,n,a,r]}const he=await C("zrender"),zt=await C("@rdx/shared"),Q=await C("vue"),Pi="Fragment",Lt="createVNode",pe="Graphic",Ui="Circle",qe="Polyline",Ri="defineComponent",_i="inject",Ke="computed",$i="useCoordinateInst",Ti=e(Q,Ri)({props:{item:{type:Object,required:!0},index:{type:Number,required:!0}},setup(t){const s=e(zt,$i)(),l=e(Q,_i)("state"),m=e(Q,Ke)(()=>{const h=s.value;if(!h)return[];const{x:u,y:b,width:w,height:g}=t.item;return[[u,b],[u+w,b],[u+w,b+g],[u,b+g]].map(z=>h.coord(z).map(p=>Math.floor(p)+.5))}),i=e(Q,Ke)(()=>({points:m.value.concat([m.value[0]])})),{handleClick:o,handleMousedown:n}=se(()=>t.item),a=(h,u)=>{l.isDrawing||h.event.stopPropagation(),oe(l,t.item,"focusRectVertex"),l.focusIndex=u,l.isDrawing=!0;const{x:b,y:w,width:g,height:z}=t.item,p=()=>{l.canBlur=!1;const d=t.item,{x:c,y:v,width:f,height:y}=d;if(u===0?(d.x=l.location[0],d.y=l.location[1],d.width+=c-d.x,d.height+=v-d.y):u===1?(d.width=l.location[0]-c,d.y=l.location[1],d.height+=v-d.y):u===2?(d.width=l.location[0]-d.x,d.height=l.location[1]-d.y):u===3&&(d.x=l.location[0],d.height=l.location[1]-d.y,d.width+=c-d.x),d.width=Math.max(d.width,0),d.height=Math.max(d.height,0),l.pickup){const S=Ai({x:c,y:v,width:f,height:y,state:l});S[0]!==void 0&&(t.item.x=S[0]),S[1]!==void 0&&(t.item.y=S[1]),S[2]!==void 0&&(t.item.width=S[2]),S[3]!==void 0&&(t.item.height=S[3])}},N=()=>{l.isDrawing=!1,document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",N),F(l,()=>{t.item.x=b,t.item.y=w,t.item.width=g,t.item.height=z})};document.addEventListener("mousemove",p),document.addEventListener("mouseup",N)},r=(h,u)=>{l.isDrawing||h.event.stopPropagation();const b=t.item;if(l.curElement!==b)return;oe(l,b,"focusRectSide"),l.focusIndex=u,l.isDrawing=!0;const{x:w,y:g,width:z,height:p}=t.item,N=()=>{l.canBlur=!1;const c=t.item,{x:v,y:f,width:y,height:S}=c;if(u===0?(c.y=l.location[1],c.height+=f-c.y):u===1?c.width=l.location[0]-v:u===2?c.height=l.location[1]-f:u===3&&(c.x=l.location[0],c.width+=v-c.x),c.width=Math.max(c.width,0),c.height=Math.max(c.height,0),l.pickup){const O=Hi({x:v,y:f,width:y,height:S,state:l});O[0]!==void 0&&(t.item.x=O[0]),O[1]!==void 0&&(t.item.y=O[1]),O[2]!==void 0&&(t.item.width=O[2]),O[3]!==void 0&&(t.item.height=O[3])}},d=()=>{l.isDrawing=!1,document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",d),F(l,()=>{t.item.x=w,t.item.y=g,t.item.width=z,t.item.height=p})};document.addEventListener("mousemove",N),document.addEventListener("mouseup",d)},x=["n-resize","e-resize","s-resize","w-resize"],k=["nw-resize","ne-resize","se-resize","sw-resize"];return()=>{const h=l.selectElements.has(t.item);return e(Q,Lt)(e(Q,Pi),null,[e(Q,Lt)(e(zt,pe),{graphic:e(he,qe),shape:i.value,style:{stroke:"none",fill:"transparent"},cursor:h?"move":"pointer",onmousedown:n,onclick:o,z:h?10:void 0,silent:l.mode!=="select"},null),m.value.map((u,b,w)=>e(Q,Lt)(e(zt,pe),{key:b,graphic:e(he,qe),shape:{points:[u,w[(b+1)%w.length]]},style:{stroke:t.item.color||l.color,lineWidth:1},cursor:h?x[b]:"pointer",onmousedown:g=>r(g,b),onclick:g=>g.event.stopPropagation(),z:h?10:void 0,silent:l.mode!=="select"},null)),m.value.map((u,b)=>h?e(Q,Lt)(e(zt,pe),{key:b,graphic:e(he,Ui),shape:{cx:u[0],cy:u[1],r:3},style:{fill:t.item.color||l.color},onmousedown:w=>a(w,b),onclick:w=>w.event.stopPropagation(),cursor:h?k[b]:"pointer",z:h?10:void 0,silent:l.mode!=="select"},null):null)])}}}),Wi=await C("@rdx/shared"),qi="isEqual";function Ki(t){const s=new Set,l=new Set,m=t.elements,i=(o,n)=>{for(let a=0;a<n[0].length;a+=1)if(o[0]===n[0][a]){s.add(n[0][a]);break}for(let a=0;a<n[1].length;a+=1)if(o[1]===n[1][a]){l.add(n[1][a]);break}};if(t.focus==="focusRectSide"){const o=t.curElement;if(!o)return[];m.forEach(n=>{if(B(n)){if(n.uid===o.uid)return;t.focusIndex===0?i([o.x,o.y],[[],[n.y,n.y+n.height/2,n.y+n.height]]):t.focusIndex===1?i([o.x+o.width,o.y],[[n.x,n.x+n.width/2,n.x+n.width],[]]):t.focusIndex===2?i([o.x,o.y+o.height],[[],[n.y,n.y+n.height/2,n.y+n.height]]):t.focusIndex===3&&i([o.x,o.y],[[n.x,n.x+n.width/2,n.x+n.width],[]])}else L(n)?t.focusIndex===0?n.points.forEach(a=>{i(a,[[],[o.y]])}):t.focusIndex===1?n.points.forEach(a=>{i(a,[[o.x+o.width],[]])}):t.focusIndex===2?n.points.forEach(a=>{i(a,[[],[o.y+o.height]])}):t.focusIndex===3&&n.points.forEach(a=>{i(a,[[o.x],[]])}):_(n)&&(t.focusIndex===0?i(n.location,[[],[o.y]]):t.focusIndex===1?i(n.location,[[o.x+o.width],[]]):t.focusIndex===2?i(n.location,[[],[o.y+o.height]]):t.focusIndex===3&&i(n.location,[[o.x],[]]))})}else if(t.focus==="focusRectVertex"){const o=t.curElement;if(!o)return[];m.forEach(n=>{if(B(n)){if(n.uid===o.uid)return;t.focusIndex===0?i([o.x,o.y],[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]]):t.focusIndex===1?i([o.x+o.width,o.y],[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]]):t.focusIndex===2?i([o.x+o.width,o.y+o.height],[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]]):t.focusIndex===3&&i([o.x,o.y+o.height],[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]])}else L(n)?t.focusIndex===0?n.points.forEach(a=>{i(a,[[o.x],[o.y]])}):t.focusIndex===1?n.points.forEach(a=>{i(a,[[o.x+o.width],[o.y]])}):t.focusIndex===2?n.points.forEach(a=>{i(a,[[o.x+o.width],[o.y+o.height]])}):t.focusIndex===3&&n.points.forEach(a=>{i(a,[[o.x],[o.y+o.height]])}):_(n)&&(t.focusIndex===0?i(n.location,[[o.x],[o.y]]):t.focusIndex===1?i(n.location,[[o.x+o.width],[o.y]]):t.focusIndex===2?i(n.location,[[o.x+o.width],[o.y+o.height]]):t.focusIndex===3&&i(n.location,[[o.x],[o.y+o.height]]))})}else if(t.focus==="focusLineVertex"){const o=t.curElement;if(!o)return[];const n=o.points[t.pointIndex];m.forEach(a=>{B(a)?i(n,[[a.x,a.x+a.width/2,a.x+a.width],[a.y,a.y+a.height/2,a.y+a.height]]):L(a)?a.uid===o.uid?a.points.forEach(r=>{e(Wi,qi)(n,r,!0)||i(n,r.map(x=>[x]))}):a.points.forEach(r=>{i(n,r.map(x=>[x]))}):_(a)&&i(n,a.location.map(r=>[r]))})}else if(_(t.curElement)){const o=t.curElement;m.forEach(n=>{t.selectElements.has(n)||(_(n)?i(o.location,n.location.map(a=>[a])):L(n)?i(o.location,n.points.reduce((a,r)=>(a[0].push(r[0]),a[1].push(r[1]),a),[[],[]])):B(n)&&i(o.location,[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]]))})}else if(B(t.curElement)){const o=t.curElement;if(!o)return[];m.forEach(n=>{t.selectElements.has(n)||(B(n)?(i([o.x,o.y],[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]]),i([o.x+o.width/2,o.y+o.height/2],[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]]),i([o.x+o.width,o.y+o.height],[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]])):L(n)?(i([o.x,o.y],[n.points.map(a=>a[0]),n.points.map(a=>a[1])]),i([o.x+o.width/2,o.y+o.height/2],[n.points.map(a=>a[0]),n.points.map(a=>a[1])]),i([o.x+o.width,o.y+o.height],[n.points.map(a=>a[0]),n.points.map(a=>a[1])])):_(n)&&(i([o.x,o.y],[[n.location[0]],[n.location[1]]]),i([o.x+o.width/2,o.y+o.height/2],[[n.location[0]],[n.location[1]]]),i([o.x+o.width,o.y+o.height],[[n.location[0]],[n.location[1]]])))})}else if(t.mode!=="select"){const o=t.location;m.forEach(n=>{var a,r;if(L(n))t.mode==="line"&&n.uid===((a=t.curElement)==null?void 0:a.uid)?(n.points.forEach((x,k,{length:h})=>{k!==h-1&&i(o,[[x[0]],[]])}),n.points.forEach((x,k,{length:h})=>{k!==h-1&&i(o,[[],[x[1]]])})):(n.points.forEach(x=>{i(o,[[x[0]],[]])}),n.points.forEach(x=>{i(o,[[],[x[1]]])}));else if(B(n)){if(t.mode==="rect"&&n.uid===((r=t.curElement)==null?void 0:r.uid))return;i(o,[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]])}else _(n)&&i(o,n.location.map(x=>[x]))})}return[Array.from(s).map(o=>({x:o})),Array.from(l).map(o=>({y:o}))].flat()}const Ye=await C("vue"),Yi="ref",Xi="watch";function Gi(t){const s=e(Ye,Yi)([]);return e(Ye,Xi)(t,()=>{t.mode!=="select"||t.isDrawing&&t.pickup&&(t.mode!=="select"||!L(t.curElement)||t.pointIndex!==void 0)?s.value=Ki(t):s.value=[]},{deep:!0}),s}function Ji(t){return()=>{t.canBlur&&(t.curElement||t.selectElements.size)&&dt(t),t.canBlur=!0}}const me=await C("vue"),Qi=await C("@rdx/shared"),Zi="useResizeObserver",tl="watchEffect",el="onBeforeMount",nl="onUnmounted";function ol(t,s,l){e(Qi,Zi)(()=>l.value,n=>{n.clientWidth===0||n.clientHeight===0||(s.bounding={width:n.clientWidth,height:n.clientHeight})},{immediate:!0});const m=[1,10,.05];e(me,tl)(()=>{if(!s.bounding)return;const n=s.bounding.width,a=s.bounding.height,r=(t.xMax??1920)-(t.xMin??0),x=(t.yMax??1080)-(t.yMin??0),k=r/x>n/a?n/r:a/x;k&&(s.scale=k,s.translateX=(n-r*k)/2,s.translateY=(a-x*k)/2,m[0]=k/2,m[1]=k*3,m[3]=k*.05)});const i=n=>{if(n.button!==2)return;const a=x=>{s.translateX+=x.clientX-n.clientX,s.translateY+=x.clientY-n.clientY,n=x},r=()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)};document.addEventListener("mousemove",a),document.addEventListener("mouseup",r)},o=n=>{n.ctrlKey&&(n.preventDefault(),s.scale-=n.deltaY/Math.abs(n.deltaY)*m[3],s.scale=Math.min(Math.max(s.scale,m[0]),m[1]))};return e(me,el)(()=>{document.addEventListener("mousedown",i)}),e(me,nl)(()=>{document.removeEventListener("mousedown",i)}),o}const il=await C("vue"),ll="watch";function al(t){const s=()=>{if(t.mode!=="line")return;const[l,m]=t.location;let i=t.curElement;if(i){const o=st(t);t.canBlur=!1,i.points.push([l,m]),t.pointIndex=i.points.length-1,F(t,()=>{i.points.pop(),ct(t,o)})}else{const o=st(t);t.canBlur=!1,i={uid:Z(),name:"\u7EBF\u63D2\u69FD",type:t.mode,points:[[l,m],[l,m]]},t.elements.push(i),t.curElement=i,t.selectElements.add(i),t.isDrawing=!0,t.pointIndex=i.points.length-1,F(t,()=>{t.elements.pop(),ct(t,o)})}};return e(il,ll)(()=>t.location,([l,m])=>{var o;if(t.mode!=="line")return;const i=(o=t.curElement)==null?void 0:o.points[t.pointIndex];i&&(i[0]=l,i[1]=m)}),s}function sl(t){return()=>{if(t.mode!=="point")return;const s=st(t),[l,m]=t.location,i={uid:Z(),name:"\u70B9\u63D2\u69FD",type:t.mode,location:[l,m]};t.elements.push(i),F(t,()=>{t.elements.pop(),ct(t,s)})}}const cl=await C("vue"),rl="watch";function ul(t){const s=l=>{if(l.button!==0||t.mode!=="rect"&&t.mode!=="select")return;const[m,i]=t.location;if(t.mode==="rect"){const n=st(t),a={uid:Z(),name:"\u6846\u63D2\u69FD",type:"rect",x:m,y:i,width:0,height:0};t.elements.push(a),t.curElement=a,t.selectElements.add(a),t.isDrawing=!0,F(t,()=>{t.elements.pop(),ct(t,n)})}else{t.isSelecting=!0;const n={uid:Z(),name:"\u6846\u63D2\u69FD",type:"rect",x:m,y:i,width:0,height:0};t.curElement=n}const o=()=>{t.isDrawing=!1,document.removeEventListener("mouseup",o);const n=t.curElement;if(!t.isSelecting)n.width===0||n.height===0?le(t):(t.canBlur=!1,dt(t,"rect"));else if(t.isSelecting=!1,!(n.width===0||n.height===0)){t.selectElements=new Set;const a=t.location,r=Math.min(m,a[0]),x=Math.max(m,a[0]),k=Math.min(i,a[1]),h=Math.max(i,a[1]);t.elements.forEach(u=>{_(u)?u.location[0]>=r&&u.location[0]<=x&&u.location[1]>=k&&u.location[1]<=h&&t.selectElements.add(u):B(u)?u.x>=r&&u.y>=k&&u.x+u.width<=x&&u.y+u.height<=h&&t.selectElements.add(u):L(u)&&u.points.every(b=>b[0]>=r&&b[0]<=x&&b[1]>=k&&b[1]<=h)&&t.selectElements.add(u)}),t.canBlur=!1,t.curElement=void 0,t.focusIndex=void 0,t.pointIndex=void 0}};document.addEventListener("mouseup",o)};return e(cl,rl)(()=>t.location,([l,m])=>{if((t.mode!=="rect"||!t.isDrawing)&&!t.isSelecting)return;const i=t.curElement;B(i)&&(i.width=l-i.x,i.height=m-i.y)}),s}function dl({x:t,y:s,state:l}){let m,i;const o=l.elements;for(let n=0;n<o.length&&!(m!==void 0&&i!==void 0);n+=1){const a=o[n];if(L(a))for(let r=0;r<a.points.length&&!(m!==void 0&&i!==void 0);r+=1){if(l.selectElements.has(a)&&(l.selectElements.size===1&&r===l.pointIndex||l.pointIndex===void 0))continue;const x=a.points[r];m===void 0&&M(l,x[0],t)&&(m=x[0]),i===void 0&&M(l,x[1],s)&&(i=x[1])}else if(B(a)){if(l.selectElements.has(a))continue;m===void 0&&(M(l,a.x,t)?m=a.x:M(l,a.x+a.width,t)?m=a.x+a.width:M(l,a.x+a.width/2,t)&&(m=a.x+a.width/2)),i===void 0&&(M(l,a.y,s)?i=a.y:M(l,a.y+a.height/2,s)?i=a.y+a.height/2:M(l,a.y+a.height,s)&&(i=a.y+a.height))}else if(_(a)){if(l.selectElements.has(a))continue;m===void 0&&M(l,a.location[0],t)&&(m=a.location[0]),i===void 0&&M(l,a.location[1],s)&&(i=a.location[1])}}return[m??t,i??s]}const Xe=await C("vue"),hl="onBeforeMount",pl="onUnmounted";function ml(t,s,l){const m=i=>{if(!l.value)return;const{left:o=0,top:n=0,width:a,height:r}=l.value.getBoundingClientRect()??{},{xMin:x=0,xMax:k=1920,yMin:h=0,yMax:u=1080}=t;let b=x+(i.clientX-o)*(k-x)/a,w=h+(i.clientY-n)*(u-h)/r;const g=s.curElement;if(s.orthogonal&&s.mode==="line"&&s.isDrawing&&L(g)){const z=g.points.at(-1),p=g.points.at(-2);if(z&&p){const N=b-p[0],d=w-p[1];Math.abs(N)>Math.abs(d)?w=p[1]:b=p[0]}}s.pickup&&(s.mode!=="select"||!L(s.curElement)||s.pointIndex!==void 0)?s.location=dl({x:b,y:w,state:s}):s.location=[b,w]};return e(Xe,hl)(()=>{document.addEventListener("mousemove",m)}),e(Xe,pl)(()=>{document.removeEventListener("mousemove",m)}),l}const Ge=await C("@rdx/shared"),T=await C("vue"),et="createVNode",fl="mergeProps",vl="GraphicContainer",xl="defineComponent",gl="ref",wl="provide",yl="computed",El="useCoordinateLogic",kl=e(T,xl)({props:{meta:{type:Object,required:!0},state:{type:Object,required:!0}},setup(t){const s=e(T,gl)(null);e(T,wl)("state",t.state);const{coordinateRef:l,rootRef:m}=e(Ge,El)({xAxis:{get min(){return t.meta.xMin??0},get max(){return t.meta.xMax??1920}},yAxis:{get min(){return t.meta.yMin??0},get max(){return t.meta.yMax??1080}}},{get clientWidth(){return((t.meta.xMax??1920)-(t.meta.xMin??0))*t.state.scale},get clientHeight(){return((t.meta.yMax??1080)-(t.meta.yMin??0))*t.state.scale}}),i=ol(t.meta,t.state,s);ml(t.meta,t.state,m);const o=al(t.state),n=ul(t.state),a=sl(t.state),r=Ji(t.state),x=Gi(t.state),k=()=>{o(),a(),r()},h=e(T,yl)(()=>t.state.background?URL.createObjectURL(t.state.background):null);return()=>{const u=l.value,b=t.state,w=(u==null?void 0:u.coordX(0))||0,g=(u==null?void 0:u.coordY(0))||0,z=((u==null?void 0:u.coordX(t.meta.bgLeft))||0)-w,p=((u==null?void 0:u.coordY(t.meta.bgTop))||0)-g,N=((u==null?void 0:u.coordX(t.meta.bgRight))||0)-w,d=((u==null?void 0:u.coordY(t.meta.bgBottom))||0)-g,c=h.value||t.meta.bgImage;return e(T,et)("div",{style:"flex: 1;height: calc(100vh - 46px);overflow: hidden;",ref:s,onClick:k,onMousedown:n,onWheel:i,onContextmenu:v=>v.preventDefault()},[b.bounding?e(T,et)("div",{ref:m,style:{width:`${((t.meta.xMax??1920)-(t.meta.xMin??0))*b.scale}px`,height:`${((t.meta.yMax??1080)-(t.meta.yMin??0))*b.scale}px`,transform:`translate(${~~b.translateX}px, ${~~b.translateY}px)`,background:c?`url(${c}) ${z}px ${p}px / calc(100% - ${z}px - ${N}px) calc(100% - ${p}px - ${d}px) no-repeat`:"var(--card-color)"}},[u?e(T,et)(e(Ge,vl),{style:"height: 100%;",coordinate:u},{default:()=>{var v;return[b.elements.map((f,y)=>L(f)?e(T,et)(Vi,{key:f.uid,item:f,index:y},null):B(f)?e(T,et)(Ti,{key:f.uid,item:f,index:y},null):e(T,et)(Fi,{key:f.uid,item:f,index:y},null)),b.isSelecting&&B(b.curElement)?e(T,et)(ki,{key:b.curElement.uid,item:b.curElement},null):null,(v=x.value)==null?void 0:v.map((f,y)=>e(T,et)(mi,e(T,fl)(f,{key:`auxiliary${y}`}),null))]}}):null]):null])}}}),Vt=await C("vue"),bl="createElementVNode",Il="openBlock",Nl="createElementBlock",Ml="defineComponent",Cl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Bl=e(Vt,bl)("path",{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z",fill:"currentColor"},null,-1),zl=[Bl],Ll=e(Vt,Ml)({name:"SwapOutlined",render:function(t,s){return e(Vt,Il)(),e(Vt,Nl)("svg",Cl,zl)}}),mt=await C("vue"),Je="createElementVNode",Vl="openBlock",Sl="createElementBlock",Dl="defineComponent",jl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},Ol=e(mt,Je)("g",{fill:"none"},[e(mt,Je)("path",{d:"M10 2a8 8 0 1 0 0 16a8 8 0 0 0 0-16z",fill:"currentColor"})],-1),Fl=[Ol],St=e(mt,Dl)({name:"Circle20Filled",render:function(t,s){return e(mt,Vl)(),e(mt,Sl)("svg",jl,Fl)}}),ft=await C("vue"),Qe="createElementVNode",Hl="openBlock",Al="createElementBlock",Pl="defineComponent",Ul={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},Rl=e(ft,Qe)("g",{fill:"none"},[e(ft,Qe)("path",{d:"M15.5 4a1.5 1.5 0 1 0 0 3a1.5 1.5 0 0 0 0-3zM13 5.5a2.5 2.5 0 1 1 1.557 2.316l-1.282 1.923a2.5 2.5 0 1 1-3.83 3.185l-2.496 1.07a2.5 2.5 0 1 1-.394-.919l2.496-1.07a2.5 2.5 0 0 1 3.392-2.822l1.282-1.922A2.492 2.492 0 0 1 13 5.5zm-3 6a1.5 1.5 0 1 0 3 0a1.5 1.5 0 0 0-3 0zm-7 3a1.5 1.5 0 1 0 3 0a1.5 1.5 0 0 0-3 0z",fill:"currentColor"})],-1),_l=[Rl],Ze=e(ft,Pl)({name:"DataLine20Regular",render:function(t,s){return e(ft,Hl)(),e(ft,Al)("svg",Ul,_l)}}),vt=await C("vue"),tn="createElementVNode",$l="openBlock",Tl="createElementBlock",Wl="defineComponent",ql={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 16 16"},Kl=e(vt,tn)("g",{fill:"none"},[e(vt,tn)("path",{d:"M1 5.5A2.5 2.5 0 0 1 3.5 3h9A2.5 2.5 0 0 1 15 5.5v5a2.5 2.5 0 0 1-2.5 2.5h-9A2.5 2.5 0 0 1 1 10.5v-5zM3.5 4A1.5 1.5 0 0 0 2 5.5v5A1.5 1.5 0 0 0 3.5 12h9a1.5 1.5 0 0 0 1.5-1.5v-5A1.5 1.5 0 0 0 12.5 4h-9z",fill:"currentColor"})],-1),Yl=[Kl],en=e(vt,Wl)({name:"RectangleLandscape16Regular",render:function(t,s){return e(vt,$l)(),e(vt,Tl)("svg",ql,Yl)}}),rt=await C("vue"),fe="createElementVNode",Xl="openBlock",Gl="createElementBlock",Jl="defineComponent",Ql={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Zl=e(rt,fe)("path",{d:"M200.66 352H144a96 96 0 0 1 0-192h55.41",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48"},null,-1),ta=e(rt,fe)("path",{d:"M312.59 160H368a96 96 0 0 1 0 192h-56.66",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48"},null,-1),ea=e(rt,fe)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M169.07 256h175.86"},null,-1),na=[Zl,ta,ea],oa=e(rt,Jl)({name:"Link",render:function(t,s){return e(rt,Xl)(),e(rt,Gl)("svg",Ql,na)}}),nn=t=>typeof t=="object"&&t!=null&&t.nodeType===1,on=(t,s)=>(!s||t!=="hidden")&&t!=="visible"&&t!=="clip",ve=(t,s)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const l=getComputedStyle(t,null);return on(l.overflowY,s)||on(l.overflowX,s)||(m=>{const i=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(m);return!!i&&(i.clientHeight<m.scrollHeight||i.clientWidth<m.scrollWidth)})(t)}return!1},Dt=(t,s,l,m,i,o,n,a)=>o<t&&n>s||o>t&&n<s?0:o<=t&&a<=l||n>=s&&a>=l?o-t-m:n>s&&a<l||o<t&&a>l?n-s+i:0,ia=t=>t.parentElement??(t.getRootNode().host||null),ln=(t,s)=>{var l,m,i,o;if(typeof document>"u")return[];const{scrollMode:n,block:a,inline:r,boundary:x,skipOverflowHiddenElements:k}=s,h=typeof x=="function"?x:at=>at!==x;if(!nn(t))throw new TypeError("Invalid target");const u=document.scrollingElement||document.documentElement,b=[];let w=t;for(;nn(w)&&h(w);){if(w=ia(w),w===u){b.push(w);break}w!=null&&w===document.body&&ve(w)&&!ve(document.documentElement)||w!=null&&ve(w,k)&&b.push(w)}const g=(m=(l=window.visualViewport)==null?void 0:l.width)!=null?m:innerWidth,z=(o=(i=window.visualViewport)==null?void 0:i.height)!=null?o:innerHeight,{scrollX:p,scrollY:N}=window,{height:d,width:c,top:v,right:f,bottom:y,left:S}=t.getBoundingClientRect(),{top:O,right:_t,bottom:$t,left:ro}=(at=>{const P=window.getComputedStyle(at);return{top:parseFloat(P.scrollMarginTop)||0,right:parseFloat(P.scrollMarginRight)||0,bottom:parseFloat(P.scrollMarginBottom)||0,left:parseFloat(P.scrollMarginLeft)||0}})(t);let q=a==="start"||a==="nearest"?v-O:a==="end"?y+$t:v+d/2-O+$t,K=r==="center"?S+c/2-ro+_t:r==="end"?f+_t:S-ro;const be=[];for(let at=0;at<b.length;at++){const P=b[at],{height:Tt,width:Wt,top:qt,right:Ie,bottom:Ne,left:Kt}=P.getBoundingClientRect();if(n==="if-needed"&&v>=0&&S>=0&&y<=z&&f<=g&&v>=qt&&y<=Ne&&S>=Kt&&f<=Ie)return be;const Yt=getComputedStyle(P),Xt=parseInt(Yt.borderLeftWidth,10),Gt=parseInt(Yt.borderTopWidth,10),Jt=parseInt(Yt.borderRightWidth,10),Qt=parseInt(Yt.borderBottomWidth,10);let nt=0,ot=0;const Zt="offsetWidth"in P?P.offsetWidth-P.clientWidth-Xt-Jt:0,te="offsetHeight"in P?P.offsetHeight-P.clientHeight-Gt-Qt:0,Me="offsetWidth"in P?P.offsetWidth===0?0:Wt/P.offsetWidth:0,Ce="offsetHeight"in P?P.offsetHeight===0?0:Tt/P.offsetHeight:0;if(u===P)nt=a==="start"?q:a==="end"?q-z:a==="nearest"?Dt(N,N+z,z,Gt,Qt,N+q,N+q+d,d):q-z/2,ot=r==="start"?K:r==="center"?K-g/2:r==="end"?K-g:Dt(p,p+g,g,Xt,Jt,p+K,p+K+c,c),nt=Math.max(0,nt+N),ot=Math.max(0,ot+p);else{nt=a==="start"?q-qt-Gt:a==="end"?q-Ne+Qt+te:a==="nearest"?Dt(qt,Ne,Tt,Gt,Qt+te,q,q+d,d):q-(qt+Tt/2)+te/2,ot=r==="start"?K-Kt-Xt:r==="center"?K-(Kt+Wt/2)+Zt/2:r==="end"?K-Ie+Jt+Zt:Dt(Kt,Ie,Wt,Xt,Jt+Zt,K,K+c,c);const{scrollLeft:uo,scrollTop:ho}=P;nt=Ce===0?0:Math.max(0,Math.min(ho+nt/Ce,P.scrollHeight-Tt/Ce+te)),ot=Me===0?0:Math.max(0,Math.min(uo+ot/Me,P.scrollWidth-Wt/Me+Zt)),q+=ho-nt,K+=uo-ot}be.push({el:P,top:nt,left:ot})}return be},la=t=>t===!1?{block:"end",inline:"nearest"}:(s=>s===Object(s)&&Object.keys(s).length!==0)(t)?t:{block:"start",inline:"nearest"};function aa(t,s){if(!t.isConnected||!(i=>{let o=i;for(;o&&o.parentNode;){if(o.parentNode===document)return!0;o=o.parentNode instanceof ShadowRoot?o.parentNode.host:o.parentNode}return!1})(t))return;const l=(i=>{const o=window.getComputedStyle(i);return{top:parseFloat(o.scrollMarginTop)||0,right:parseFloat(o.scrollMarginRight)||0,bottom:parseFloat(o.scrollMarginBottom)||0,left:parseFloat(o.scrollMarginLeft)||0}})(t);if((i=>typeof i=="object"&&typeof i.behavior=="function")(s))return s.behavior(ln(t,s));const m=typeof s=="boolean"||s==null?void 0:s.behavior;for(const{el:i,top:o,left:n}of ln(t,la(s))){const a=o-l.top+l.bottom,r=n-l.left+l.right;i.scroll({top:a,left:r,behavior:m})}}const an=await C("@rdx/admin"),A=await C("vue"),G=await C("naive-ui"),sa="NIcon",ca="NIcon",ra="NInput",ua="NFormItem",da="NInput",ha="NFormItem",pa="NIcon",ma="NButton",fa="NPopover",va="NScrollbar",U="createVNode",xa="isVNode",ga="defineComponent",wa="ref",ya="watch",Ea="useColors",ka="createHoverColor";function ba(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!e(A,xa)(t)}const Ia=e(A,ga)({props:{state:{type:Object,required:!0},hack:{type:Function,required:!0}},setup(t){const s=e(an,Ea)();let l=null;const m=e(A,wa)(null);return e(A,ya)(m,i=>{i&&setTimeout(()=>{aa(i,{scrollMode:"if-needed",behavior:"smooth",block:"center",inline:"nearest"})},250)},{immediate:!0}),()=>{let i;return e(A,U)(e(G,va),{class:"un-h-full un-w-240px un-bg-#fff un-b-r-1px un-b-r-solid un-border-var(--divider-color)"},ba(i=t.state.elements.map((o,n)=>e(A,U)("div",{key:o.uid,ref:a=>{t.state.curElement===o&&(m.value=a)},draggable:!0,onDragstart:()=>l=n,onDragover:a=>{l!==null&&a.preventDefault()},onDrop:async()=>{if(l===null||l===n)return;await t.hack();const a=t.state.elements[l];l<n?(t.state.elements.splice(n+1,0,a),t.state.elements.splice(l,1)):(t.state.elements.splice(l,1),t.state.elements.splice(n,0,a))}},[e(A,U)(e(G,fa),{placement:"left",trigger:"click",raw:!0},{default:()=>{var a;return[e(A,U)("div",{class:"un-relative un-p-8px un-bg-#fff un-rounded-3px"},[((a=t.state.curElement)==null?void 0:a.type)==="line"?e(A,U)(e(G,ma),{text:!0,class:"un-absolute un-right-8px",type:"primary",onClick:()=>{t.state.curElement.points.reverse()}},{default:()=>[e(A,U)(e(G,pa),null,{default:()=>[e(A,U)(Ll,null,null)]})]}):null,e(A,U)(e(G,ha),{label:"\u540D\u79F0"},{default:()=>[e(A,U)(e(G,da),{value:o.name,"onUpdate:value":r=>o.name=r},null)]}),e(A,U)(e(G,ua),{label:"\u5173\u8054\u53D8\u91CF",class:"un-mb--12px"},{default:()=>[e(A,U)(e(G,ra),{value:o.variableKey,"onUpdate:value":r=>o.variableKey=r},null)]})])]},trigger:()=>e(A,U)("div",{class:["un-cursor-move un-px-8px un-py-4px un-lh-24px un-flex un-items-center un-gap-6px un-min-h-32px",t.state.selectElements.has(o)?"":"un-hover:bg-var(--hover-color)"],style:{background:t.state.selectElements.has(o)?e(an,ka)(s.value.primaryColor,.75):void 0},onClick:a=>{t.state.mode==="select"&&(a.ctrlKey||(t.state.selectElements=new Set),t.state.selectElements.has(o)?t.state.selectElements.delete(o):t.state.selectElements.add(o),t.state.curElement=o)}},[e(A,U)("div",{class:"un-flex-none un-flex un-items-center"},[e(A,U)(e(G,ca),{size:14},{default:()=>[B(o)?e(A,U)(en,null,null):L(o)?e(A,U)(Ze,null,null):e(A,U)(St,null,null)]})]),e(A,U)("div",{class:"un-flex-1"},[o.name||"\u672A\u547D\u540D"]),o.variableKey?e(A,U)("div",{class:"un-flex-none un-flex un-items-center"},[e(A,U)(e(G,sa),{size:14},{default:()=>[e(A,U)(oa,null,null)]})]):null])})])))?i:{default:()=>[i]})}}}),jt=await C("vue"),Na="createElementVNode",Ma="openBlock",Ca="createElementBlock",Ba="defineComponent",za={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},La=e(jt,Na)("path",{d:"M180 176h-60c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8zm724 0h-60c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8zM785.3 504.3L657.7 403.6a7.23 7.23 0 0 0-11.7 5.7V476H378v-62.8c0-6-7-9.4-11.7-5.7L238.7 508.3a7.14 7.14 0 0 0 0 11.3l127.5 100.8c4.7 3.7 11.7.4 11.7-5.7V548h268v62.8c0 6 7 9.4 11.7 5.7l127.5-100.8c3.8-2.9 3.8-8.5.2-11.4z",fill:"currentColor"},null,-1),Va=[La],sn=e(jt,Ba)({name:"ColumnWidthOutlined",render:function(t,s){return e(jt,Ma)(),e(jt,Ca)("svg",za,Va)}}),xt=await C("vue"),cn="createElementVNode",Sa="openBlock",Da="createElementBlock",ja="defineComponent",Oa={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Fa=e(xt,cn)("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448s448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372s372 166.6 372 372s-166.6 372-372 372z",fill:"currentColor"},null,-1),Ha=e(xt,cn)("path",{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7c-21.2 8.1-39.2 22.3-52.1 40.9c-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0 1 30.9-44.8c59-22.7 97.1-74.7 97.1-132.5c.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1 0 80 0a40 40 0 1 0-80 0z",fill:"currentColor"},null,-1),Aa=[Fa,Ha],Pa=e(xt,ja)({name:"QuestionCircleOutlined",render:function(t,s){return e(xt,Sa)(),e(xt,Da)("svg",Oa,Aa)}}),Ot=await C("vue"),Ua="createElementVNode",Ra="openBlock",_a="createElementBlock",$a="defineComponent",Ta={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Wa=e(Ot,Ua)("path",{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144s144-64.5 144-144s-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80s80 35.8 80 80s-35.8 80-80 80z",fill:"currentColor"},null,-1),qa=[Wa],Ka=e(Ot,$a)({name:"SaveOutlined",render:function(t,s){return e(Ot,Ra)(),e(Ot,_a)("svg",Ta,qa)}}),Ft=await C("vue"),Ya="createElementVNode",Xa="openBlock",Ga="createElementBlock",Ja="defineComponent",Qa={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Za=e(Ft,Ya)("path",{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h360c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H184V184h656v320c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V144c0-17.7-14.3-32-32-32zM653.3 599.4l52.2-52.2a8.01 8.01 0 0 0-4.7-13.6l-179.4-21c-5.1-.6-9.5 3.7-8.9 8.9l21 179.4c.8 6.6 8.9 9.4 13.6 4.7l52.4-52.4l256.2 256.2c3.1 3.1 8.2 3.1 11.3 0l42.4-42.4c3.1-3.1 3.1-8.2 0-11.3L653.3 599.4z",fill:"currentColor"},null,-1),ts=[Za],es=e(Ft,Ja)({name:"SelectOutlined",render:function(t,s){return e(Ft,Xa)(),e(Ft,Ga)("svg",Qa,ts)}}),Ht=await C("vue"),ns="createElementVNode",os="openBlock",is="createElementBlock",ls="defineComponent",as={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},ss=e(Ht,ns)("path",{d:"M839.6 433.8L749 150.5a9.24 9.24 0 0 0-8.9-6.5h-77.4c-4.1 0-7.6 2.6-8.9 6.5l-91.3 283.3c-.3.9-.5 1.9-.5 2.9c0 5.1 4.2 9.3 9.3 9.3h56.4c4.2 0 7.8-2.8 9-6.8l17.5-61.6h89l17.3 61.5c1.1 4 4.8 6.8 9 6.8h61.2c1 0 1.9-.1 2.8-.4c2.4-.8 4.3-2.4 5.5-4.6c1.1-2.2 1.3-4.7.6-7.1zM663.3 325.5l32.8-116.9h6.3l32.1 116.9h-71.2zm143.5 492.9H677.2v-.4l132.6-188.9c1.1-1.6 1.7-3.4 1.7-5.4v-36.4c0-5.1-4.2-9.3-9.3-9.3h-204c-5.1 0-9.3 4.2-9.3 9.3v43c0 5.1 4.2 9.3 9.3 9.3h122.6v.4L587.7 828.9a9.35 9.35 0 0 0-1.7 5.4v36.4c0 5.1 4.2 9.3 9.3 9.3h211.4c5.1 0 9.3-4.2 9.3-9.3v-43a9.2 9.2 0 0 0-9.2-9.3zM416 702h-76V172c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v530h-76c-6.7 0-10.5 7.8-6.3 13l112 141.9a8 8 0 0 0 12.6 0l112-141.9c4.1-5.2.4-13-6.3-13z",fill:"currentColor"},null,-1),cs=[ss],rs=e(Ht,ls)({name:"SortAscendingOutlined",render:function(t,s){return e(Ht,os)(),e(Ht,is)("svg",as,cs)}}),At=await C("vue"),us="createElementVNode",ds="openBlock",hs="createElementBlock",ps="defineComponent",ms={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},fs=e(At,us)("path",{d:"M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355a8 8 0 0 0-12.6 0l-112 141.7a7.98 7.98 0 0 0 6.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z",fill:"currentColor"},null,-1),vs=[fs],Pt=e(At,ps)({name:"VerticalAlignTopOutlined",render:function(t,s){return e(At,ds)(),e(At,hs)("svg",ms,vs)}}),gt=await C("vue"),rn="createElementVNode",xs="openBlock",gs="createElementBlock",ws="defineComponent",ys={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},Es=e(gt,rn)("g",{fill:"none"},[e(gt,rn)("path",{d:"M14.085 2H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h3v2H5.5a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1H13v-2h3a2 2 0 0 0 2-2V7h-1v6a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h10v-.5c0-.175.03-.344.085-.5zM12 17H8v-2h4v2zm3-14.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V5h-.78a.5.5 0 0 0-.474.342l-.544 1.632A1.5 1.5 0 0 1 11.78 8H11v1.5a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V7h.78a.5.5 0 0 0 .474-.342l.544-1.632A1.5 1.5 0 0 1 14.22 4H15V2.5zM10 7H8v2h2V7zm6-2h2V3h-2v2z",fill:"currentColor"})],-1),ks=[Es],bs=e(gt,ws)({name:"DesktopFlow20Regular",render:function(t,s){return e(gt,xs)(),e(gt,gs)("svg",ys,ks)}}),wt=await C("vue"),un="createElementVNode",Is="openBlock",Ns="createElementBlock",Ms="defineComponent",Cs={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Bs=e(wt,un)("g",{fill:"none"},[e(wt,un)("path",{d:"M10.25 2a.75.75 0 0 1 .743.648L11 2.75v4.794A6.253 6.253 0 0 1 16.457 13h4.794a.75.75 0 0 1 .102 1.493l-.102.007h-4.794A6.253 6.253 0 0 1 11 19.956v1.295a.75.75 0 0 1-1.494.102L9.5 21.25v-1.295a6.253 6.253 0 0 1-5.455-5.454H2.75a.75.75 0 0 1-.102-1.494L2.75 13h1.294A6.253 6.253 0 0 1 9.5 7.544V2.75a.75.75 0 0 1 .75-.75zM9.5 14.5H5.559A4.754 4.754 0 0 0 9.5 18.442V14.5zm5.441 0H11v3.941a4.754 4.754 0 0 0 3.941-3.94zm-5.44-5.442A4.754 4.754 0 0 0 5.558 13H9.5V9.058zm1.5 0L11 13h3.942a4.755 4.755 0 0 0-3.726-3.902L11 9.058z",fill:"currentColor"})],-1),zs=[Bs],Ls=e(wt,Ms)({name:"PointScan24Regular",render:function(t,s){return e(wt,Is)(),e(wt,Ns)("svg",Cs,zs)}}),it=await C("vue"),Ut="createElementVNode",Vs="openBlock",Ss="createElementBlock",Ds="defineComponent",js={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Os=e(it,Ut)("rect",{x:"48",y:"80",width:"416",height:"352",rx:"48",ry:"48",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),Fs=e(it,Ut)("circle",{cx:"336",cy:"176",r:"32",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),Hs=e(it,Ut)("path",{d:"M304 335.79l-90.66-90.49a32 32 0 0 0-43.87-1.3L48 352",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),As=e(it,Ut)("path",{d:"M224 432l123.34-123.34a32 32 0 0 1 43.11-2L464 368",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Ps=[Os,Fs,Hs,As],dn=e(it,Ds)({name:"ImageOutline",render:function(t,s){return e(it,Vs)(),e(it,Ss)("svg",js,Ps)}});function Us(t){const s=t.filter(i=>L(i)),l=[];s.forEach(i=>{const o=i.points.at(-1);if(l.some(a=>Y(a.point,o)))return;const n=s.filter(a=>i!==a&&Y(o,a.points.at(0))).length;n?l.push({point:o,branch:n>1}):s.filter(a=>i!==a&&(Y(i.points.at(-1),a.points.at(0))||Y(i.points.at(0),a.points.at(-1)))).length||l.push({point:i.points.at(0)})});const m=s.map(i=>{const o=l.findIndex(a=>Y(a.point,i.points.at(0))),n=l.findIndex(a=>Y(a.point,i.points.at(-1)));return{source:o===-1?void 0:o,target:n===-1?void 0:n}});return{nodes:l,edges:m}}const Rs=await C("@rdx/admin"),_s=await C("@rdx/shared"),hn=await C("@lowcode-fe/designer/designer"),$=await C("vue"),$s=await C("naive-ui"),Ts="NModal",pn="createTextVNode",J="createVNode",Ws="mergeProps",mn="CodeEditor",qs="defineComponent",Ks="createModalProps",Ys="presetStyleModal",Xs=e($,qs)({props:{...e(_s,Ks)()},setup(t){return()=>e($,J)(e($s,Ts),e($,Ws)({preset:"card",showIcon:!1,maskClosable:!1,title:"\u6D41\u7A0B\u53C2\u6570",show:t.show,"onUpdate:show":t["onUpdate:show"],style:{width:"1200px"},size:"small",autoFocus:!1},e(Rs,Ys)),{default:()=>{var s,l;return[e($,J)("div",{class:"un-flex un-gap-8px"},[e($,J)("div",{class:"un-flex-1"},[e($,J)("div",{class:"un-px-12px un-lh-32px"},[e($,pn)("\u8282\u70B9")]),e($,J)("div",{style:"height: calc(100vh - 240px);"},[e($,J)(e(hn,mn),{readOnly:!0,value:`[
${(s=t.data)==null?void 0:s.nodes.map(m=>`  { ${m.branch?`branch: true, location: [${m.point[0]}, ${m.point[1]}]`:"on: true"} },`).join(`\r
`)}
]`},null)])]),e($,J)("div",{class:"un-w-400px"},[e($,J)("div",{class:"un-px-12px un-lh-32px"},[e($,pn)("\u8FDE\u63A5\u7EBF")]),e($,J)("div",{style:"height: calc(100vh - 240px);"},[e($,J)(e(hn,mn),{readOnly:!0,value:`[
${(l=t.data)==null?void 0:l.edges.map(m=>`  { ${["source","target"].filter(i=>m[i]!==void 0).map(i=>`${i}: ${m[i]}`).join(", ")} },`).join(`\r
`)}
]`},null)])])])]}})}}),Gs=await C("@rdx/admin"),E=await C("vue"),V=await C("naive-ui"),Js="NDivider",Qs="NButtonGroup",Zs="NDivider",tc="NColorPicker",ec="NIcon",nc="NButton",oc="NInputNumber",ic="NFormItem",lc="NInputNumber",ac="NFormItem",sc="NInputNumber",cc="NFormItem",rc="NInputNumber",uc="NFormItem",dc="NIcon",hc="NButton",pc="NDivider",mc="NInput",fc="NFormItem",vc="NPopover",xc="NDivider",gc="NDivider",wc="NButtonGroup",yc="NDivider",Ec="NInputNumber",kc="NInputGroupLabel",bc="NInputGroup",Ic="NDivider",Nc="NIcon",Mc="NButton",Cc="NIcon",Bc="NIcon",zc="NPopover",Lc="NIcon",Vc="NButton",Sc="NTooltip",Dc="NIcon",jc="NButton",Oc="NTooltip",Fc="NIcon",Hc="NButton",Ac="NTooltip",Pc="isVNode",I="createVNode",Uc="Fragment",xe="createTextVNode",Rc="defineComponent",fn="ref",_c="preferMessage";function ge(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!e(E,Pc)(t)}let vn,we,Rt,ye,W,Ee,xn,gn,lt,ke,wn,yn,En,kn,bn,In,Nn,Mn,Cn,Bn,zn,Ln,D,H,Vn,Sn,Dn,jn,On,Fn,Hn,An,Pn,Un,Rn,_n,$n,Tn,Wn,qn,Kn,Yn,Xn,Gn,Jn,Qn,Zn,to,eo,no,oo,io,j,lo,ao,so,co;vn=e(E,Rc)({props:{meta:{type:Object,required:!0},state:{type:Object,required:!0},hack:{type:Function,required:!0},onSave:{type:Function,required:!0}},setup(t){const s=R(()=>t.meta,"bgImage"),l=R(()=>t.meta,"bgLeft",0),m=R(()=>t.meta,"bgRight",0),i=R(()=>t.meta,"bgTop",0),o=R(()=>t.meta,"bgBottom",0),n=(g,z,p)=>e(E,I)(e(V,Ac),null,{default:()=>[p],trigger:()=>e(E,I)(e(V,Hc),{type:t.state.mode===z?"primary":"default",ghost:!0,size:"small",onClick:()=>{const N=st(t.state);dt(t.state,z),F(t.state,()=>ct(t.state,N))},focusable:!1},{default:()=>[e(E,I)(e(V,Fc),null,ge(g)?g:{default:()=>[g]})]})}),a=(g,z,p)=>e(E,I)(e(V,Oc),null,{default:()=>[p],trigger:()=>e(E,I)(e(V,jc),{type:t.state[z]?"primary":"default",ghost:!0,size:"small",onClick:()=>t.state[z]=!t.state[z],focusable:!1},{default:()=>[e(E,I)(e(V,Dc),null,ge(g)?g:{default:()=>[g]})]})}),r=(g,z,p)=>e(E,I)(e(V,Sc),null,{default:()=>[z],trigger:()=>e(E,I)(e(V,Vc),{type:"default",ghost:!0,size:"small",onClick:p,focusable:!1},{default:()=>[e(E,I)(e(V,Lc),null,ge(g)?g:{default:()=>[g]})]})}),x=()=>{const g=document.createElement("input");g.style.display="none",g.type="file",g.onchange=z=>{var p;t.state.background=(p=z.target.files)==null?void 0:p[0]},document.body.appendChild(g),g.click(),g.remove()},k=R(()=>t.state,"color"),h=()=>{t.state.curElement?t.state.curElement.color=k.v:k.on()},u=[{key:"ctrl + s",desc:"\u4FDD\u5B58"},{key:"ctrl + a",desc:"\u5168\u9009"},{key:"ctrl + b",desc:"\u65B0\u589E\u62D0\u70B9"},{key:"ctrl + d",desc:"\u5206\u5272\u7EBF"},{key:"ctrl + m",desc:"\u5408\u5E76\u7EBF"},{key:"ctrl + j",desc:"\u8DF3\u7EBF"},{key:"ctrl + z",desc:"\u64A4\u9500"},{key:"tab",desc:"\u9009\u4E2D\u4E0B\u4E00\u4E2A"},{key:"space",desc:"\u7ED3\u675F\u753B\u7EBF"},{key:"delete",desc:"\u5220\u9664\u5143\u7D20"}],b=e(E,fn)(!1),w=e(E,fn)();return()=>e(E,I)(e(E,Uc),null,[e(E,I)("div",{class:"un-flex un-items-center un-text-14px un-gap-8px"},[e(E,I)(e(V,zc),null,{default:()=>[e(E,I)("div",{class:"un-flex un-flex-col un-gap-8px"},[u.map(g=>e(E,I)("div",{key:g.key,class:"un-flex"},[e(E,I)("div",{class:"un-w-60px un-text-center un-bg-#eaeaea un-rounded-3px"},[g.key]),e(E,I)("div",{class:"un-ml-8px"},[g.desc])])),e(E,I)("div",{class:"un-flex un-gap-8px"},[e(E,I)("div",{class:"un-flex un-items-center"},[e(E,I)(e(V,Bc),{color:"#f00"},{default:()=>[e(E,I)(St,null,null)]}),e(E,I)("div",{class:"un-ml-8px"},[e(E,xe)("\u8D77\u70B9")])]),e(E,I)("div",{class:"un-flex un-items-center"},[e(E,I)(e(V,Cc),{color:"#0f0"},{default:()=>[e(E,I)(St,null,null)]}),e(E,I)("div",{class:"un-ml-8px"},[e(E,xe)("\u7EC8\u70B9")])])])])],trigger:()=>e(E,I)(e(V,Mc),{ghost:!0,size:"small",focusable:!1},{default:()=>[e(E,I)(e(V,Nc),null,{default:()=>[e(E,I)(Pa,null,null)]})]})}),e(E,I)(e(V,Ic),{vertical:!0},null),e(E,I)(e(V,bc),{class:"un-w-96px"},{default:()=>[e(E,I)(e(V,kc),{size:"small"},{default:()=>[e(E,xe)("\u6B65\u8DDD")]}),e(E,I)(e(V,Ec),{size:"small",value:t.state.stepPace,"onUpdate:value":g=>t.state.stepPace=g,showButton:!1},null)]}),r(e(E,I)(bs,null,null),"\u89E3\u6790\u6D41\u7A0B",()=>{const g=Us(Array.from(t.state.selectElements));if(!g.nodes.length){e(Gs,_c).warning("\u8BF7\u5148\u9009\u62E9\u7EBF");return}b.value=!0,w.value=g,t.state.selectElements.clear()}),e(E,I)(e(V,yc),{vertical:!0},null),e(E,I)(e(V,wc),null,{default:()=>[n(e(E,I)(es,null,null),"select","\u9009\u62E9"),n(e(E,I)(en,null,null),"rect","\u6846"),n(e(E,I)(Ze,null,null),"line","\u7EBF"),n(e(E,I)(St,null,null),"point","\u70B9")]}),e(E,I)(e(V,gc),{vertical:!0},null),a("\u221F","orthogonal","\u6B63\u4EA4"),a(e(E,I)(Ls,null,null),"pickup","\u5BF9\u8C61\u62FE\u53D6"),e(E,I)(e(V,xc),{vertical:!0},null),e(E,I)(e(V,vc),null,{default:()=>[e(E,I)("div",{class:"un-flex un-items-center un-gap-6px"},[e(E,I)(e(V,fc),{label:"\u80CC\u666F\u56FE\u7247:",labelPlacement:"left",showFeedback:!1},{default:()=>[e(E,I)(e(V,mc),{value:s.v,"onUpdate:value":g=>s.v=g,onBlur:s.on},null)]}),e(E,I)(e(V,pc),{vertical:!0},null),e(E,I)(e(V,hc),{ghost:!0,size:"small",onClick:x,focusable:!1},{default:()=>[e(E,I)(e(V,dc),null,{default:()=>[e(E,I)(dn,null,null)]})]})]),e(E,I)("div",{class:"un-grid un-grid-cols-2 un-gap-12px un-mt-12px"},[e(E,I)(e(V,uc),{label:"\u5DE6:",labelPlacement:"left",showFeedback:!1},{default:()=>[e(E,I)(e(V,rc),{value:l.v,"onUpdate:value":g=>l.v=g,onBlur:l.on,class:"un-w-120px"},null)]}),e(E,I)(e(V,cc),{label:"\u53F3:",labelPlacement:"left",showFeedback:!1},{default:()=>[e(E,I)(e(V,sc),{value:m.v,"onUpdate:value":g=>m.v=g,onBlur:m.on,class:"un-w-120px"},null)]}),e(E,I)(e(V,ac),{label:"\u4E0A:",labelPlacement:"left",showFeedback:!1},{default:()=>[e(E,I)(e(V,lc),{value:i.v,"onUpdate:value":g=>i.v=g,onBlur:i.on,class:"un-w-120px"},null)]}),e(E,I)(e(V,ic),{label:"\u4E0B:",labelPlacement:"left",showFeedback:!1},{default:()=>[e(E,I)(e(V,oc),{value:o.v,"onUpdate:value":g=>o.v=g,onBlur:o.on,class:"un-w-120px"},null)]})])],trigger:()=>e(E,I)(e(V,nc),{ghost:!0,size:"small",focusable:!1},{default:()=>[e(E,I)(e(V,ec),null,{default:()=>[e(E,I)(dn,null,null)]})]})}),e(E,I)(e(V,tc),{value:k.v,"onUpdate:value":g=>k.v=g,onComplete:h,size:"small",renderLabel:()=>null,class:"un-w-34px"},null),e(E,I)(e(V,Zs),{vertical:!0},null),e(E,I)(e(V,Qs),null,{default:()=>[r(e(E,I)(sn,null,null),"\u6C34\u5E73\u5206\u5E03",()=>{const g=Array.from(t.state.selectElements).filter(p=>!L(p));if(g.length<=2)return;const z=g.map(p=>B(p)?p.x:p.location[0]);ti(g)&&F(t.state,()=>{g.forEach((p,N)=>{B(p)?p.x=z[N]:p.location[0]=z[N]})})}),r(e(E,I)(sn,{style:"transform: rotate(90deg)"},null),"\u5782\u76F4\u5206\u5E03",()=>{const g=Array.from(t.state.selectElements).filter(p=>!L(p));if(g.length<=2)return;const z=g.map(p=>B(p)?p.y:p.location[1]);ei(g)&&F(t.state,()=>{g.forEach((p,N)=>{B(p)?p.y=z[N]:p.location[1]=z[N]})})}),r(e(E,I)(Pt,{style:"transform: rotate(-90deg)"},null),"\u5DE6\u5BF9\u9F50",()=>{if(t.state.selectElements.size<2)return;const g=Array.from(t.state.selectElements).filter(p=>!L(p)),z=Math.min(...g.map(p=>B(p)?p.x:p.location[0]));g.forEach(p=>{if(B(p)){const N=p.x;F(t.state,()=>p.x=N),p.x=z}else if(!L(p)){const N=p.location[0];F(t.state,()=>p.location[0]=N),p.location[0]=z}})}),r(e(E,I)(Pt,{style:"transform: rotate(90deg)"},null),"\u53F3\u5BF9\u9F50",()=>{if(t.state.selectElements.size<2)return;const g=Array.from(t.state.selectElements).filter(p=>!L(p)),z=Math.max(...g.map(p=>B(p)?p.x+p.width:p.location[0]));g.forEach(p=>{if(B(p)){const N=p.x;F(t.state,()=>p.x=N),p.x=z-p.width}else if(!L(p)){const N=p.location[0];F(t.state,()=>p.location[0]=N),p.location[0]=z}})}),r(e(E,I)(Pt,null,null),"\u4E0A\u5BF9\u9F50",()=>{if(t.state.selectElements.size<2)return;const g=Array.from(t.state.selectElements).filter(p=>!L(p)),z=Math.min(...g.map(p=>B(p)?p.y:p.location[1]));g.forEach(p=>{if(B(p)){const N=p.y;F(t.state,()=>p.y=N),p.y=z}else if(!L(p)){const N=p.location[1];F(t.state,()=>p.location[1]=N),p.location[1]=z}})}),r(e(E,I)(Pt,{style:"transform: rotate(180deg)"},null),"\u4E0B\u5BF9\u9F50",()=>{if(t.state.selectElements.size<2)return;const g=Array.from(t.state.selectElements).filter(p=>!L(p)),z=Math.max(...g.map(p=>B(p)?p.y+p.height:p.location[1]));g.forEach(p=>{if(B(p)){const N=p.y;F(t.state,()=>p.y=N),p.y=z-p.height}else if(!L(p)){const N=p.location[1];F(t.state,()=>p.location[1]=N),p.location[1]=z}})})]}),e(E,I)(e(V,Js),{vertical:!0},null),r(e(E,I)(rs,null,null),"\u5206\u7EC4\u6392\u5E8F",async()=>{await t.hack(),t.state.elements=Zo(t.state.elements,"variableKey")}),r(e(E,I)(Ka,null,null),"\u4FDD\u5B58",t.onSave)]),e(E,I)(Xs,{show:b.value,"onUpdate:show":g=>b.value=g,data:w.value},null)])}}),we=await C("@rdx/admin"),Rt=await C("@rdx/shared"),ye=await C("@lowcode-fe/designer/designer"),W=await C("vue"),Ee=await C("naive-ui"),xn="NDrawerContent",gn="NDrawer",lt="createVNode",ke="useDesginer",wn="defineComponent",yn="reactive",En="ref",kn="nextTick",bn="createModalProps",In="useModalLogic",Nn="convertListToMap",Mn="useColors",Cn="preferMessage",Bn=e(W,wn)({props:{meta:{type:Object,required:!0},...e(Rt,bn)()},setup(t){const{pauseShortcut:s,continueShortcut:l}=e(ye,ke)(),m=e(we,Mn)(),i=e(W,yn)({mode:"select",elements:[],location:[0,0],scale:1,stepPace:1,pickup:!0,orthogonal:!0,rollbackStack:[],translateX:0,translateY:0,background:null,color:m.value.primaryColor,canBlur:!0,selectElements:new Set}),o={};e(Rt,In)({props:t,onShow:()=>{s();const z=k(x()).filter(N=>N.metaCode==="slot"),p=t.meta.elements;p?(p.forEach((N,d)=>{N.name=z[d].name,o[N.uid]=z[d]}),i.elements=JSON.parse(JSON.stringify(p))):i.elements=[],dt(i),Qo(i.elements.length?Math.max(...i.elements.map(N=>N.uid)):0)},onClose(){l()}});const{createElement:n,removeChild:a,appendChild:r,getCurElement:x,getChildren:k,insertBefore:h,getParent:u}=e(ye,ke)(),b=()=>{var N;const z=e(Rt,Nn)(i.elements.filter(d=>d.slotIndex!==void 0),"slotIndex",!0),p=k(x()).filter(d=>d.metaCode==="slot");(N=t.meta.elements)==null||N.forEach(d=>{z[d.slotIndex]||a(p[d.slotIndex])}),i.elements.forEach(d=>{if(d.slotIndex===void 0){const c=o[d.uid]=n({metaCode:"slot",name:d.name,preset:{children:[]}});r(c)}}),i.elements.forEach((d,c)=>{d.slotIndex=c,o[d.uid].name=d.name});for(let d=i.elements.length-1;d>=0;d-=1){const c=o[i.elements[d].uid];h(c,k(u(c))[0])}t.meta.elements=JSON.parse(JSON.stringify(i.elements)),e(we,Cn).success("\u4FDD\u5B58\u6210\u529F")};li(i,b);const w=e(W,En)(!0),g=async()=>{w.value=!1,await e(W,kn)(),w.value=!0};return()=>e(W,lt)(e(Ee,gn),{maskClosable:!1,show:t.show,"onUpdate:show":t["onUpdate:show"],style:"width: 100vw;",autoFocus:!1,themeOverrides:{headerPadding:"8px 16px",bodyPadding:"0"},closeOnEsc:!1},{default:()=>[e(W,lt)(e(Ee,xn),{closable:!0,bodyStyle:"background: #f2f4fa;"},{default:()=>[e(W,lt)("div",{class:"un-h-full un-flex"},[e(W,lt)(Ia,{state:i,hack:g},null),w.value?e(W,lt)(kl,{meta:t.meta,state:i},null):null])],header:()=>e(W,lt)(vn,{state:i,meta:t.meta,hack:g,onSave:b},null)})]})}}),zn=await C("@rdx/shared"),Ln=await C("@lowcode-fe/designer/designer"),D=await C("vue"),H=await C("naive-ui"),Vn="NInputNumber",Sn="NFormItem",Dn="NInputNumber",jn="NFormItem",On="NInputNumber",Fn="NFormItem",Hn="NInputNumber",An="NFormItem",Pn="NCollapseItem",Un="NCollapse",Rn="NInput",_n="NFormItem",$n="NIcon",Tn="NButton",Wn="NInputNumber",qn="NFormItem",Kn="NSelect",Yn="NFormItem",Xn="NInputNumber",Gn="NFormItem",Jn="NInputNumber",Qn="NFormItem",Zn="NInputNumber",to="NFormItem",eo="NInputNumber",no="NFormItem",oo="NInput",io="NFormItem",j="createVNode",lo="createTextVNode",ao="useRegisterVar",so="defineComponent",co="useBoolean",po=e(D,so)({props:{meta:{type:Object,required:!0}},setup(t){const s=R(()=>t.meta,"xMin",0),l=R(()=>t.meta,"xMax",1920),m=R(()=>t.meta,"yMin",0),i=R(()=>t.meta,"yMax",1080),o=R(()=>t.meta,"bgImage"),n=R(()=>t.meta,"bgLeft",0),a=R(()=>t.meta,"bgRight",0),r=R(()=>t.meta,"bgTop",0),x=R(()=>t.meta,"bgBottom",0),k=R(()=>t.meta,"dpr",1),h=R(()=>t.meta,"scopeKey","canvas");e(Ln,ao)(w=>{const g=t.meta.scopeKey??"canvas";w("coord",`$g('${g}Coord')`,"\u5750\u6807\u7CFB",!0),w("points",`$g('${g}Graphic').points`,"\u56FE\u5F62\u5750\u6807",!0),w("data",`$g('${g}Graphic').data`,"\u56FE\u5F62\u6570\u636E",!0),w("data",`$g('${g}Graphic').index`,"\u56FE\u5F62\u6570\u636E\u4E0B\u6807",!0)});const{booleanRef:u,setTrue:b}=e(zn,co)();return()=>e(D,j)("div",{class:"un-py-12px"},[e(D,j)("div",{class:"un-px-12px"},[e(D,j)(e(H,io),{label:"\u7EC4\u4EF6\u6807\u8BC6"},{default:()=>[e(D,j)(e(H,oo),{value:h.v,"onUpdate:value":w=>h.v=w,onBlur:h.on},null)]}),e(D,j)("div",{class:"un-grid un-grid-cols-2 un-gap-x-8px"},[e(D,j)(e(H,no),{label:"XMin"},{default:()=>[e(D,j)(e(H,eo),{value:s.v,"onUpdate:value":w=>s.v=w,onBlur:s.on},null)]}),e(D,j)(e(H,to),{label:"XMax"},{default:()=>[e(D,j)(e(H,Zn),{value:l.v,"onUpdate:value":w=>l.v=w,onBlur:l.on},null)]}),e(D,j)(e(H,Qn),{label:"YMin"},{default:()=>[e(D,j)(e(H,Jn),{value:m.v,"onUpdate:value":w=>m.v=w,onBlur:m.on},null)]}),e(D,j)(e(H,Gn),{label:"YMax"},{default:()=>[e(D,j)(e(H,Xn),{value:i.v,"onUpdate:value":w=>i.v=w,onBlur:i.on},null)]}),e(D,j)(e(H,Yn),{label:"\u6E32\u67D3\u5668"},{default:()=>[e(D,j)(e(H,Kn),{defaultValue:"canvas",value:t.meta.renderer,"onUpdate:value":w=>t.meta.renderer=w,options:[{label:"canvas",value:"canvas"},{label:"svg",value:"svg"}]},null)]}),e(D,j)(e(H,qn),{label:"dpr"},{default:()=>[e(D,j)(e(H,Wn),{value:k.v,"onUpdate:value":w=>k.v=w,onBlur:k.on,min:1},null)]})]),e(D,j)(e(H,Tn),{block:!0,size:"small",class:"un-justify-between",iconPlacement:"right",onClick:b},{default:()=>[e(D,lo)("\u7ED8\u5236\u56FE\u5F62")],icon:()=>e(D,j)(e(H,$n),{size:14},{default:()=>[e(D,j)(Eo,null,null)]})}),e(D,j)(e(H,_n),{label:"\u80CC\u666F\u56FE\u7247",showFeedback:!1,class:"un-mt-12px"},{default:()=>[e(D,j)(e(H,Rn),{value:o.v,"onUpdate:value":w=>o.v=w,onBlur:o.on},null)]})]),e(D,j)(e(H,Un),{class:"un-mt-12px"},{default:()=>[e(D,j)(e(H,Pn),{title:"\u8FB9\u8DDD",name:1},{default:()=>[e(D,j)("div",{class:"un-pl-12px un-grid un-grid-cols-2 un-gap-8px"},[e(D,j)(e(H,An),{label:"\u5DE6",showFeedback:!1},{default:()=>[e(D,j)(e(H,Hn),{value:n.v,"onUpdate:value":w=>n.v=w,onBlur:n.on,class:"un-w-120px"},null)]}),e(D,j)(e(H,Fn),{label:"\u53F3",showFeedback:!1},{default:()=>[e(D,j)(e(H,On),{value:a.v,"onUpdate:value":w=>a.v=w,onBlur:a.on,class:"un-w-120px"},null)]}),e(D,j)(e(H,jn),{label:"\u4E0A",showFeedback:!1},{default:()=>[e(D,j)(e(H,Dn),{value:r.v,"onUpdate:value":w=>r.v=w,onBlur:r.on,class:"un-w-120px"},null)]}),e(D,j)(e(H,Sn),{label:"\u4E0B",showFeedback:!1},{default:()=>[e(D,j)(e(H,Vn),{value:x.v,"onUpdate:value":w=>x.v=w,onBlur:x.on,class:"un-w-120px"},null)]})])]})]}),e(D,j)(Bn,{show:u.value,"onUpdate:show":w=>u.value=w,meta:t.meta},null)])}})});export{po as Canvas,Tc as __tla};
