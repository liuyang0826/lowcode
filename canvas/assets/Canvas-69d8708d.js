import{a as e,b as M}from"./federation-shared-1482b2fe.js";import{u as R,__tla as $r}from"./Scoped-92d0b990.js";let ho,Tr=Promise.all([(()=>{try{return $r}catch{}})()]).then(async()=>{const wt=await M("vue"),po="createElementVNode",mo="openBlock",fo="createElementBlock",vo="defineComponent",xo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},go=e(wt,po)("path",{d:"M262.29 192.31a64 64 0 1 0 57.4 57.4a64.13 64.13 0 0 0-57.4-57.4zM416.39 256a154.34 154.34 0 0 1-1.53 20.79l45.21 35.46a10.81 10.81 0 0 1 2.45 13.75l-42.77 74a10.81 10.81 0 0 1-13.14 4.59l-44.9-18.08a16.11 16.11 0 0 0-15.17 1.75A164.48 164.48 0 0 1 325 400.8a15.94 15.94 0 0 0-8.82 12.14l-6.73 47.89a11.08 11.08 0 0 1-10.68 9.17h-85.54a11.11 11.11 0 0 1-10.69-8.87l-6.72-47.82a16.07 16.07 0 0 0-9-12.22a155.3 155.3 0 0 1-21.46-12.57a16 16 0 0 0-15.11-1.71l-44.89 18.07a10.81 10.81 0 0 1-13.14-4.58l-42.77-74a10.8 10.8 0 0 1 2.45-13.75l38.21-30a16.05 16.05 0 0 0 6-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 0 0-6.07-13.94l-38.19-30A10.81 10.81 0 0 1 49.48 186l42.77-74a10.81 10.81 0 0 1 13.14-4.59l44.9 18.08a16.11 16.11 0 0 0 15.17-1.75A164.48 164.48 0 0 1 187 111.2a15.94 15.94 0 0 0 8.82-12.14l6.73-47.89A11.08 11.08 0 0 1 213.23 42h85.54a11.11 11.11 0 0 1 10.69 8.87l6.72 47.82a16.07 16.07 0 0 0 9 12.22a155.3 155.3 0 0 1 21.46 12.57a16 16 0 0 0 15.11 1.71l44.89-18.07a10.81 10.81 0 0 1 13.14 4.58l42.77 74a10.8 10.8 0 0 1-2.45 13.75l-38.21 30a16.05 16.05 0 0 0-6.05 14.08c.33 4.14.55 8.3.55 12.47z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),wo=[go],yo=e(wt,vo)({name:"SettingsOutline",render:function(t,r){return e(wt,mo)(),e(wt,fo)("svg",xo,wo)}});var Eo=typeof global=="object"&&global&&global.Object===Object&&global;const ko=Eo;var bo=typeof self=="object"&&self&&self.Object===Object&&self,Io=ko||bo||Function("return this")();const Ne=Io;var No=Ne.Symbol;const yt=No;var Me=Object.prototype,Mo=Me.hasOwnProperty,Co=Me.toString,ct=yt?yt.toStringTag:void 0;function Bo(t){var r=Mo.call(t,ct),l=t[ct];try{t[ct]=void 0;var m=!0}catch{}var i=Co.call(t);return m&&(r?t[ct]=l:delete t[ct]),i}var zo=Object.prototype,Vo=zo.toString;function Lo(t){return Vo.call(t)}var So="[object Null]",Do="[object Undefined]",Ce=yt?yt.toStringTag:void 0;function Oo(t){return t==null?t===void 0?Do:So:Ce&&Ce in Object(t)?Bo(t):Lo(t)}function jo(t){return t!=null&&typeof t=="object"}var Fo="[object Symbol]";function Ho(t){return typeof t=="symbol"||jo(t)&&Oo(t)==Fo}var Po=/\s/;function Ao(t){for(var r=t.length;r--&&Po.test(t.charAt(r)););return r}var Ro=/^\s+/;function Uo(t){return t&&t.slice(0,Ao(t)+1).replace(Ro,"")}function Zt(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}var Be=0/0,$o=/^[-+]0x[0-9a-f]+$/i,To=/^0b[01]+$/i,Wo=/^0o[0-7]+$/i,qo=parseInt;function ze(t){if(typeof t=="number")return t;if(Ho(t))return Be;if(Zt(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=Zt(r)?r+"":r}if(typeof t!="string")return t===0?t:+t;t=Uo(t);var l=To.test(t);return l||Wo.test(t)?qo(t.slice(2),l?2:8):$o.test(t)?Be:+t}var Yo=function(){return Ne.Date.now()};const _t=Yo;var Xo="Expected a function",Ko=Math.max,Go=Math.min;function Jo(t,r,l){var m,i,o,n,c,a,p=0,y=!1,f=!1,d=!0;if(typeof t!="function")throw new TypeError(Xo);r=ze(r)||0,Zt(l)&&(y=!!l.leading,f="maxWait"in l,o=f?Ko(ze(l.maxWait)||0,r):o,d="trailing"in l?!!l.trailing:d);function E(I){var z=m,P=i;return m=i=void 0,p=I,n=t.apply(P,z),n}function g(I){return p=I,c=setTimeout(s,r),y?E(I):n}function x(I){var z=I-a,P=I-p,U=r-z;return f?Go(U,o-P):U}function B(I){var z=I-a,P=I-p;return a===void 0||z>=r||z<0||f&&P>=o}function s(){var I=_t();if(B(I))return u(I);c=setTimeout(s,x(I))}function u(I){return c=void 0,d&&m?E(I):(m=i=void 0,n)}function h(){c!==void 0&&clearTimeout(c),p=0,m=a=i=c=void 0}function v(){return c===void 0?n:u(_t())}function b(){var I=_t(),z=B(I);if(m=arguments,i=this,a=I,z){if(c===void 0)return g(a);if(f)return clearTimeout(c),c=setTimeout(s,r),E(a)}return c===void 0&&(c=setTimeout(s,r)),n}return b.cancel=h,b.flush=v,b}const Ve=await M("vue"),Le="nextTick",L=t=>(t==null?void 0:t.type)==="line",C=t=>(t==null?void 0:t.type)==="rect",$=t=>(t==null?void 0:t.type)==="point";function N(t,r,l){return Math.abs(r-l)<4/t.scale}function te(t,r,l){t.curElement=r,t.focus=l,t.focusIndex=void 0,t.selectElements=new Set([r])}function ut(t,r="select"){t.mode=r,t.curElement=void 0,t.isDrawing=void 0,t.focus=void 0,t.focusIndex=void 0,t.pointIndex=void 0,t.selectElements=new Set,t.isSelecting=!1}let Se=0;function Z(){return Se+=1}function Qo(t){Se=t}const Et=[];let ee=!1;const j=(t,r)=>{ee||(Et.unshift(r),e(Ve,Le)(()=>{if(!Et.length)return;const l=Et.slice();Et.length=0,t.rollbackStack.push(()=>{l.forEach(m=>m())}),t.rollbackStack.length>100&&t.rollbackStack.shift()}))},ne=t=>{const r=t.rollbackStack.pop();r&&(ee=!0,r(),e(Ve,Le)(()=>ee=!1))},De=["curElement","selectElements","focus","focusIndex","pointIndex","isDrawing","mode","orthogonal","pickup"],at=t=>De.map(r=>t[r]),st=(t,r)=>{De.forEach((l,m)=>{t[l]=r[m]})},Zo=(t,r)=>{const l=[],m=new Map;return t.forEach(i=>{m.has(i[r])||(m.set(i[r],l.length),l.push([])),l[m.get(i[r])].push(i)}),l.flat()},_o=t=>{t.sort((a,p)=>(C(a)?a.x:a.location[0])-(C(p)?p.x:p.location[0]));const r=t.map(a=>C(a)?a.width:0),l=Math.max(...t.map(a=>C(a)?a.x+a.width:a.location[0])),m=Math.min(...t.map(a=>C(a)?a.x:a.location[0])),i=r.reduce((a,p)=>a+p,0),o=l-m-i;if(o<0)return!1;const n=o/(t.length-1);let c=C(t[0])?t[0].x:t[0].location[0];return t.forEach((a,p)=>{C(a)?a.x=c:a.location[0]=c,c+=r[p]+n}),!0},tl=t=>{t.sort((a,p)=>(C(a)?a.y:a.location[1])-(C(p)?p.y:p.location[1]));const r=t.map(a=>C(a)?a.height:0),l=Math.max(...t.map(a=>C(a)?a.y+a.height:a.location[1])),m=Math.min(...t.map(a=>C(a)?a.y:a.location[1])),i=r.reduce((a,p)=>a+p,0),o=l-m-i;if(o<0)return!1;const n=o/(t.length-1);let c=C(t[0])?t[0].y:t[0].location[1];return t.forEach((a,p)=>{C(a)?a.y=c:a.location[1]=c,c+=r[p]+n}),!0},oe=await M("vue"),el="computed",nl="onBeforeMount",ol="onUnmounted";function ll(t,r){const l=e(oe,el)(()=>t.stepPace/t.scale),m=()=>{const s=t.curElement;L(s)&&t.isDrawing?s.points.length>2?(s.points.pop(),t.pointIndex=void 0,t.isDrawing=!1,t.curElement=void 0,t.selectElements=new Set,j(t,()=>{t.mode="line";const[u,h]=t.location;t.selectElements.add(s),t.curElement=s,t.isDrawing=!0,s.points.push([u,h]),t.pointIndex=s.points.length-1})):(t.isDrawing=!1,ne(t)):t.mode="select"},i=()=>{const s=t.curElement;if(t.mode==="select")if(L(s)&&t.pointIndex!==void 0&&s.points.length>2){const u=t.pointIndex,[h]=s.points.splice(u,1);t.pointIndex=void 0,j(t,()=>{s.points.splice(u,0,h),t.pointIndex=u})}else t.selectElements.forEach(u=>{const h=t.elements.findIndex(b=>b===u),v=t.elements[h];t.elements.splice(h,1),j(t,()=>{t.elements.splice(h,0,v)})}),ut(t)},o=()=>{const s=t.focusIndex;if(s===void 0)return;const u=t.curElement;L(u)&&(u.points.splice(s+1,0,[(u.points[s][0]+u.points[s+1][0])/2,(u.points[s][1]+u.points[s+1][1])/2]),j(t,()=>{u.points.splice(s+1,1)}))},n=()=>{const s=t.pointIndex;if(s===void 0)return;const u=t.curElement;if(L(u)&&s!==0&&s!==u.points.length-1){const h=u.points.splice(s+1),v={uid:Z(),name:"\u7EBF\u63D2\u69FD",type:"line",points:[[...u.points.at(-1)],...h.map(I=>[...I])]},b=t.elements.indexOf(u);t.elements.splice(b+1,0,v),j(t,()=>{t.elements.splice(b+1,1),u.points.push(...h)})}},c=()=>{const s=t.pointIndex;if(s===void 0)return;const u=t.curElement;if(L(u)&&s!==0&&s!==u.points.length-1){const h=u.points[s-1],v=u.points[s+1],b=u.points[s],I=l.value*12;h[1]===v[1]?(u.points[s][1]=h[1]-I,u.points.splice(s,0,[b[0]-I*(h[0]<v[0]?1:-1),h[1]]),u.points.splice(s+2,0,[b[0]+I*(h[0]<v[0]?1:-1),v[1]]),t.pointIndex=s+1,j(t,()=>{t.pointIndex=s,u.points.splice(s+2,1),u.points.splice(s,1),u.points[s][1]=h[1]})):h[0]===v[0]&&(u.points[s][0]=h[0]+I,u.points.splice(s,0,[h[0],b[1]-I*(h[1]<v[1]?1:-1)]),u.points.splice(s+2,0,[v[0],b[1]+I*(h[1]<v[1]?1:-1)]),t.pointIndex=s+1,j(t,()=>{t.pointIndex=s,u.points.splice(s+2,1),u.points.splice(s,1),u.points[s][0]=h[0]}))}},a=()=>{t.selectElements=new Set,t.elements.forEach(s=>{t.selectElements.add(s)})},p=Jo(j,600,{leading:!0,trailing:!1}),y=s=>{if(t.focus==="focusLineVertex"){const u=t.curElement.points[t.pointIndex],h=u[1],v=t.location[1];u[1]+=l.value,t.location[1]+=l.value,p(t,()=>{u[1]=h,t.location[1]=v})}else if(t.focus==="focusRectSide"){const u=t.curElement;if(t.focusIndex===0){const h=u.y,v=u.height;u.y+=l.value,u.height-=l.value,p(t,()=>{u.y=h,u.height=v})}else if(t.focusIndex===2){const h=u.height;u.height+=l.value,p(t,()=>u.height=h)}}else t.selectElements.forEach(u=>{if(C(u)){const h=u.y;u.y+=l.value,p(t,()=>u.y=h)}else if(L(u))if(t.selectElements.size===1&&!s.ctrlKey){const h=u.points.slice(t.focusIndex,t.focusIndex+2),v=h.map(b=>b[1]);h.forEach(b=>{b[1]+=l.value}),p(t,()=>{h.forEach((b,I)=>{b[1]=v[I]})})}else{const h=u.points.map(v=>v[1]);u.points.forEach(v=>{v[1]+=l.value}),p(t,()=>{u.points.forEach((v,b)=>{v[1]=h[b]})})}else{const h=u.location[1];u.location[1]+=l.value,p(t,()=>u.location[1]=h)}})},f=s=>{if(t.focus==="focusLineVertex"){const u=t.curElement.points[t.pointIndex],h=u[1],v=t.location[1];u[1]-=l.value,t.location[1]-=l.value,p(t,()=>{u[1]=h,t.location[1]=v})}else if(t.focus==="focusRectSide"){const u=t.curElement;if(t.focusIndex===0){const h=u.y,v=u.height;u.y-=l.value,u.height+=l.value,p(t,()=>{u.y=h,u.height=v})}else if(t.focusIndex===2){const h=u.height;u.height-=l.value,p(t,()=>u.height=h)}}else t.selectElements.forEach(u=>{if(C(u)){const h=u.y;u.y-=l.value,p(t,()=>u.y=h)}else if(L(u))if(t.selectElements.size===1&&!s.ctrlKey){const h=u.points.slice(t.focusIndex,t.focusIndex+2),v=h.map(b=>b[1]);h.forEach(b=>{b[1]-=l.value}),p(t,()=>{h.forEach((b,I)=>{b[1]=v[I]})})}else{const h=u.points.map(v=>v[1]);u.points.forEach(v=>{v[1]-=l.value}),p(t,()=>{u.points.forEach((v,b)=>{v[1]=h[b]})})}else{const h=u.location[1];u.location[1]-=l.value,p(t,()=>u.location[1]=h)}})},d=s=>{if(t.focus==="focusLineVertex"){const u=t.curElement.points[t.pointIndex],h=u[0],v=t.location[0];u[0]+=l.value,t.location[0]+=l.value,p(t,()=>{u[0]=h,t.location[0]=v})}else if(t.focus==="focusRectSide"){const u=t.curElement;if(t.focusIndex===3){const h=u.x,v=u.width;u.x+=l.value,u.width-=l.value,p(t,()=>{u.x=h,u.width=v})}else if(t.focusIndex===1){const h=u.width;u.width+=l.value,p(t,()=>u.width=h)}}else t.selectElements.forEach(u=>{if(C(u)){const h=u.x;u.x+=l.value,p(t,()=>u.x=h)}else if(L(u))if(t.selectElements.size===1&&!s.ctrlKey){const h=u.points.slice(t.focusIndex,t.focusIndex+2),v=h.map(b=>b[0]);h.forEach(b=>{b[0]+=l.value}),p(t,()=>{h.forEach((b,I)=>{b[0]=v[I]})})}else{const h=u.points.map(v=>v[0]);u.points.forEach(v=>{v[0]+=l.value}),p(t,()=>{u.points.forEach((v,b)=>{v[0]=h[b]})})}else{const h=u.location[0];u.location[0]+=l.value,p(t,()=>u.location[0]=h)}})},E=s=>{if(t.focus==="focusLineVertex"){const u=t.curElement.points[t.pointIndex],h=u[0],v=t.location[0];u[0]-=l.value,t.location[0]-=l.value,p(t,()=>{u[0]=h,t.location[0]=v})}else if(t.focus==="focusRectSide"){const u=t.curElement;if(t.focusIndex===3){const h=u.x,v=u.width;u.x-=l.value,u.width+=l.value,p(t,()=>{u.x=h,u.width=v})}else if(t.focusIndex===1){const h=u.width;u.width-=l.value,p(t,()=>u.width=h)}}else t.selectElements.forEach(u=>{if(C(u)){const h=u.x;u.x-=l.value,p(t,()=>u.x=h)}else if(L(u))if(t.selectElements.size===1&&!s.ctrlKey){const h=u.points.slice(t.focusIndex,t.focusIndex+2),v=h.map(b=>b[0]);h.forEach(b=>{b[0]-=l.value}),p(t,()=>{h.forEach((b,I)=>{b[0]=v[I]})})}else{const h=u.points.map(v=>v[0]);u.points.forEach(v=>{v[0]-=l.value}),p(t,()=>{u.points.forEach((v,b)=>{v[0]=h[b]})})}else{const h=u.location[0];u.location[0]-=l.value,p(t,()=>u.location[0]=h)}})},g=s=>{var u,h;((u=document.getSelection())==null?void 0:u.type)!=="Range"&&t.selectElements.size&&(s.preventDefault(),(h=s.clipboardData)==null||h.setData("text/plain",JSON.stringify(Array.from(t.selectElements))))},x=s=>{var b,I;if(["input","textarea"].includes((b=document.activeElement)==null?void 0:b.tagName.toLowerCase()))return;const u=(I=s.clipboardData)==null?void 0:I.getData("text/plain");if(!u)return;s.preventDefault();const h=JSON.parse(u),v=at(t);t.selectElements=new Set,h.forEach(z=>{delete z.slotIndex,L(z)?(z.uid=Z(),z.points=z.points.map(([P,U])=>[P+16/t.scale,U+16/t.scale]),t.elements.push(z),t.selectElements.add(z)):C(z)?(z.uid=Z(),z.x+=16/t.scale,z.y+=16/t.scale,t.elements.push(z),t.selectElements.add(z)):$(z)&&(z.uid=Z(),z.location[0]+=16/t.scale,z.location[0]+=16/t.scale,t.elements.push(z),t.selectElements.add(z))}),j(t,()=>{h.forEach(()=>t.elements.pop()),st(t,v)})},B=async s=>{var h;if(["input","textarea"].includes((h=document.activeElement)==null?void 0:h.tagName.toLowerCase()))return;const{ctrlKey:u}=s;u?s.key==="z"?(s.preventDefault(),ne(t)):s.key==="b"?(s.preventDefault(),o()):s.key==="d"?(s.preventDefault(),n()):s.key==="j"?(s.preventDefault(),c()):s.key==="a"?(s.preventDefault(),a()):s.key==="s"&&(s.preventDefault(),r()):s.key===" "?m():s.key==="F8"?t.orthogonal=!t.orthogonal:s.key==="Delete"&&i(),s.key==="ArrowDown"?y(s):s.key==="ArrowUp"?f(s):s.key==="ArrowRight"?d(s):s.key==="ArrowLeft"&&E(s)};e(oe,nl)(()=>{document.addEventListener("keydown",B),document.addEventListener("copy",g),document.addEventListener("paste",x)}),e(oe,ol)(()=>{document.removeEventListener("keydown",B),document.removeEventListener("copy",g),document.removeEventListener("paste",x)})}const il=await M("zrender"),Oe=await M("@rdx/shared"),kt=await M("vue"),al="createVNode",sl="Graphic",rl="Polyline",cl="defineComponent",ul="computed",dl="inject",hl="useCoordinateInst",pl=e(kt,cl)({props:{x:Number,y:Number},setup(t){const r=e(Oe,hl)(),l=e(kt,ul)(()=>{const i=r.value;if(!i)return;const o=t.x?[[i.coordX(t.x),0],[i.coordX(t.x),i.top+i.height]]:[[0,i.coordY(t.y)],[i.left+i.width,i.coordY(t.y)]];return{points:i?o.map(n=>n.map(c=>Math.floor(c)+.5)):[]}}),m=e(kt,dl)("state");return()=>e(kt,al)(e(Oe,sl),{graphic:e(il,rl),shape:l.value,style:{lineDash:[4,8],stroke:m.color},silent:!0},null)}}),ml=await M("zrender"),je=await M("@rdx/shared"),dt=await M("vue"),fl="createVNode",vl="Graphic",xl="Polyline",gl="defineComponent",wl="inject",Fe="computed",yl="useCoordinateInst",El=e(dt,gl)({props:{item:{type:Object,required:!0}},setup(t){const r=e(je,yl)(),l=e(dt,wl)("state"),m=e(dt,Fe)(()=>{const o=r.value;if(!o)return[];const{x:n,y:c,width:a,height:p}=t.item;return[[n,c],[n+a,c],[n+a,c+p],[n,c+p]].map(y=>o.coord(y).map(f=>Math.floor(f)+.5))}),i=e(dt,Fe)(()=>({points:m.value.concat([m.value[0]])}));return()=>e(dt,fl)(e(je,vl),{graphic:e(ml,xl),shape:i.value,style:{stroke:t.item.color||l.color,lineWidth:1,lineDash:"dashed"},z:100,silent:!0},null)}});function kl({x:t,y:r,state:l}){const m=l.elements,i=l.curElement;let o,n;for(let c=0;c<m.length&&!(o!==void 0&&n!==void 0);c+=1){const a=m[c];if(!l.selectElements.has(a)){if(C(a))N(l,a.x,t)?o=a.x:N(l,a.x,t+i.width/2)?o=a.x-i.width/2:N(l,a.x,t+i.width)?o=a.x-i.width:N(l,a.x+a.width/2,t)?o=a.x+a.width/2:N(l,a.x+a.width/2,t+i.width/2)?o=a.x+a.width/2-i.width/2:N(l,a.x+a.width/2,t+i.width)?o=a.x+a.width/2-i.width:N(l,a.x+a.width,t)?o=a.x+a.width:N(l,a.x+a.width,t+i.width/2)?o=a.x+a.width-i.width/2:N(l,a.x+a.width,t+i.width)&&(o=a.x+a.width-i.width),N(l,a.y,r)?n=a.y:N(l,a.y,r+i.height/2)?n=a.y-i.height/2:N(l,a.y,r+i.height)?n=a.y-i.height:N(l,a.y+a.height/2,r)?n=a.y+a.height/2:N(l,a.y+a.height/2,r+i.height/2)?n=a.y+a.height/2-i.height/2:N(l,a.y+a.height/2,r+i.height)?n=a.y+a.height/2-i.height:N(l,a.y+a.height,r)?n=a.y+a.height:N(l,a.y+a.height,r+i.height/2)?n=a.y+a.height-i.height/2:N(l,a.y+a.height,r+i.height)&&(n=a.y+a.height-i.height);else if(L(a))for(let p=0;p<a.points.length&&!(o!==void 0&&n!==void 0);p+=1){const y=a.points[p];N(l,y[0],t)?o=y[0]:N(l,y[0],t+i.width/2)?o=y[0]-i.width/2:N(l,y[0],t+i.width)&&(o=y[0]-i.width),N(l,y[1],r)?n=y[1]:N(l,y[1],r+i.height/2)?n=y[1]-i.height/2:N(l,y[1],r+i.height)&&(n=y[1]-i.height)}else if($(a)){const p=a.location;N(l,p[0],t)?o=p[0]:N(l,p[0],t+i.width/2)?o=p[0]-i.width/2:N(l,p[0],t+i.width)&&(o=p[0]-i.width),N(l,p[1],r)?n=p[1]:N(l,p[1],r+i.height/2)?n=p[1]-i.height/2:N(l,p[1],r+i.height)&&(n=p[1]-i.height)}}}return[o??t,n??r]}const bl=await M("vue"),Il="inject";function le(t){const r=e(bl,Il)("state");let l=!1;return{handleClick:(m,i)=>{if(m.event.stopPropagation(),r.focusIndex=void 0,r.pointIndex=void 0,r.focus=void 0,l||r.mode!=="select")return;const o=t();r.focusIndex=i,r.pointIndex=void 0,r.focus=void 0,m.event.ctrlKey||(r.selectElements=new Set),r.selectElements.has(o)?r.selectElements.delete(o):r.selectElements.add(o),r.curElement=o},handleMousedown:(m,i)=>{m.event.stopPropagation(),l=!1;const o=t();if(r.focusIndex=void 0,r.pointIndex=void 0,r.focus=void 0,r.mode!=="select"||!r.selectElements.has(o))return;r.focusIndex=i,r.pointIndex=void 0,r.curElement=o,r.isDrawing=!0;const n=Array.from(r.selectElements),c=C(o)?o.x-r.location[0]:0,a=C(o)?o.y-r.location[1]:0,p=L(o)?o.points[0][0]-r.location[0]:0,y=L(o)?o.points[0][1]-r.location[1]:0,f=r.curElement,[d,E]=$(f)?[...f.location]:C(f)?[f.x,f.y]:[...f.points[0]],g=n.map(s=>$(s)?{...s,location:[...s.location]}:C(s)?{...s}:{...s,points:s.points.map(u=>[...u])}),x=()=>{l=!0,r.canBlur=!1;let s=0,u=0;if(C(f)){if(r.pickup){const[h,v]=kl({x:r.location[0]+c,y:r.location[1]+a,state:r});f.x=h,f.y=v}else f.x=r.location[0]+c,f.y=r.location[1]+a;s=f.x-d,u=f.y-E}else L(f)?(s=r.location[0]-d+p,u=r.location[1]-E+y):(s=r.location[0]-d,u=r.location[1]-E);n.forEach((h,v)=>{const b=h.location;if(C(h)){if(m.event.ctrlKey&&r.selectElements.size>1&&L(f))return;h!==r.curElement&&(h.x=g[v].x+s,h.y=g[v].y+u)}else if($(h)){if(m.event.ctrlKey&&r.selectElements.size>1&&L(f))return;b[0]=g[v].location[0]+s,b[1]=g[v].location[1]+u}else if(r.selectElements.size===1&&!m.event.ctrlKey)for(let I=r.focusIndex;I<r.focusIndex+2;I+=1){const z=h.points[I];z[0]=g[v].points[I][0]+s,z[1]=g[v].points[I][1]+u}else h.points.forEach((I,z)=>{I[0]=g[v].points[z][0]+s,I[1]=g[v].points[z][1]+u})})},B=()=>{document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",B),r.isDrawing=!1,l&&j(r,()=>{n.forEach((s,u)=>{$(s)?(s.location[0]=g[u].location[0],s.location[1]=g[u].location[1]):C(s)?(s.x=g[u].x,s.y=g[u].y):s.points.forEach((h,v)=>{h[0]=g[u].points[v][0],h[1]=g[u].points[v][1]})})})};document.addEventListener("mousemove",x),document.addEventListener("mouseup",B)}}}const ie=await M("zrender"),bt=await M("@rdx/shared"),K=await M("vue"),He="Fragment",ht="createVNode",ae="Graphic",Pe="Circle",Nl="Polyline",Ml="defineComponent",Cl="inject",Bl="computed",zl="useCoordinateInst",Vl=e(K,Ml)({props:{item:{type:Object,required:!0},index:{type:Number,required:!0}},setup(t){const r=e(bt,zl)(),l=e(K,Cl)("state"),m=e(K,Bl)(()=>{const a=r.value;return a?t.item.points.map(p=>a.coord(p).map(y=>Math.floor(y)+.5)):[]}),{handleClick:i,handleMousedown:o}=le(()=>t.item);let n=!1;const c=(a,p)=>{if(l.selectElements.size>1){o(a,p);return}n=!1,a.event.stopPropagation(),te(l,t.item,"focusLineVertex"),l.focusIndex=void 0,l.pointIndex=p,l.isDrawing=!0;const y=l.curElement.points[l.pointIndex],[f,d]=y,E=()=>{n=!0,l.canBlur=!1,y[0]=l.location[0],y[1]=l.location[1]},g=()=>{l.isDrawing=!1,document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",g),n&&j(l,()=>{y[0]=f,y[1]=d})};document.addEventListener("mousemove",E),document.addEventListener("mouseup",g)};return()=>{var p;const a=l.selectElements.has(t.item);return e(K,ht)(e(K,He),null,[m.value.map((y,f,d)=>f!==d.length-1?e(K,ht)(e(bt,ae),{key:f,graphic:e(ie,Nl),shape:{points:[y,d[f+1]]},style:{stroke:a&&l.focusIndex===f&&l.selectElements.size===1?"#f00":t.item.color||l.color},cursor:a&&l.mode!=="line"?"move":"pointer",onmousedown:E=>o(E,f),onclick:E=>i(E,f),z:a?10:void 0,silent:l.mode!=="select"},null):null),(p=m.value)==null?void 0:p.map((y,f,{length:d})=>a?e(K,ht)(e(K,He),null,[e(K,ht)(e(bt,ae),{key:`point-${f}`,graphic:e(ie,Pe),shape:{cx:y[0],cy:y[1],r:3},style:{fill:f===0?"#f00":f===d-1?"#0f0":t.item.color||l.color},cursor:a&&l.mode!=="line"?"move":"pointer",onmousedown:E=>c(E,f),onclick:E=>{l.isDrawing||E.event.stopPropagation()},z:a?f===0?101:100:10,silent:l.mode!=="select"},null),l.pointIndex===f&&l.mode==="select"?e(K,ht)(e(bt,ae),{graphic:e(ie,Pe),shape:{cx:y[0],cy:y[1],r:6},style:{stroke:t.item.color||l.color,fill:"none"},cursor:"move",onmousedown:E=>c(E,f),z:a?100:10,silent:!0},null):null]):null)])}}}),Ae=await M("zrender"),se=await M("@rdx/shared"),_=await M("vue"),Ll="Fragment",re="createVNode",Re="Graphic",Ue="Circle",Sl="defineComponent",Dl="inject",$e="computed",Ol="useCoordinateInst",jl=e(_,Sl)({props:{item:{type:Object,required:!0},index:{type:Number,required:!0}},setup(t){const r=e(se,Ol)(),l=e(_,Dl)("state"),m=e(_,$e)(()=>{const c=r.value;if(c)return{cx:~~c.coordX(t.item.location[0])+.5,cy:~~c.coordY(t.item.location[1])+.5,r:4}}),i=e(_,$e)(()=>{const c=m.value;if(c)return{...c,r:8}}),{handleClick:o,handleMousedown:n}=le(()=>t.item);return()=>{const c=l.selectElements.has(t.item);return e(_,re)(e(_,Ll),null,[e(_,re)(e(se,Re),{graphic:e(Ae,Ue),shape:m.value,style:{fill:t.item.color||l.color},cursor:c&&l.mode!=="line"?"move":"pointer",onmousedown:n,onclick:o,z:c?100:10,silent:l.mode!=="select"},null),c?e(_,re)(e(se,Re),{graphic:e(Ae,Ue),shape:i.value,style:{stroke:t.item.color||l.color,fill:"none"},cursor:c&&l.mode!=="line"?"move":"pointer",onmousedown:n,z:c?100:10,silent:!0},null):null])}}}),It=await M("@rdx/shared"),Nt="isEqual";function Fl({x:t,y:r,width:l,height:m,state:i}){let o,n,c,a;const p=i.elements,y=i.focusIndex,f=i.curElement;return y===0?(p.forEach(d=>{if(C(d)){if(e(It,Nt)(f,d,!0))return;N(i,d.y,f.y)?n=d.y:N(i,d.y+d.height,f.y)&&(n=d.y+d.height)}}),n!==void 0&&(a=m+r-n)):y===1?p.forEach(d=>{if(C(d)){if(e(It,Nt)(f,d,!0))return;N(i,d.x,f.x+f.width)?c=d.x-f.x:N(i,d.x+d.width,f.x+f.width)&&(c=d.x+d.width-f.x)}}):y===2?p.forEach(d=>{if(C(d)){if(e(It,Nt)(f,d,!0))return;N(i,d.y,f.y+f.height)?a=d.y-f.y:N(i,d.y+d.height,f.y+f.height)&&(a=d.y+d.height-f.y)}}):y===3&&(p.forEach(d=>{if(C(d)){if(e(It,Nt)(f,d,!0))return;N(i,d.x,f.x)?o=d.x:N(i,d.x+d.width,f.x)&&(o=d.x+d.width)}}),o!==void 0&&(c=l+t-o)),c!==void 0&&(c=Math.max(c,0)),a!==void 0&&(a=Math.max(a,0)),[o,n,c,a]}const Mt=await M("@rdx/shared"),Ct="isEqual";function Hl({x:t,y:r,width:l,height:m,state:i}){let o,n,c,a;const p=i.elements,y=i.focusIndex,f=i.curElement;return y===0?(p.forEach(d=>{if(C(d)){if(e(Mt,Ct)(f,d))return;N(i,d.x,f.x)?o=d.x:N(i,d.x+d.width,f.x)&&(o=d.x+d.width),N(i,d.y,f.y)?n=d.y:N(i,d.y+d.height,f.y)&&(n=d.y+d.height)}}),o!==void 0&&(c=l+t-o),n!==void 0&&(a=m+r-n)):y===1?(p.forEach(d=>{if(C(d)){if(e(Mt,Ct)(f,d,!0))return;N(i,d.x,f.x+f.width)?c=d.x-f.x:N(i,d.x+d.width,f.x+f.width)&&(c=d.x+d.width-f.x),N(i,d.y,f.y)?n=d.y:N(i,d.y+d.height,f.y)&&(n=d.y+d.height)}}),n!==void 0&&(a=m+r-n)):y===2?p.forEach(d=>{if(C(d)){if(e(Mt,Ct)(f,d,!0))return;N(i,d.x,f.x+f.width)?c=d.x-f.x:N(i,d.x+d.width,f.x+f.width)&&(c=d.x+d.width-f.x),N(i,d.y,f.y+f.height)?a=d.y-f.y:N(i,d.y+d.height,f.y+f.height)&&(a=d.y+d.height-f.y)}}):y===3&&(p.forEach(d=>{if(C(d)){if(e(Mt,Ct)(f,d,!0))return;N(i,d.x,f.x)?o=d.x:N(i,d.x+d.width,f.x)&&(o=d.x+d.width),N(i,d.y,f.y+f.height)?a=d.y-f.y:N(i,d.y+d.height,f.y+f.height)&&(a=d.y+d.height-f.y)}}),o!==void 0&&(c=l+t-o)),c!==void 0&&(c=Math.max(c,0)),a!==void 0&&(a=Math.max(a,0)),[o,n,c,a]}const ce=await M("zrender"),Bt=await M("@rdx/shared"),Q=await M("vue"),Pl="Fragment",zt="createVNode",ue="Graphic",Al="Circle",Te="Polyline",Rl="defineComponent",Ul="inject",We="computed",$l="useCoordinateInst",Tl=e(Q,Rl)({props:{item:{type:Object,required:!0},index:{type:Number,required:!0}},setup(t){const r=e(Bt,$l)(),l=e(Q,Ul)("state"),m=e(Q,We)(()=>{const f=r.value;if(!f)return[];const{x:d,y:E,width:g,height:x}=t.item;return[[d,E],[d+g,E],[d+g,E+x],[d,E+x]].map(B=>f.coord(B).map(s=>Math.floor(s)+.5))}),i=e(Q,We)(()=>({points:m.value.concat([m.value[0]])})),{handleClick:o,handleMousedown:n}=le(()=>t.item),c=(f,d)=>{l.isDrawing||f.event.stopPropagation(),te(l,t.item,"focusRectVertex"),l.focusIndex=d,l.isDrawing=!0;const{x:E,y:g,width:x,height:B}=t.item,s=()=>{l.canBlur=!1;const h=t.item,{x:v,y:b,width:I,height:z}=h;if(d===0?(h.x=l.location[0],h.y=l.location[1],h.width+=v-h.x,h.height+=b-h.y):d===1?(h.width=l.location[0]-v,h.y=l.location[1],h.height+=b-h.y):d===2?(h.width=l.location[0]-h.x,h.height=l.location[1]-h.y):d===3&&(h.x=l.location[0],h.height=l.location[1]-h.y,h.width+=v-h.x),h.width=Math.max(h.width,0),h.height=Math.max(h.height,0),l.pickup){const P=Hl({x:v,y:b,width:I,height:z,state:l});P[0]!==void 0&&(t.item.x=P[0]),P[1]!==void 0&&(t.item.y=P[1]),P[2]!==void 0&&(t.item.width=P[2]),P[3]!==void 0&&(t.item.height=P[3])}},u=()=>{l.isDrawing=!1,document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",u),j(l,()=>{t.item.x=E,t.item.y=g,t.item.width=x,t.item.height=B})};document.addEventListener("mousemove",s),document.addEventListener("mouseup",u)},a=(f,d)=>{l.isDrawing||f.event.stopPropagation();const E=t.item;if(l.curElement!==E)return;te(l,E,"focusRectSide"),l.focusIndex=d,l.isDrawing=!0;const{x:g,y:x,width:B,height:s}=t.item,u=()=>{l.canBlur=!1;const v=t.item,{x:b,y:I,width:z,height:P}=v;if(d===0?(v.y=l.location[1],v.height+=I-v.y):d===1?v.width=l.location[0]-b:d===2?v.height=l.location[1]-I:d===3&&(v.x=l.location[0],v.width+=b-v.x),v.width=Math.max(v.width,0),v.height=Math.max(v.height,0),l.pickup){const U=Fl({x:b,y:I,width:z,height:P,state:l});U[0]!==void 0&&(t.item.x=U[0]),U[1]!==void 0&&(t.item.y=U[1]),U[2]!==void 0&&(t.item.width=U[2]),U[3]!==void 0&&(t.item.height=U[3])}},h=()=>{l.isDrawing=!1,document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",h),j(l,()=>{t.item.x=g,t.item.y=x,t.item.width=B,t.item.height=s})};document.addEventListener("mousemove",u),document.addEventListener("mouseup",h)},p=["n-resize","e-resize","s-resize","w-resize"],y=["nw-resize","ne-resize","se-resize","sw-resize"];return()=>{const f=l.selectElements.has(t.item);return e(Q,zt)(e(Q,Pl),null,[e(Q,zt)(e(Bt,ue),{graphic:e(ce,Te),shape:i.value,style:{stroke:"none",fill:"transparent"},cursor:f?"move":"pointer",onmousedown:n,onclick:o,z:f?10:void 0,silent:l.mode!=="select"},null),m.value.map((d,E,g)=>e(Q,zt)(e(Bt,ue),{key:E,graphic:e(ce,Te),shape:{points:[d,g[(E+1)%g.length]]},style:{stroke:t.item.color||l.color,lineWidth:1},cursor:f?p[E]:"pointer",onmousedown:x=>a(x,E),onclick:x=>x.event.stopPropagation(),z:f?10:void 0,silent:l.mode!=="select"},null)),m.value.map((d,E)=>f?e(Q,zt)(e(Bt,ue),{key:E,graphic:e(ce,Al),shape:{cx:d[0],cy:d[1],r:3},style:{fill:t.item.color||l.color},onmousedown:g=>c(g,E),onclick:g=>g.event.stopPropagation(),cursor:f?y[E]:"pointer",z:f?10:void 0,silent:l.mode!=="select"},null):null)])}}}),Wl=await M("@rdx/shared"),ql="isEqual";function Yl(t){const r=new Set,l=new Set,m=t.elements,i=(o,n)=>{for(let c=0;c<n[0].length;c+=1)if(o[0]===n[0][c]){r.add(n[0][c]);break}for(let c=0;c<n[1].length;c+=1)if(o[1]===n[1][c]){l.add(n[1][c]);break}};if(t.focus==="focusRectSide"){const o=t.curElement;if(!o)return[];m.forEach(n=>{if(C(n)){if(n.uid===o.uid)return;t.focusIndex===0?i([o.x,o.y],[[],[n.y,n.y+n.height/2,n.y+n.height]]):t.focusIndex===1?i([o.x+o.width,o.y],[[n.x,n.x+n.width/2,n.x+n.width],[]]):t.focusIndex===2?i([o.x,o.y+o.height],[[],[n.y,n.y+n.height/2,n.y+n.height]]):t.focusIndex===3&&i([o.x,o.y],[[n.x,n.x+n.width/2,n.x+n.width],[]])}else L(n)?t.focusIndex===0?n.points.forEach(c=>{i(c,[[],[o.y]])}):t.focusIndex===1?n.points.forEach(c=>{i(c,[[o.x+o.width],[]])}):t.focusIndex===2?n.points.forEach(c=>{i(c,[[],[o.y+o.height]])}):t.focusIndex===3&&n.points.forEach(c=>{i(c,[[o.x],[]])}):$(n)&&(t.focusIndex===0?i(n.location,[[],[o.y]]):t.focusIndex===1?i(n.location,[[o.x+o.width],[]]):t.focusIndex===2?i(n.location,[[],[o.y+o.height]]):t.focusIndex===3&&i(n.location,[[o.x],[]]))})}else if(t.focus==="focusRectVertex"){const o=t.curElement;if(!o)return[];m.forEach(n=>{if(C(n)){if(n.uid===o.uid)return;t.focusIndex===0?i([o.x,o.y],[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]]):t.focusIndex===1?i([o.x+o.width,o.y],[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]]):t.focusIndex===2?i([o.x+o.width,o.y+o.height],[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]]):t.focusIndex===3&&i([o.x,o.y+o.height],[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]])}else L(n)?t.focusIndex===0?n.points.forEach(c=>{i(c,[[o.x],[o.y]])}):t.focusIndex===1?n.points.forEach(c=>{i(c,[[o.x+o.width],[o.y]])}):t.focusIndex===2?n.points.forEach(c=>{i(c,[[o.x+o.width],[o.y+o.height]])}):t.focusIndex===3&&n.points.forEach(c=>{i(c,[[o.x],[o.y+o.height]])}):$(n)&&(t.focusIndex===0?i(n.location,[[o.x],[o.y]]):t.focusIndex===1?i(n.location,[[o.x+o.width],[o.y]]):t.focusIndex===2?i(n.location,[[o.x+o.width],[o.y+o.height]]):t.focusIndex===3&&i(n.location,[[o.x],[o.y+o.height]]))})}else if(t.focus==="focusLineVertex"){const o=t.curElement;if(!o)return[];const n=o.points[t.pointIndex];m.forEach(c=>{C(c)?i(n,[[c.x,c.x+c.width/2,c.x+c.width],[c.y,c.y+c.height/2,c.y+c.height]]):L(c)?c.uid===o.uid?c.points.forEach(a=>{e(Wl,ql)(n,a,!0)||i(n,a.map(p=>[p]))}):c.points.forEach(a=>{i(n,a.map(p=>[p]))}):$(c)&&i(n,c.location.map(a=>[a]))})}else if($(t.curElement)){const o=t.curElement;m.forEach(n=>{t.selectElements.has(n)||($(n)?i(o.location,n.location.map(c=>[c])):L(n)?i(o.location,n.points.reduce((c,a)=>(c[0].push(a[0]),c[1].push(a[1]),c),[[],[]])):C(n)&&i(o.location,[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]]))})}else if(C(t.curElement)){const o=t.curElement;if(!o)return[];m.forEach(n=>{t.selectElements.has(n)||(C(n)?(i([o.x,o.y],[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]]),i([o.x+o.width/2,o.y+o.height/2],[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]]),i([o.x+o.width,o.y+o.height],[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]])):L(n)?(i([o.x,o.y],[n.points.map(c=>c[0]),n.points.map(c=>c[1])]),i([o.x+o.width/2,o.y+o.height/2],[n.points.map(c=>c[0]),n.points.map(c=>c[1])]),i([o.x+o.width,o.y+o.height],[n.points.map(c=>c[0]),n.points.map(c=>c[1])])):$(n)&&(i([o.x,o.y],[[n.location[0]],[n.location[1]]]),i([o.x+o.width/2,o.y+o.height/2],[[n.location[0]],[n.location[1]]]),i([o.x+o.width,o.y+o.height],[[n.location[0]],[n.location[1]]])))})}else if(t.mode!=="select"){const o=t.location;m.forEach(n=>{var c,a;if(L(n))t.mode==="line"&&n.uid===((c=t.curElement)==null?void 0:c.uid)?(n.points.forEach((p,y,{length:f})=>{y!==f-1&&i(o,[[p[0]],[]])}),n.points.forEach((p,y,{length:f})=>{y!==f-1&&i(o,[[],[p[1]]])})):(n.points.forEach(p=>{i(o,[[p[0]],[]])}),n.points.forEach(p=>{i(o,[[],[p[1]]])}));else if(C(n)){if(t.mode==="rect"&&n.uid===((a=t.curElement)==null?void 0:a.uid))return;i(o,[[n.x,n.x+n.width/2,n.x+n.width],[n.y,n.y+n.height/2,n.y+n.height]])}else $(n)&&i(o,n.location.map(p=>[p]))})}return[Array.from(r).map(o=>({x:o})),Array.from(l).map(o=>({y:o}))].flat()}const qe=await M("vue"),Xl="ref",Kl="watch";function Gl(t){const r=e(qe,Xl)([]);return e(qe,Kl)(t,()=>{t.mode!=="select"||t.isDrawing&&t.pickup&&(t.mode!=="select"||!L(t.curElement)||t.pointIndex!==void 0)?r.value=Yl(t):r.value=[]},{deep:!0}),r}function Jl(t){return()=>{t.canBlur&&(t.curElement||t.selectElements.size)&&ut(t),t.canBlur=!0}}const de=await M("vue"),Ql=await M("@rdx/shared"),Zl="useResizeObserver",_l="watchEffect",ti="onBeforeMount",ei="onUnmounted";function ni(t,r,l){e(Ql,Zl)(()=>l.value,n=>{r.bounding={width:n.clientWidth,height:n.clientHeight}},{immediate:!0});const m=[1,10,.05];e(de,_l)(()=>{if(!r.bounding)return;const n=r.bounding.width,c=r.bounding.height,a=(t.xMax??1920)-(t.xMin??0),p=(t.yMax??1080)-(t.yMin??0),y=a/p>n/c?n/a:c/p;r.scale=y,r.translateX=(n-a*y)/2,r.translateY=(c-p*y)/2,m[0]=y/2,m[1]=y*3,m[3]=y*.05});const i=n=>{if(n.button!==2)return;const c=p=>{r.translateX+=p.clientX-n.clientX,r.translateY+=p.clientY-n.clientY,n=p},a=()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",c),document.addEventListener("mouseup",a)},o=n=>{n.preventDefault(),r.scale-=n.deltaY/Math.abs(n.deltaY)*m[3],r.scale=Math.min(Math.max(r.scale,m[0]),m[1])};return e(de,ti)(()=>{document.addEventListener("mousedown",i)}),e(de,ei)(()=>{document.removeEventListener("mousedown",i)}),o}const oi=await M("vue"),li="watch";function ii(t){const r=()=>{if(t.mode!=="line")return;const[l,m]=t.location;let i=t.curElement;if(i){const o=at(t);t.canBlur=!1,i.points.push([l,m]),t.pointIndex=i.points.length-1,j(t,()=>{i.points.pop(),st(t,o)})}else{const o=at(t);t.canBlur=!1,i={uid:Z(),name:"\u7EBF\u63D2\u69FD",type:t.mode,points:[[l,m],[l,m]]},t.elements.push(i),t.curElement=i,t.selectElements.add(i),t.isDrawing=!0,t.pointIndex=i.points.length-1,j(t,()=>{t.elements.pop(),st(t,o)})}};return e(oi,li)(()=>t.location,([l,m])=>{var o;if(t.mode!=="line")return;const i=(o=t.curElement)==null?void 0:o.points[t.pointIndex];i&&(i[0]=l,i[1]=m)}),r}function ai(t){return()=>{if(t.mode!=="point")return;const r=at(t),[l,m]=t.location,i={uid:Z(),name:"\u70B9\u63D2\u69FD",type:t.mode,location:[l,m]};t.elements.push(i),j(t,()=>{t.elements.pop(),st(t,r)})}}const si=await M("vue"),ri="watch";function ci(t){const r=l=>{if(l.button!==0||t.mode!=="rect"&&t.mode!=="select")return;const[m,i]=t.location;if(t.mode==="rect"){const n=at(t),c={uid:Z(),name:"\u6846\u63D2\u69FD",type:"rect",x:m,y:i,width:0,height:0};t.elements.push(c),t.curElement=c,t.selectElements.add(c),t.isDrawing=!0,j(t,()=>{t.elements.pop(),st(t,n)})}else{t.isSelecting=!0;const n={uid:Z(),name:"\u6846\u63D2\u69FD",type:"rect",x:m,y:i,width:0,height:0};t.curElement=n}const o=()=>{t.isDrawing=!1,document.removeEventListener("mouseup",o);const n=t.curElement;if(!t.isSelecting)n.width===0||n.height===0?ne(t):(t.canBlur=!1,ut(t,"rect"));else if(t.isSelecting=!1,!(n.width===0||n.height===0)){t.selectElements=new Set;const c=t.location,a=Math.min(m,c[0]),p=Math.max(m,c[0]),y=Math.min(i,c[1]),f=Math.max(i,c[1]);t.elements.forEach(d=>{$(d)?d.location[0]>=a&&d.location[0]<=p&&d.location[1]>=y&&d.location[1]<=f&&t.selectElements.add(d):C(d)?d.x>=a&&d.y>=y&&d.x+d.width<=p&&d.y+d.height<=f&&t.selectElements.add(d):L(d)&&d.points.every(E=>E[0]>=a&&E[0]<=p&&E[1]>=y&&E[1]<=f)&&t.selectElements.add(d)}),t.canBlur=!1,t.curElement=void 0,t.focusIndex=void 0,t.pointIndex=void 0}};document.addEventListener("mouseup",o)};return e(si,ri)(()=>t.location,([l,m])=>{if((t.mode!=="rect"||!t.isDrawing)&&!t.isSelecting)return;const i=t.curElement;C(i)&&(i.width=l-i.x,i.height=m-i.y)}),r}function ui({x:t,y:r,state:l}){let m,i;const o=l.elements;for(let n=0;n<o.length&&!(m!==void 0&&i!==void 0);n+=1){const c=o[n];if(L(c))for(let a=0;a<c.points.length&&!(m!==void 0&&i!==void 0);a+=1){if(l.selectElements.has(c)&&(l.selectElements.size===1&&a===l.pointIndex||l.pointIndex===void 0))continue;const p=c.points[a];m===void 0&&N(l,p[0],t)&&(m=p[0]),i===void 0&&N(l,p[1],r)&&(i=p[1])}else if(C(c)){if(l.selectElements.has(c))continue;m===void 0&&(N(l,c.x,t)?m=c.x:N(l,c.x+c.width,t)?m=c.x+c.width:N(l,c.x+c.width/2,t)&&(m=c.x+c.width/2)),i===void 0&&(N(l,c.y,r)?i=c.y:N(l,c.y+c.height/2,r)?i=c.y+c.height/2:N(l,c.y+c.height,r)&&(i=c.y+c.height))}else if($(c)){if(l.selectElements.has(c))continue;m===void 0&&N(l,c.location[0],t)&&(m=c.location[0]),i===void 0&&N(l,c.location[1],r)&&(i=c.location[1])}}return[m??t,i??r]}const Ye=await M("vue"),di="onBeforeMount",hi="onUnmounted";function pi(t,r,l){const m=i=>{if(!l.value)return;const{left:o=0,top:n=0,width:c,height:a}=l.value.getBoundingClientRect()??{},{xMin:p=0,xMax:y=1920,yMin:f=0,yMax:d=1080}=t;let E=p+(i.clientX-o)*(y-p)/c,g=f+(i.clientY-n)*(d-f)/a;const x=r.curElement;if(r.orthogonal&&r.mode==="line"&&r.isDrawing&&L(x)){const B=x.points.at(-1),s=x.points.at(-2);if(B&&s){const u=E-s[0],h=g-s[1];Math.abs(u)>Math.abs(h)?g=s[1]:E=s[0]}}r.pickup&&(r.mode!=="select"||!L(r.curElement)||r.pointIndex!==void 0)?r.location=ui({x:E,y:g,state:r}):r.location=[E,g]};return e(Ye,di)(()=>{document.addEventListener("mousemove",m)}),e(Ye,hi)(()=>{document.removeEventListener("mousemove",m)}),l}const Xe=await M("@rdx/shared"),W=await M("vue"),tt="createVNode",mi="mergeProps",fi="GraphicContainer",vi="defineComponent",xi="ref",gi="provide",wi="computed",yi="useCoordinateLogic",Ei=e(W,vi)({props:{meta:{type:Object,required:!0},state:{type:Object,required:!0}},setup(t){const r=e(W,xi)(null);e(W,gi)("state",t.state);const{coordinateRef:l,rootRef:m}=e(Xe,yi)({xAxis:{get min(){return t.meta.xMin??0},get max(){return t.meta.xMax??1920}},yAxis:{get min(){return t.meta.yMin??0},get max(){return t.meta.yMax??1080}}},{get clientWidth(){return((t.meta.xMax??1920)-(t.meta.xMin??0))*t.state.scale},get clientHeight(){return((t.meta.yMax??1080)-(t.meta.yMin??0))*t.state.scale}}),i=ni(t.meta,t.state,r);pi(t.meta,t.state,m);const o=ii(t.state),n=ci(t.state),c=ai(t.state),a=Jl(t.state),p=Gl(t.state),y=()=>{o(),c(),a()},f=e(W,wi)(()=>t.state.background?URL.createObjectURL(t.state.background):null);return()=>{const d=l.value,E=t.state,g=(d==null?void 0:d.coordX(0))||0,x=(d==null?void 0:d.coordY(0))||0,B=((d==null?void 0:d.coordX(t.meta.bgLeft))||0)-g,s=((d==null?void 0:d.coordY(t.meta.bgTop))||0)-x,u=((d==null?void 0:d.coordX(t.meta.bgRight))||0)-g,h=((d==null?void 0:d.coordY(t.meta.bgBottom))||0)-x,v=f.value||t.meta.bgImage;return e(W,tt)("div",{style:"flex: 1;height: calc(100vh - 46px);overflow: hidden;",ref:r,onClick:y,onMousedown:n,onWheel:i,onContextmenu:b=>b.preventDefault()},[E.bounding?e(W,tt)("div",{ref:m,style:{width:`${((t.meta.xMax??1920)-(t.meta.xMin??0))*E.scale}px`,height:`${((t.meta.yMax??1080)-(t.meta.yMin??0))*E.scale}px`,transform:`translate(${~~E.translateX}px, ${~~E.translateY}px)`,background:v?`url(${v}) ${B}px ${s}px / calc(100% - ${B}px - ${u}px) calc(100% - ${s}px - ${h}px) no-repeat`:"var(--card-color)"}},[d?e(W,tt)(e(Xe,fi),{style:"height: 100%;",coordinate:d},{default:()=>{var b;return[E.elements.map((I,z)=>L(I)?e(W,tt)(Vl,{key:I.uid,item:I,index:z},null):C(I)?e(W,tt)(Tl,{key:I.uid,item:I,index:z},null):e(W,tt)(jl,{key:I.uid,item:I,index:z},null)),E.isSelecting&&C(E.curElement)?e(W,tt)(El,{key:E.curElement.uid,item:E.curElement},null):null,(b=p.value)==null?void 0:b.map((I,z)=>e(W,tt)(pl,e(W,mi)(I,{key:`auxiliary${z}`}),null))]}}):null]):null])}}}),Vt=await M("vue"),ki="createElementVNode",bi="openBlock",Ii="createElementBlock",Ni="defineComponent",Mi={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Ci=e(Vt,ki)("path",{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z",fill:"currentColor"},null,-1),Bi=[Ci],zi=e(Vt,Ni)({name:"SwapOutlined",render:function(t,r){return e(Vt,bi)(),e(Vt,Ii)("svg",Mi,Bi)}}),pt=await M("vue"),Ke="createElementVNode",Vi="openBlock",Li="createElementBlock",Si="defineComponent",Di={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},Oi=e(pt,Ke)("g",{fill:"none"},[e(pt,Ke)("path",{d:"M10 2a8 8 0 1 0 0 16a8 8 0 0 0 0-16z",fill:"currentColor"})],-1),ji=[Oi],Lt=e(pt,Si)({name:"Circle20Filled",render:function(t,r){return e(pt,Vi)(),e(pt,Li)("svg",Di,ji)}}),mt=await M("vue"),Ge="createElementVNode",Fi="openBlock",Hi="createElementBlock",Pi="defineComponent",Ai={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},Ri=e(mt,Ge)("g",{fill:"none"},[e(mt,Ge)("path",{d:"M15.5 4a1.5 1.5 0 1 0 0 3a1.5 1.5 0 0 0 0-3zM13 5.5a2.5 2.5 0 1 1 1.557 2.316l-1.282 1.923a2.5 2.5 0 1 1-3.83 3.185l-2.496 1.07a2.5 2.5 0 1 1-.394-.919l2.496-1.07a2.5 2.5 0 0 1 3.392-2.822l1.282-1.922A2.492 2.492 0 0 1 13 5.5zm-3 6a1.5 1.5 0 1 0 3 0a1.5 1.5 0 0 0-3 0zm-7 3a1.5 1.5 0 1 0 3 0a1.5 1.5 0 0 0-3 0z",fill:"currentColor"})],-1),Ui=[Ri],Je=e(mt,Pi)({name:"DataLine20Regular",render:function(t,r){return e(mt,Fi)(),e(mt,Hi)("svg",Ai,Ui)}}),ft=await M("vue"),Qe="createElementVNode",$i="openBlock",Ti="createElementBlock",Wi="defineComponent",qi={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 16 16"},Yi=e(ft,Qe)("g",{fill:"none"},[e(ft,Qe)("path",{d:"M1 5.5A2.5 2.5 0 0 1 3.5 3h9A2.5 2.5 0 0 1 15 5.5v5a2.5 2.5 0 0 1-2.5 2.5h-9A2.5 2.5 0 0 1 1 10.5v-5zM3.5 4A1.5 1.5 0 0 0 2 5.5v5A1.5 1.5 0 0 0 3.5 12h9a1.5 1.5 0 0 0 1.5-1.5v-5A1.5 1.5 0 0 0 12.5 4h-9z",fill:"currentColor"})],-1),Xi=[Yi],Ze=e(ft,Wi)({name:"RectangleLandscape16Regular",render:function(t,r){return e(ft,$i)(),e(ft,Ti)("svg",qi,Xi)}}),rt=await M("vue"),he="createElementVNode",Ki="openBlock",Gi="createElementBlock",Ji="defineComponent",Qi={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Zi=e(rt,he)("path",{d:"M200.66 352H144a96 96 0 0 1 0-192h55.41",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48"},null,-1),_i=e(rt,he)("path",{d:"M312.59 160H368a96 96 0 0 1 0 192h-56.66",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48"},null,-1),ta=e(rt,he)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M169.07 256h175.86"},null,-1),ea=[Zi,_i,ta],na=e(rt,Ji)({name:"Link",render:function(t,r){return e(rt,Ki)(),e(rt,Gi)("svg",Qi,ea)}}),_e=t=>typeof t=="object"&&t!=null&&t.nodeType===1,tn=(t,r)=>(!r||t!=="hidden")&&t!=="visible"&&t!=="clip",pe=(t,r)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const l=getComputedStyle(t,null);return tn(l.overflowY,r)||tn(l.overflowX,r)||(m=>{const i=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(m);return!!i&&(i.clientHeight<m.scrollHeight||i.clientWidth<m.scrollWidth)})(t)}return!1},St=(t,r,l,m,i,o,n,c)=>o<t&&n>r||o>t&&n<r?0:o<=t&&c<=l||n>=r&&c>=l?o-t-m:n>r&&c<l||o<t&&c>l?n-r+i:0,oa=t=>t.parentElement??(t.getRootNode().host||null),en=(t,r)=>{var l,m,i,o;if(typeof document>"u")return[];const{scrollMode:n,block:c,inline:a,boundary:p,skipOverflowHiddenElements:y}=r,f=typeof p=="function"?p:it=>it!==p;if(!_e(t))throw new TypeError("Invalid target");const d=document.scrollingElement||document.documentElement,E=[];let g=t;for(;_e(g)&&f(g);){if(g=oa(g),g===d){E.push(g);break}g!=null&&g===document.body&&pe(g)&&!pe(document.documentElement)||g!=null&&pe(g,y)&&E.push(g)}const x=(m=(l=window.visualViewport)==null?void 0:l.width)!=null?m:innerWidth,B=(o=(i=window.visualViewport)==null?void 0:i.height)!=null?o:innerHeight,{scrollX:s,scrollY:u}=window,{height:h,width:v,top:b,right:I,bottom:z,left:P}=t.getBoundingClientRect(),{top:U,right:ao,bottom:so,left:ro}=(it=>{const H=window.getComputedStyle(it);return{top:parseFloat(H.scrollMarginTop)||0,right:parseFloat(H.scrollMarginRight)||0,bottom:parseFloat(H.scrollMarginBottom)||0,left:parseFloat(H.scrollMarginLeft)||0}})(t);let Y=c==="start"||c==="nearest"?b-U:c==="end"?z+so:b+h/2-U+so,X=a==="center"?P+v/2-ro+ao:a==="end"?I+ao:P-ro;const ye=[];for(let it=0;it<E.length;it++){const H=E[it],{height:Ut,width:$t,top:Tt,right:Ee,bottom:ke,left:Wt}=H.getBoundingClientRect();if(n==="if-needed"&&b>=0&&P>=0&&z<=B&&I<=x&&b>=Tt&&z<=ke&&P>=Wt&&I<=Ee)return ye;const qt=getComputedStyle(H),Yt=parseInt(qt.borderLeftWidth,10),Xt=parseInt(qt.borderTopWidth,10),Kt=parseInt(qt.borderRightWidth,10),Gt=parseInt(qt.borderBottomWidth,10);let et=0,nt=0;const Jt="offsetWidth"in H?H.offsetWidth-H.clientWidth-Yt-Kt:0,Qt="offsetHeight"in H?H.offsetHeight-H.clientHeight-Xt-Gt:0,be="offsetWidth"in H?H.offsetWidth===0?0:$t/H.offsetWidth:0,Ie="offsetHeight"in H?H.offsetHeight===0?0:Ut/H.offsetHeight:0;if(d===H)et=c==="start"?Y:c==="end"?Y-B:c==="nearest"?St(u,u+B,B,Xt,Gt,u+Y,u+Y+h,h):Y-B/2,nt=a==="start"?X:a==="center"?X-x/2:a==="end"?X-x:St(s,s+x,x,Yt,Kt,s+X,s+X+v,v),et=Math.max(0,et+u),nt=Math.max(0,nt+s);else{et=c==="start"?Y-Tt-Xt:c==="end"?Y-ke+Gt+Qt:c==="nearest"?St(Tt,ke,Ut,Xt,Gt+Qt,Y,Y+h,h):Y-(Tt+Ut/2)+Qt/2,nt=a==="start"?X-Wt-Yt:a==="center"?X-(Wt+$t/2)+Jt/2:a==="end"?X-Ee+Kt+Jt:St(Wt,Ee,$t,Yt,Kt+Jt,X,X+v,v);const{scrollLeft:co,scrollTop:uo}=H;et=Ie===0?0:Math.max(0,Math.min(uo+et/Ie,H.scrollHeight-Ut/Ie+Qt)),nt=be===0?0:Math.max(0,Math.min(co+nt/be,H.scrollWidth-$t/be+Jt)),Y+=uo-et,X+=co-nt}ye.push({el:H,top:et,left:nt})}return ye},la=t=>t===!1?{block:"end",inline:"nearest"}:(r=>r===Object(r)&&Object.keys(r).length!==0)(t)?t:{block:"start",inline:"nearest"};function ia(t,r){if(!t.isConnected||!(i=>{let o=i;for(;o&&o.parentNode;){if(o.parentNode===document)return!0;o=o.parentNode instanceof ShadowRoot?o.parentNode.host:o.parentNode}return!1})(t))return;const l=(i=>{const o=window.getComputedStyle(i);return{top:parseFloat(o.scrollMarginTop)||0,right:parseFloat(o.scrollMarginRight)||0,bottom:parseFloat(o.scrollMarginBottom)||0,left:parseFloat(o.scrollMarginLeft)||0}})(t);if((i=>typeof i=="object"&&typeof i.behavior=="function")(r))return r.behavior(en(t,r));const m=typeof r=="boolean"||r==null?void 0:r.behavior;for(const{el:i,top:o,left:n}of en(t,la(r))){const c=o-l.top+l.bottom,a=n-l.left+l.right;i.scroll({top:c,left:a,behavior:m})}}const nn=await M("@rdx/admin"),F=await M("vue"),G=await M("naive-ui"),aa="NIcon",sa="NIcon",ra="NInput",ca="NFormItem",ua="NInput",da="NFormItem",ha="NIcon",pa="NButton",ma="NPopover",fa="NScrollbar",A="createVNode",va="isVNode",xa="defineComponent",ga="ref",wa="watch",ya="useColors",Ea="createHoverColor";function ka(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!e(F,va)(t)}const ba=e(F,xa)({props:{state:{type:Object,required:!0},hack:{type:Function,required:!0}},setup(t){const r=e(nn,ya)();let l=null;const m=e(F,ga)(null);return e(F,wa)(m,i=>{i&&setTimeout(()=>{ia(i,{scrollMode:"if-needed",behavior:"smooth",block:"center",inline:"nearest"})},250)},{immediate:!0}),()=>{let i;return e(F,A)(e(G,fa),{class:"un-h-full un-w-240px un-bg-#fff un-b-r-1px un-b-r-solid un-border-var(--divider-color)"},ka(i=t.state.elements.map((o,n)=>e(F,A)("div",{key:o.uid,ref:c=>{t.state.curElement===o&&(m.value=c)},draggable:!0,onDragstart:()=>l=n,onDragover:c=>{l!==null&&c.preventDefault()},onDrop:async()=>{if(l===null||l===n)return;await t.hack();const c=t.state.elements[l];l<n?(t.state.elements.splice(n+1,0,c),t.state.elements.splice(l,1)):(t.state.elements.splice(l,1),t.state.elements.splice(n,0,c))}},[e(F,A)(e(G,ma),{placement:"left",trigger:"click",raw:!0},{default:()=>{var c;return[e(F,A)("div",{class:"un-relative un-p-8px un-bg-#fff un-rounded-3px"},[((c=t.state.curElement)==null?void 0:c.type)==="line"?e(F,A)(e(G,pa),{text:!0,class:"un-absolute un-right-8px",type:"primary",onClick:()=>{t.state.curElement.points.reverse()}},{default:()=>[e(F,A)(e(G,ha),null,{default:()=>[e(F,A)(zi,null,null)]})]}):null,e(F,A)(e(G,da),{label:"\u540D\u79F0"},{default:()=>[e(F,A)(e(G,ua),{value:o.name,"onUpdate:value":a=>o.name=a},null)]}),e(F,A)(e(G,ca),{label:"\u5173\u8054\u53D8\u91CF",class:"un-mb--12px"},{default:()=>[e(F,A)(e(G,ra),{value:o.variableKey,"onUpdate:value":a=>o.variableKey=a},null)]})])]},trigger:()=>e(F,A)("div",{class:["un-cursor-move un-px-8px un-py-4px un-lh-24px un-flex un-items-center un-gap-6px un-min-h-32px",t.state.selectElements.has(o)?"":"un-hover:bg-var(--hover-color)"],style:{background:t.state.selectElements.has(o)?e(nn,Ea)(r.value.primaryColor,.75):void 0},onClick:c=>{t.state.mode==="select"&&(c.ctrlKey||(t.state.selectElements=new Set),t.state.selectElements.has(o)?t.state.selectElements.delete(o):t.state.selectElements.add(o),t.state.curElement=o)}},[e(F,A)("div",{class:"un-flex-none un-flex un-items-center"},[e(F,A)(e(G,sa),{size:14},{default:()=>[C(o)?e(F,A)(Ze,null,null):L(o)?e(F,A)(Je,null,null):e(F,A)(Lt,null,null)]})]),e(F,A)("div",{class:"un-flex-1"},[o.name||"\u672A\u547D\u540D"]),o.variableKey?e(F,A)("div",{class:"un-flex-none un-flex un-items-center"},[e(F,A)(e(G,aa),{size:14},{default:()=>[e(F,A)(na,null,null)]})]):null])})])))?i:{default:()=>[i]})}}}),Dt=await M("vue"),Ia="createElementVNode",Na="openBlock",Ma="createElementBlock",Ca="defineComponent",Ba={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},za=e(Dt,Ia)("path",{d:"M180 176h-60c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8zm724 0h-60c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8zM785.3 504.3L657.7 403.6a7.23 7.23 0 0 0-11.7 5.7V476H378v-62.8c0-6-7-9.4-11.7-5.7L238.7 508.3a7.14 7.14 0 0 0 0 11.3l127.5 100.8c4.7 3.7 11.7.4 11.7-5.7V548h268v62.8c0 6 7 9.4 11.7 5.7l127.5-100.8c3.8-2.9 3.8-8.5.2-11.4z",fill:"currentColor"},null,-1),Va=[za],on=e(Dt,Ca)({name:"ColumnWidthOutlined",render:function(t,r){return e(Dt,Na)(),e(Dt,Ma)("svg",Ba,Va)}}),vt=await M("vue"),ln="createElementVNode",La="openBlock",Sa="createElementBlock",Da="defineComponent",Oa={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},ja=e(vt,ln)("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448s448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372s372 166.6 372 372s-166.6 372-372 372z",fill:"currentColor"},null,-1),Fa=e(vt,ln)("path",{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7c-21.2 8.1-39.2 22.3-52.1 40.9c-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0 1 30.9-44.8c59-22.7 97.1-74.7 97.1-132.5c.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1 0 80 0a40 40 0 1 0-80 0z",fill:"currentColor"},null,-1),Ha=[ja,Fa],Pa=e(vt,Da)({name:"QuestionCircleOutlined",render:function(t,r){return e(vt,La)(),e(vt,Sa)("svg",Oa,Ha)}}),Ot=await M("vue"),Aa="createElementVNode",Ra="openBlock",Ua="createElementBlock",$a="defineComponent",Ta={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Wa=e(Ot,Aa)("path",{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144s144-64.5 144-144s-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80s80 35.8 80 80s-35.8 80-80 80z",fill:"currentColor"},null,-1),qa=[Wa],Ya=e(Ot,$a)({name:"SaveOutlined",render:function(t,r){return e(Ot,Ra)(),e(Ot,Ua)("svg",Ta,qa)}}),jt=await M("vue"),Xa="createElementVNode",Ka="openBlock",Ga="createElementBlock",Ja="defineComponent",Qa={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Za=e(jt,Xa)("path",{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h360c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H184V184h656v320c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V144c0-17.7-14.3-32-32-32zM653.3 599.4l52.2-52.2a8.01 8.01 0 0 0-4.7-13.6l-179.4-21c-5.1-.6-9.5 3.7-8.9 8.9l21 179.4c.8 6.6 8.9 9.4 13.6 4.7l52.4-52.4l256.2 256.2c3.1 3.1 8.2 3.1 11.3 0l42.4-42.4c3.1-3.1 3.1-8.2 0-11.3L653.3 599.4z",fill:"currentColor"},null,-1),_a=[Za],ts=e(jt,Ja)({name:"SelectOutlined",render:function(t,r){return e(jt,Ka)(),e(jt,Ga)("svg",Qa,_a)}}),Ft=await M("vue"),es="createElementVNode",ns="openBlock",os="createElementBlock",ls="defineComponent",is={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},as=e(Ft,es)("path",{d:"M839.6 433.8L749 150.5a9.24 9.24 0 0 0-8.9-6.5h-77.4c-4.1 0-7.6 2.6-8.9 6.5l-91.3 283.3c-.3.9-.5 1.9-.5 2.9c0 5.1 4.2 9.3 9.3 9.3h56.4c4.2 0 7.8-2.8 9-6.8l17.5-61.6h89l17.3 61.5c1.1 4 4.8 6.8 9 6.8h61.2c1 0 1.9-.1 2.8-.4c2.4-.8 4.3-2.4 5.5-4.6c1.1-2.2 1.3-4.7.6-7.1zM663.3 325.5l32.8-116.9h6.3l32.1 116.9h-71.2zm143.5 492.9H677.2v-.4l132.6-188.9c1.1-1.6 1.7-3.4 1.7-5.4v-36.4c0-5.1-4.2-9.3-9.3-9.3h-204c-5.1 0-9.3 4.2-9.3 9.3v43c0 5.1 4.2 9.3 9.3 9.3h122.6v.4L587.7 828.9a9.35 9.35 0 0 0-1.7 5.4v36.4c0 5.1 4.2 9.3 9.3 9.3h211.4c5.1 0 9.3-4.2 9.3-9.3v-43a9.2 9.2 0 0 0-9.2-9.3zM416 702h-76V172c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v530h-76c-6.7 0-10.5 7.8-6.3 13l112 141.9a8 8 0 0 0 12.6 0l112-141.9c4.1-5.2.4-13-6.3-13z",fill:"currentColor"},null,-1),ss=[as],rs=e(Ft,ls)({name:"SortAscendingOutlined",render:function(t,r){return e(Ft,ns)(),e(Ft,os)("svg",is,ss)}}),Ht=await M("vue"),cs="createElementVNode",us="openBlock",ds="createElementBlock",hs="defineComponent",ps={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},ms=e(Ht,cs)("path",{d:"M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355a8 8 0 0 0-12.6 0l-112 141.7a7.98 7.98 0 0 0 6.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z",fill:"currentColor"},null,-1),fs=[ms],Pt=e(Ht,hs)({name:"VerticalAlignTopOutlined",render:function(t,r){return e(Ht,us)(),e(Ht,ds)("svg",ps,fs)}}),xt=await M("vue"),an="createElementVNode",vs="openBlock",xs="createElementBlock",gs="defineComponent",ws={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},ys=e(xt,an)("g",{fill:"none"},[e(xt,an)("path",{d:"M14.085 2H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h3v2H5.5a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1H13v-2h3a2 2 0 0 0 2-2V7h-1v6a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h10v-.5c0-.175.03-.344.085-.5zM12 17H8v-2h4v2zm3-14.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V5h-.78a.5.5 0 0 0-.474.342l-.544 1.632A1.5 1.5 0 0 1 11.78 8H11v1.5a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V7h.78a.5.5 0 0 0 .474-.342l.544-1.632A1.5 1.5 0 0 1 14.22 4H15V2.5zM10 7H8v2h2V7zm6-2h2V3h-2v2z",fill:"currentColor"})],-1),Es=[ys],ks=e(xt,gs)({name:"DesktopFlow20Regular",render:function(t,r){return e(xt,vs)(),e(xt,xs)("svg",ws,Es)}}),gt=await M("vue"),sn="createElementVNode",bs="openBlock",Is="createElementBlock",Ns="defineComponent",Ms={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Cs=e(gt,sn)("g",{fill:"none"},[e(gt,sn)("path",{d:"M10.25 2a.75.75 0 0 1 .743.648L11 2.75v4.794A6.253 6.253 0 0 1 16.457 13h4.794a.75.75 0 0 1 .102 1.493l-.102.007h-4.794A6.253 6.253 0 0 1 11 19.956v1.295a.75.75 0 0 1-1.494.102L9.5 21.25v-1.295a6.253 6.253 0 0 1-5.455-5.454H2.75a.75.75 0 0 1-.102-1.494L2.75 13h1.294A6.253 6.253 0 0 1 9.5 7.544V2.75a.75.75 0 0 1 .75-.75zM9.5 14.5H5.559A4.754 4.754 0 0 0 9.5 18.442V14.5zm5.441 0H11v3.941a4.754 4.754 0 0 0 3.941-3.94zm-5.44-5.442A4.754 4.754 0 0 0 5.558 13H9.5V9.058zm1.5 0L11 13h3.942a4.755 4.755 0 0 0-3.726-3.902L11 9.058z",fill:"currentColor"})],-1),Bs=[Cs],zs=e(gt,Ns)({name:"PointScan24Regular",render:function(t,r){return e(gt,bs)(),e(gt,Is)("svg",Ms,Bs)}}),ot=await M("vue"),At="createElementVNode",Vs="openBlock",Ls="createElementBlock",Ss="defineComponent",Ds={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Os=e(ot,At)("rect",{x:"48",y:"80",width:"416",height:"352",rx:"48",ry:"48",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),js=e(ot,At)("circle",{cx:"336",cy:"176",r:"32",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),Fs=e(ot,At)("path",{d:"M304 335.79l-90.66-90.49a32 32 0 0 0-43.87-1.3L48 352",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Hs=e(ot,At)("path",{d:"M224 432l123.34-123.34a32 32 0 0 1 43.11-2L464 368",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Ps=[Os,js,Fs,Hs],rn=e(ot,Ss)({name:"ImageOutline",render:function(t,r){return e(ot,Vs)(),e(ot,Ls)("svg",Ds,Ps)}});function As(t){const r=t.filter(o=>L(o)),l=(o,n)=>o[0]===n[0]&&o[1]===n[1],m=[];r.forEach(o=>{const n=o.points.at(-1);if(m.some(a=>l(a.point,n)))return;const c=r.filter(a=>o!==a&&l(n,a.points.at(0))).length;c?m.push({point:n,branch:c>1}):r.filter(a=>o!==a&&(l(o.points.at(-1),a.points.at(0))||l(o.points.at(0),a.points.at(-1)))).length||m.push({point:o.points.at(0)})});const i=r.map(o=>{const n=m.findIndex(a=>l(a.point,o.points.at(0))),c=m.findIndex(a=>l(a.point,o.points.at(-1)));return{source:n===-1?void 0:n,target:c===-1?void 0:c}});return{nodes:m,edges:i}}const Rs=await M("@rdx/admin"),Us=await M("@rdx/shared"),cn=await M("@lowcode-fe/designer/designer"),T=await M("vue"),$s=await M("naive-ui"),Ts="NModal",un="createTextVNode",J="createVNode",Ws="mergeProps",dn="CodeEditor",qs="defineComponent",Ys="createModalProps",Xs="presetStyleModal",Ks=e(T,qs)({props:{...e(Us,Ys)()},setup(t){return()=>e(T,J)(e($s,Ts),e(T,Ws)({preset:"card",showIcon:!1,maskClosable:!1,title:"\u6D41\u7A0B\u53C2\u6570",show:t.show,"onUpdate:show":t["onUpdate:show"],style:{width:"1200px"},size:"small",autoFocus:!1},e(Rs,Xs)),{default:()=>{var r,l;return[e(T,J)("div",{class:"un-flex un-gap-8px"},[e(T,J)("div",{class:"un-flex-1"},[e(T,J)("div",{class:"un-px-12px un-lh-32px"},[e(T,un)("\u8282\u70B9")]),e(T,J)("div",{style:"height: calc(100vh - 240px);"},[e(T,J)(e(cn,dn),{readOnly:!0,value:`[
${(r=t.data)==null?void 0:r.nodes.map(m=>`  { ${m.branch?`branch: true, location: [${m.point[0]}, ${m.point[1]}]`:"on: true"} },`).join(`\r
`)}
]`},null)])]),e(T,J)("div",{class:"un-w-400px"},[e(T,J)("div",{class:"un-px-12px un-lh-32px"},[e(T,un)("\u8FDE\u63A5\u7EBF")]),e(T,J)("div",{style:"height: calc(100vh - 240px);"},[e(T,J)(e(cn,dn),{readOnly:!0,value:`[
${(l=t.data)==null?void 0:l.edges.map(m=>`  { ${["source","target"].filter(i=>m[i]!==void 0).map(i=>`${i}: ${m[i]}`).join(", ")} },`).join(`\r
`)}
]`},null)])])])]}})}}),Gs=await M("@rdx/admin"),w=await M("vue"),V=await M("naive-ui"),Js="NDivider",Qs="NButtonGroup",Zs="NDivider",_s="NColorPicker",tr="NIcon",er="NButton",nr="NInputNumber",or="NFormItem",lr="NInputNumber",ir="NFormItem",ar="NInputNumber",sr="NFormItem",rr="NInputNumber",cr="NFormItem",ur="NIcon",dr="NButton",hr="NDivider",pr="NInput",mr="NFormItem",fr="NPopover",vr="NDivider",xr="NDivider",gr="NButtonGroup",wr="NDivider",yr="NInputNumber",Er="NInputGroupLabel",kr="NInputGroup",br="NDivider",Ir="NIcon",Nr="NButton",Mr="NIcon",Cr="NIcon",Br="NPopover",zr="NIcon",Vr="NButton",Lr="NTooltip",Sr="NIcon",Dr="NButton",Or="NTooltip",jr="NIcon",Fr="NButton",Hr="NTooltip",Pr="isVNode",k="createVNode",Ar="Fragment",me="createTextVNode",Rr="defineComponent",hn="ref",Ur="preferMessage";function fe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!e(w,Pr)(t)}let pn,ve,Rt,xe,q,ge,mn,fn,lt,we,vn,xn,gn,wn,yn,En,kn,bn,In,Nn,Mn,Cn,S,O,Bn,zn,Vn,Ln,Sn,Dn,On,jn,Fn,Hn,Pn,An,Rn,Un,$n,Tn,Wn,qn,Yn,Xn,Kn,Gn,Jn,Qn,Zn,_n,to,eo,D,no,oo,lo,io;pn=e(w,Rr)({props:{meta:{type:Object,required:!0},state:{type:Object,required:!0},hack:{type:Function,required:!0},onSave:{type:Function,required:!0}},setup(t){const r=R(()=>t.meta,"bgImage"),l=R(()=>t.meta,"bgLeft",0),m=R(()=>t.meta,"bgRight",0),i=R(()=>t.meta,"bgTop",0),o=R(()=>t.meta,"bgBottom",0),n=(x,B,s)=>e(w,k)(e(V,Hr),null,{default:()=>[s],trigger:()=>e(w,k)(e(V,Fr),{type:t.state.mode===B?"primary":"default",ghost:!0,size:"small",onClick:()=>{const u=at(t.state);ut(t.state,B),j(t.state,()=>st(t.state,u))},focusable:!1},{default:()=>[e(w,k)(e(V,jr),null,fe(x)?x:{default:()=>[x]})]})}),c=(x,B,s)=>e(w,k)(e(V,Or),null,{default:()=>[s],trigger:()=>e(w,k)(e(V,Dr),{type:t.state[B]?"primary":"default",ghost:!0,size:"small",onClick:()=>t.state[B]=!t.state[B],focusable:!1},{default:()=>[e(w,k)(e(V,Sr),null,fe(x)?x:{default:()=>[x]})]})}),a=(x,B,s)=>e(w,k)(e(V,Lr),null,{default:()=>[B],trigger:()=>e(w,k)(e(V,Vr),{type:"default",ghost:!0,size:"small",onClick:s,focusable:!1},{default:()=>[e(w,k)(e(V,zr),null,fe(x)?x:{default:()=>[x]})]})}),p=()=>{const x=document.createElement("input");x.style.display="none",x.type="file",x.onchange=B=>{var s;t.state.background=(s=B.target.files)==null?void 0:s[0]},document.body.appendChild(x),x.click(),x.remove()},y=R(()=>t.state,"color"),f=()=>{t.state.curElement?t.state.curElement.color=y.v:y.on()},d=[{key:"ctrl + s",desc:"\u4FDD\u5B58"},{key:"ctrl + a",desc:"\u5168\u9009"},{key:"ctrl + b",desc:"\u65B0\u589E\u62D0\u70B9"},{key:"ctrl + d",desc:"\u5206\u5272\u7EBF"},{key:"ctrl + j",desc:"\u8DF3\u7EBF"},{key:"ctrl + z",desc:"\u64A4\u9500"},{key:"space",desc:"\u7ED3\u675F\u753B\u7EBF"},{key:"delete",desc:"\u5220\u9664\u5143\u7D20"}],E=e(w,hn)(!1),g=e(w,hn)();return()=>e(w,k)(e(w,Ar),null,[e(w,k)("div",{class:"un-flex un-items-center un-text-14px un-gap-8px"},[e(w,k)(e(V,Br),null,{default:()=>[e(w,k)("div",{class:"un-flex un-flex-col un-gap-8px"},[d.map(x=>e(w,k)("div",{key:x.key,class:"un-flex"},[e(w,k)("div",{class:"un-w-60px un-text-center un-bg-#eaeaea un-rounded-3px"},[x.key]),e(w,k)("div",{class:"un-ml-8px"},[x.desc])])),e(w,k)("div",{class:"un-flex un-gap-8px"},[e(w,k)("div",{class:"un-flex un-items-center"},[e(w,k)(e(V,Cr),{color:"#f00"},{default:()=>[e(w,k)(Lt,null,null)]}),e(w,k)("div",{class:"un-ml-8px"},[e(w,me)("\u8D77\u70B9")])]),e(w,k)("div",{class:"un-flex un-items-center"},[e(w,k)(e(V,Mr),{color:"#0f0"},{default:()=>[e(w,k)(Lt,null,null)]}),e(w,k)("div",{class:"un-ml-8px"},[e(w,me)("\u7EC8\u70B9")])])])])],trigger:()=>e(w,k)(e(V,Nr),{ghost:!0,size:"small",focusable:!1},{default:()=>[e(w,k)(e(V,Ir),null,{default:()=>[e(w,k)(Pa,null,null)]})]})}),e(w,k)(e(V,br),{vertical:!0},null),e(w,k)(e(V,kr),{class:"un-w-96px"},{default:()=>[e(w,k)(e(V,Er),{size:"small"},{default:()=>[e(w,me)("\u6B65\u8DDD")]}),e(w,k)(e(V,yr),{size:"small",value:t.state.stepPace,"onUpdate:value":x=>t.state.stepPace=x,showButton:!1},null)]}),a(e(w,k)(ks,null,null),"\u89E3\u6790\u6D41\u7A0B",()=>{const x=As(Array.from(t.state.selectElements));if(!x.nodes.length){e(Gs,Ur).warning("\u8BF7\u5148\u9009\u62E9\u7EBF");return}E.value=!0,g.value=x,t.state.selectElements.clear()}),e(w,k)(e(V,wr),{vertical:!0},null),e(w,k)(e(V,gr),null,{default:()=>[n(e(w,k)(ts,null,null),"select","\u9009\u62E9"),n(e(w,k)(Ze,null,null),"rect","\u6846"),n(e(w,k)(Je,null,null),"line","\u7EBF"),n(e(w,k)(Lt,null,null),"point","\u70B9")]}),e(w,k)(e(V,xr),{vertical:!0},null),c("\u221F","orthogonal","\u6B63\u4EA4"),c(e(w,k)(zs,null,null),"pickup","\u5BF9\u8C61\u62FE\u53D6"),e(w,k)(e(V,vr),{vertical:!0},null),e(w,k)(e(V,fr),null,{default:()=>[e(w,k)("div",{class:"un-flex un-items-center un-gap-6px"},[e(w,k)(e(V,mr),{label:"\u80CC\u666F\u56FE\u7247:",labelPlacement:"left",showFeedback:!1},{default:()=>[e(w,k)(e(V,pr),{value:r.v,"onUpdate:value":x=>r.v=x,onBlur:r.on},null)]}),e(w,k)(e(V,hr),{vertical:!0},null),e(w,k)(e(V,dr),{ghost:!0,size:"small",onClick:p,focusable:!1},{default:()=>[e(w,k)(e(V,ur),null,{default:()=>[e(w,k)(rn,null,null)]})]})]),e(w,k)("div",{class:"un-grid un-grid-cols-2 un-gap-12px un-mt-12px"},[e(w,k)(e(V,cr),{label:"\u5DE6:",labelPlacement:"left",showFeedback:!1},{default:()=>[e(w,k)(e(V,rr),{value:l.v,"onUpdate:value":x=>l.v=x,onBlur:l.on,class:"un-w-120px"},null)]}),e(w,k)(e(V,sr),{label:"\u53F3:",labelPlacement:"left",showFeedback:!1},{default:()=>[e(w,k)(e(V,ar),{value:m.v,"onUpdate:value":x=>m.v=x,onBlur:m.on,class:"un-w-120px"},null)]}),e(w,k)(e(V,ir),{label:"\u4E0A:",labelPlacement:"left",showFeedback:!1},{default:()=>[e(w,k)(e(V,lr),{value:i.v,"onUpdate:value":x=>i.v=x,onBlur:i.on,class:"un-w-120px"},null)]}),e(w,k)(e(V,or),{label:"\u4E0B:",labelPlacement:"left",showFeedback:!1},{default:()=>[e(w,k)(e(V,nr),{value:o.v,"onUpdate:value":x=>o.v=x,onBlur:o.on,class:"un-w-120px"},null)]})])],trigger:()=>e(w,k)(e(V,er),{ghost:!0,size:"small",focusable:!1},{default:()=>[e(w,k)(e(V,tr),null,{default:()=>[e(w,k)(rn,null,null)]})]})}),e(w,k)(e(V,_s),{value:y.v,"onUpdate:value":x=>y.v=x,onComplete:f,size:"small",renderLabel:()=>null,class:"un-w-34px"},null),e(w,k)(e(V,Zs),{vertical:!0},null),e(w,k)(e(V,Qs),null,{default:()=>[a(e(w,k)(on,null,null),"\u6C34\u5E73\u5206\u5E03",()=>{const x=Array.from(t.state.selectElements).filter(s=>!L(s));if(x.length<=2)return;const B=x.map(s=>C(s)?s.x:s.location[0]);_o(x)&&j(t.state,()=>{x.forEach((s,u)=>{C(s)?s.x=B[u]:s.location[0]=B[u]})})}),a(e(w,k)(on,{style:"transform: rotate(90deg)"},null),"\u5782\u76F4\u5206\u5E03",()=>{const x=Array.from(t.state.selectElements).filter(s=>!L(s));if(x.length<=2)return;const B=x.map(s=>C(s)?s.y:s.location[1]);tl(x)&&j(t.state,()=>{x.forEach((s,u)=>{C(s)?s.y=B[u]:s.location[1]=B[u]})})}),a(e(w,k)(Pt,{style:"transform: rotate(-90deg)"},null),"\u5DE6\u5BF9\u9F50",()=>{if(t.state.selectElements.size<2)return;const x=Array.from(t.state.selectElements).filter(s=>!L(s)),B=Math.min(...x.map(s=>C(s)?s.x:s.location[0]));x.forEach(s=>{if(C(s)){const u=s.x;j(t.state,()=>s.x=u),s.x=B}else if(!L(s)){const u=s.location[0];j(t.state,()=>s.location[0]=u),s.location[0]=B}})}),a(e(w,k)(Pt,{style:"transform: rotate(90deg)"},null),"\u53F3\u5BF9\u9F50",()=>{if(t.state.selectElements.size<2)return;const x=Array.from(t.state.selectElements).filter(s=>!L(s)),B=Math.max(...x.map(s=>C(s)?s.x+s.width:s.location[0]));x.forEach(s=>{if(C(s)){const u=s.x;j(t.state,()=>s.x=u),s.x=B-s.width}else if(!L(s)){const u=s.location[0];j(t.state,()=>s.location[0]=u),s.location[0]=B}})}),a(e(w,k)(Pt,null,null),"\u4E0A\u5BF9\u9F50",()=>{if(t.state.selectElements.size<2)return;const x=Array.from(t.state.selectElements).filter(s=>!L(s)),B=Math.min(...x.map(s=>C(s)?s.y:s.location[1]));x.forEach(s=>{if(C(s)){const u=s.y;j(t.state,()=>s.y=u),s.y=B}else if(!L(s)){const u=s.location[1];j(t.state,()=>s.location[1]=u),s.location[1]=B}})}),a(e(w,k)(Pt,{style:"transform: rotate(180deg)"},null),"\u4E0B\u5BF9\u9F50",()=>{if(t.state.selectElements.size<2)return;const x=Array.from(t.state.selectElements).filter(s=>!L(s)),B=Math.max(...x.map(s=>C(s)?s.y+s.height:s.location[1]));x.forEach(s=>{if(C(s)){const u=s.y;j(t.state,()=>s.y=u),s.y=B-s.height}else if(!L(s)){const u=s.location[1];j(t.state,()=>s.location[1]=u),s.location[1]=B}})})]}),e(w,k)(e(V,Js),{vertical:!0},null),a(e(w,k)(rs,null,null),"\u5206\u7EC4\u6392\u5E8F",async()=>{await t.hack(),t.state.elements=Zo(t.state.elements,"variableKey")}),a(e(w,k)(Ya,null,null),"\u4FDD\u5B58",t.onSave)]),e(w,k)(Ks,{show:E.value,"onUpdate:show":x=>E.value=x,data:g.value},null)])}}),ve=await M("@rdx/admin"),Rt=await M("@rdx/shared"),xe=await M("@lowcode-fe/designer/designer"),q=await M("vue"),ge=await M("naive-ui"),mn="NDrawerContent",fn="NDrawer",lt="createVNode",we="useDesginer",vn="defineComponent",xn="reactive",gn="ref",wn="nextTick",yn="createModalProps",En="useModalLogic",kn="convertListToMap",bn="useColors",In="preferMessage",Nn=e(q,vn)({props:{meta:{type:Object,required:!0},...e(Rt,yn)()},setup(t){const{pauseShortcut:r,continueShortcut:l}=e(xe,we)(),m=e(ve,bn)(),i=e(q,xn)({mode:"select",elements:[],location:[0,0],scale:1,stepPace:1,pickup:!0,orthogonal:!0,rollbackStack:[],translateX:0,translateY:0,background:null,color:m.value.primaryColor,canBlur:!0,selectElements:new Set}),o={};e(Rt,En)({props:t,onShow:()=>{r();const B=y(p()).filter(u=>u.metaCode==="slot"),s=t.meta.elements;s?(s.forEach((u,h)=>{u.name=B[h].name,o[u.uid]=B[h]}),i.elements=JSON.parse(JSON.stringify(s))):i.elements=[],ut(i),Qo(i.elements.length?Math.max(...i.elements.map(u=>u.uid)):0)},onClose(){l()}});const{createElement:n,removeChild:c,appendChild:a,getCurElement:p,getChildren:y,insertBefore:f,getParent:d}=e(xe,we)(),E=()=>{var u;const B=e(Rt,kn)(i.elements.filter(h=>h.slotIndex!==void 0),"slotIndex",!0),s=y(p()).filter(h=>h.metaCode==="slot");(u=t.meta.elements)==null||u.forEach(h=>{B[h.slotIndex]||c(s[h.slotIndex])}),i.elements.forEach(h=>{if(h.slotIndex===void 0){const v=o[h.uid]=n({metaCode:"slot",name:h.name,preset:{children:[]}});a(v)}}),i.elements.forEach((h,v)=>{h.slotIndex=v,o[h.uid].name=h.name});for(let h=i.elements.length-1;h>=0;h-=1){const v=o[i.elements[h].uid];f(v,y(d(v))[0])}t.meta.elements=JSON.parse(JSON.stringify(i.elements)),e(ve,In).success("\u4FDD\u5B58\u6210\u529F")};ll(i,E);const g=e(q,gn)(!0),x=async()=>{g.value=!1,await e(q,wn)(),g.value=!0};return()=>e(q,lt)(e(ge,fn),{maskClosable:!1,show:t.show,"onUpdate:show":t["onUpdate:show"],style:"width: 100vw;",autoFocus:!1,themeOverrides:{headerPadding:"8px 16px",bodyPadding:"0"},closeOnEsc:!1},{default:()=>[e(q,lt)(e(ge,mn),{closable:!0,bodyStyle:"background: #f2f4fa;"},{default:()=>[e(q,lt)("div",{class:"un-h-full un-flex"},[e(q,lt)(ba,{state:i,hack:x},null),g.value?e(q,lt)(Ei,{meta:t.meta,state:i},null):null])],header:()=>e(q,lt)(pn,{state:i,meta:t.meta,hack:x,onSave:E},null)})]})}}),Mn=await M("@rdx/shared"),Cn=await M("@lowcode-fe/designer/designer"),S=await M("vue"),O=await M("naive-ui"),Bn="NInputNumber",zn="NFormItem",Vn="NInputNumber",Ln="NFormItem",Sn="NInputNumber",Dn="NFormItem",On="NInputNumber",jn="NFormItem",Fn="NCollapseItem",Hn="NCollapse",Pn="NInput",An="NFormItem",Rn="NIcon",Un="NButton",$n="NInputNumber",Tn="NFormItem",Wn="NSelect",qn="NFormItem",Yn="NInputNumber",Xn="NFormItem",Kn="NInputNumber",Gn="NFormItem",Jn="NInputNumber",Qn="NFormItem",Zn="NInputNumber",_n="NFormItem",to="NInput",eo="NFormItem",D="createVNode",no="createTextVNode",oo="useRegisterVar",lo="defineComponent",io="useBoolean",ho=e(S,lo)({props:{meta:{type:Object,required:!0}},setup(t){const r=R(()=>t.meta,"xMin",0),l=R(()=>t.meta,"xMax",1920),m=R(()=>t.meta,"yMin",0),i=R(()=>t.meta,"yMax",1080),o=R(()=>t.meta,"bgImage"),n=R(()=>t.meta,"bgLeft",0),c=R(()=>t.meta,"bgRight",0),a=R(()=>t.meta,"bgTop",0),p=R(()=>t.meta,"bgBottom",0),y=R(()=>t.meta,"dpr",1),f=R(()=>t.meta,"scopeKey","canvas");e(Cn,oo)(g=>{const x=t.meta.scopeKey??"canvas";g("coord",`$g('${x}Coord')`,"\u5750\u6807\u7CFB",!0),g("points",`$g('${x}Graphic').points`,"\u56FE\u5F62\u5750\u6807",!0),g("data",`$g('${x}Graphic').data`,"\u56FE\u5F62\u6570\u636E",!0),g("data",`$g('${x}Graphic').index`,"\u56FE\u5F62\u6570\u636E\u4E0B\u6807",!0)});const{booleanRef:d,setTrue:E}=e(Mn,io)();return()=>e(S,D)("div",{class:"un-py-12px"},[e(S,D)("div",{class:"un-px-12px"},[e(S,D)(e(O,eo),{label:"\u7EC4\u4EF6\u6807\u8BC6"},{default:()=>[e(S,D)(e(O,to),{value:f.v,"onUpdate:value":g=>f.v=g,onBlur:f.on},null)]}),e(S,D)("div",{class:"un-grid un-grid-cols-2 un-gap-x-8px"},[e(S,D)(e(O,_n),{label:"XMin"},{default:()=>[e(S,D)(e(O,Zn),{value:r.v,"onUpdate:value":g=>r.v=g,onBlur:r.on},null)]}),e(S,D)(e(O,Qn),{label:"XMax"},{default:()=>[e(S,D)(e(O,Jn),{value:l.v,"onUpdate:value":g=>l.v=g,onBlur:l.on},null)]}),e(S,D)(e(O,Gn),{label:"YMin"},{default:()=>[e(S,D)(e(O,Kn),{value:m.v,"onUpdate:value":g=>m.v=g,onBlur:m.on},null)]}),e(S,D)(e(O,Xn),{label:"YMax"},{default:()=>[e(S,D)(e(O,Yn),{value:i.v,"onUpdate:value":g=>i.v=g,onBlur:i.on},null)]}),e(S,D)(e(O,qn),{label:"\u6E32\u67D3\u5668"},{default:()=>[e(S,D)(e(O,Wn),{defaultValue:"canvas",value:t.meta.renderer,"onUpdate:value":g=>t.meta.renderer=g,options:[{label:"canvas",value:"canvas"},{label:"svg",value:"svg"}]},null)]}),e(S,D)(e(O,Tn),{label:"dpr"},{default:()=>[e(S,D)(e(O,$n),{value:y.v,"onUpdate:value":g=>y.v=g,onBlur:y.on,min:1},null)]})]),e(S,D)(e(O,Un),{block:!0,size:"small",class:"un-justify-between",iconPlacement:"right",onClick:E},{default:()=>[e(S,no)("\u7ED8\u5236\u56FE\u5F62")],icon:()=>e(S,D)(e(O,Rn),{size:14},{default:()=>[e(S,D)(yo,null,null)]})}),e(S,D)(e(O,An),{label:"\u80CC\u666F\u56FE\u7247",showFeedback:!1,class:"un-mt-12px"},{default:()=>[e(S,D)(e(O,Pn),{value:o.v,"onUpdate:value":g=>o.v=g,onBlur:o.on},null)]})]),e(S,D)(e(O,Hn),{class:"un-mt-12px"},{default:()=>[e(S,D)(e(O,Fn),{title:"\u8FB9\u8DDD",name:1},{default:()=>[e(S,D)("div",{class:"un-pl-12px un-grid un-grid-cols-2 un-gap-8px"},[e(S,D)(e(O,jn),{label:"\u5DE6",showFeedback:!1},{default:()=>[e(S,D)(e(O,On),{value:n.v,"onUpdate:value":g=>n.v=g,onBlur:n.on,class:"un-w-120px"},null)]}),e(S,D)(e(O,Dn),{label:"\u53F3",showFeedback:!1},{default:()=>[e(S,D)(e(O,Sn),{value:c.v,"onUpdate:value":g=>c.v=g,onBlur:c.on,class:"un-w-120px"},null)]}),e(S,D)(e(O,Ln),{label:"\u4E0A",showFeedback:!1},{default:()=>[e(S,D)(e(O,Vn),{value:a.v,"onUpdate:value":g=>a.v=g,onBlur:a.on,class:"un-w-120px"},null)]}),e(S,D)(e(O,zn),{label:"\u4E0B",showFeedback:!1},{default:()=>[e(S,D)(e(O,Bn),{value:p.v,"onUpdate:value":g=>p.v=g,onBlur:p.on,class:"un-w-120px"},null)]})])]})]}),e(S,D)(Nn,{show:d.value,"onUpdate:show":g=>d.value=g,meta:t.meta},null)])}})});export{ho as Canvas,Tr as __tla};
